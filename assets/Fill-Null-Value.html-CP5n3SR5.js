import{_ as s,c as e,b as a,o as t}from"./app-C4AeQnH1.js";const l={};function i(p,n){return t(),e("div",null,n[0]||(n[0]=[a(`<h1 id="fill-null-value" tabindex="-1"><a class="header-anchor" href="#fill-null-value"><span>Fill Null Value</span></a></h1><p>When performing segment aggregation on a time series, there may be no data for a certain period of time, and the aggregated result of this segment of data is null, but this kind of null value is not conducive to data visualization and analysis, and the null value needs to be filled.</p><p>Fill null value allows the user to fill the query result with null values according to a specific method, such as taking the previous value that is not null, or linear interpolation. The query result after filling the null value can better reflect the data distribution, which is beneficial for users to perform data analysis.</p><p>In IoTDB, users can use the FILL clause to specify the fill mode when data is missing at a point in time or a time window. If the queried point&#39;s value is not null, the fill function will not work.</p><h2 id="fill-methods" tabindex="-1"><a class="header-anchor" href="#fill-methods"><span>Fill Methods</span></a></h2><p>IoTDB supports previous, linear, and value fill methods. Following table lists the data types and supported fill methods.</p><table><thead><tr><th style="text-align:left;">Data Type</th><th style="text-align:left;">Supported Fill Methods</th></tr></thead><tbody><tr><td style="text-align:left;">boolean</td><td style="text-align:left;">previous, value</td></tr><tr><td style="text-align:left;">int32</td><td style="text-align:left;">previous, linear, value</td></tr><tr><td style="text-align:left;">int64</td><td style="text-align:left;">previous, linear, value</td></tr><tr><td style="text-align:left;">float</td><td style="text-align:left;">previous, linear, value</td></tr><tr><td style="text-align:left;">double</td><td style="text-align:left;">previous, linear, value</td></tr><tr><td style="text-align:left;">text</td><td style="text-align:left;">previous</td></tr></tbody></table><blockquote><p>Note: Only one Fill method can be specified in a Fill statement. Null value fill is compatible with version 0.12 and previous syntax (fill((&lt;data_type&gt;[&lt;fill_method&gt;(, &lt;before_range&gt;, &lt;after_range&gt;)?])+)), but the old syntax could not specify multiple fill methods at the same time</p></blockquote><h2 id="single-point-fill" tabindex="-1"><a class="header-anchor" href="#single-point-fill"><span>Single Point Fill</span></a></h2><p>When data in a particular timestamp is null, the null values can be filled using single fill, as described below:</p><h3 id="previous-fill" tabindex="-1"><a class="header-anchor" href="#previous-fill"><span>Previous Fill</span></a></h3><p>When the value in the queried timestamp is null, the value of the previous timestamp is used to fill the blank. The formalized previous method is as follows:</p><div class="language-sql line-numbers-mode" data-highlighter="prismjs" data-ext="sql" data-title="sql"><pre><code><span class="line"><span class="token keyword">select</span> <span class="token operator">&lt;</span>path<span class="token operator">&gt;</span> <span class="token keyword">from</span> <span class="token operator">&lt;</span>prefixPath<span class="token operator">&gt;</span> <span class="token keyword">where</span> <span class="token keyword">time</span> <span class="token operator">=</span> <span class="token operator">&lt;</span>T<span class="token operator">&gt;</span> fill<span class="token punctuation">(</span>previous<span class="token punctuation">(</span><span class="token punctuation">,</span> <span class="token operator">&lt;</span>before_range<span class="token operator">&gt;</span><span class="token punctuation">)</span>?<span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>Detailed descriptions of all parameters are given in following table:</p><table><thead><tr><th style="text-align:left;">Parameter name (case insensitive)</th><th style="text-align:left;">Interpretation</th></tr></thead><tbody><tr><td style="text-align:left;">path, prefixPath</td><td style="text-align:left;">query path; mandatory field</td></tr><tr><td style="text-align:left;">T</td><td style="text-align:left;">query timestamp (only one can be specified); mandatory field</td></tr><tr><td style="text-align:left;">before_range</td><td style="text-align:left;">represents the valid time range of the previous method. The previous method works when there are values in the [T-before_range, T] range. When before_range is not specified, before_range takes the default value default_fill_interval; -1 represents infinit; optional field</td></tr></tbody></table><p>Here we give an example of filling null values using the previous method. The SQL statement is as follows:</p><div class="language-sql line-numbers-mode" data-highlighter="prismjs" data-ext="sql" data-title="sql"><pre><code><span class="line"><span class="token keyword">select</span> temperature <span class="token keyword">from</span> root<span class="token punctuation">.</span>sgcc<span class="token punctuation">.</span>wf03<span class="token punctuation">.</span>wt01 <span class="token keyword">where</span> <span class="token keyword">time</span> <span class="token operator">=</span> <span class="token number">2017</span><span class="token operator">-</span><span class="token number">11</span><span class="token operator">-</span><span class="token number">01</span>T16:<span class="token number">37</span>:<span class="token number">50.000</span> fill<span class="token punctuation">(</span>previous<span class="token punctuation">,</span> <span class="token number">1</span>s<span class="token punctuation">)</span> </span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>which means:</p><p>Because the timeseries root.sgcc.wf03.wt01.temperature is null at 2017-11-01T16:37:50.000, the system uses the previous timestamp 2017-11-01T16:37:00.000 (and the timestamp is in the [2017-11-01T16:36:50.000, 2017-11-01T16:37:50.000] time range) for fill and display.</p><p>On the <a href="https://github.com/thulab/iotdb/files/4438687/OtherMaterial-Sample.Data.txt" target="_blank" rel="noopener noreferrer">sample data</a>, the execution result of this statement is shown below:</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre><code><span class="line">+-----------------------------+-------------------------------+</span>
<span class="line">|                         Time|root.sgcc.wf03.wt01.temperature|</span>
<span class="line">+-----------------------------+-------------------------------+</span>
<span class="line">|2017-11-01T16:37:50.000+08:00|                          21.93|</span>
<span class="line">+-----------------------------+-------------------------------+</span>
<span class="line">Total line number = 1</span>
<span class="line">It costs 0.016s</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>It is worth noting that if there is no value in the specified valid time range, the system will not fill the null value, as shown below:</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre><code><span class="line">IoTDB&gt; select temperature from root.sgcc.wf03.wt01 where time = 2017-11-01T16:37:50.000 fill(float[previous, 1s]) </span>
<span class="line">+-----------------------------+-------------------------------+</span>
<span class="line">|                         Time|root.sgcc.wf03.wt01.temperature|</span>
<span class="line">+-----------------------------+-------------------------------+</span>
<span class="line">|2017-11-01T16:37:50.000+08:00|                           null|</span>
<span class="line">+-----------------------------+-------------------------------+</span>
<span class="line">Total line number = 1</span>
<span class="line">It costs 0.004s</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="linear-fill" tabindex="-1"><a class="header-anchor" href="#linear-fill"><span>Linear Fill</span></a></h3><p>When the value in the queried timestamp is null, the value of the previous and the next timestamp is used to fill the blank. The formalized linear method is as follows:</p><div class="language-sql line-numbers-mode" data-highlighter="prismjs" data-ext="sql" data-title="sql"><pre><code><span class="line"><span class="token keyword">select</span> <span class="token operator">&lt;</span>path<span class="token operator">&gt;</span> <span class="token keyword">from</span> <span class="token operator">&lt;</span>prefixPath<span class="token operator">&gt;</span> <span class="token keyword">where</span> <span class="token keyword">time</span> <span class="token operator">=</span> <span class="token operator">&lt;</span>T<span class="token operator">&gt;</span> fill<span class="token punctuation">(</span>linear<span class="token punctuation">(</span><span class="token punctuation">,</span> <span class="token operator">&lt;</span>before_range<span class="token operator">&gt;</span><span class="token punctuation">,</span> <span class="token operator">&lt;</span>after_range<span class="token operator">&gt;</span><span class="token punctuation">)</span>?<span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>Detailed descriptions of all parameters are given in following table:</p><table><thead><tr><th style="text-align:left;">Parameter name (case insensitive)</th><th style="text-align:left;">Interpretation</th></tr></thead><tbody><tr><td style="text-align:left;">path, prefixPath</td><td style="text-align:left;">query path; mandatory field</td></tr><tr><td style="text-align:left;">T</td><td style="text-align:left;">query timestamp (only one can be specified); mandatory field</td></tr><tr><td style="text-align:left;">before_range, after_range</td><td style="text-align:left;">represents the valid time range of the linear method. The previous method works when there are values in the [T-before_range, T+after_range] range. When before_range and after_range are not explicitly specified, default_fill_interval is used. -1 represents infinity; optional field</td></tr></tbody></table><p><strong>Note</strong> if the timeseries has a valid value at query timestamp T, this value will be used as the linear fill value.<br> Otherwise, if there is no valid fill value in either range [T - before_range, T] or [T, T + after_range], linear fill method will return null.</p><p>Here we give an example of filling null values using the linear method. The SQL statement is as follows:</p><div class="language-sql line-numbers-mode" data-highlighter="prismjs" data-ext="sql" data-title="sql"><pre><code><span class="line"><span class="token keyword">select</span> temperature <span class="token keyword">from</span> root<span class="token punctuation">.</span>sgcc<span class="token punctuation">.</span>wf03<span class="token punctuation">.</span>wt01 <span class="token keyword">where</span> <span class="token keyword">time</span> <span class="token operator">=</span> <span class="token number">2017</span><span class="token operator">-</span><span class="token number">11</span><span class="token operator">-</span><span class="token number">01</span>T16:<span class="token number">37</span>:<span class="token number">50.000</span> fill<span class="token punctuation">(</span>linear<span class="token punctuation">,</span> <span class="token number">1</span>m<span class="token punctuation">,</span> <span class="token number">1</span>m<span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>which means:</p><p>Because the timeseries root.sgcc.wf03.wt01.temperature is null at 2017-11-01T16:37:50.000, the system uses the previous timestamp 2017-11-01T16:37:00.000 (and the timestamp is in the [2017-11-01T16:36:50.000, 2017-11-01T16:37:50.000] time range) and its value 21.927326, the next timestamp 2017-11-01T16:38:00.000 (and the timestamp is in the [2017-11-01T16:37:50.000, 2017-11-01T16:38:50.000] time range) and its value 25.311783 to perform linear fitting calculation: 21.927326 + (25.311783-21.927326)/60s * 50s = 24.747707</p><p>On the <a href="https://github.com/thulab/iotdb/files/4438687/OtherMaterial-Sample.Data.txt" target="_blank" rel="noopener noreferrer">sample data</a>, the execution result of this statement is shown below:</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre><code><span class="line">+-----------------------------+-------------------------------+</span>
<span class="line">|                         Time|root.sgcc.wf03.wt01.temperature|</span>
<span class="line">+-----------------------------+-------------------------------+</span>
<span class="line">|2017-11-01T16:37:50.000+08:00|                      24.746666|</span>
<span class="line">+-----------------------------+-------------------------------+</span>
<span class="line">Total line number = 1</span>
<span class="line">It costs 0.017s</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="value-fill" tabindex="-1"><a class="header-anchor" href="#value-fill"><span>Value Fill</span></a></h3><p>When the value in the queried timestamp is null, given fill value is used to fill the blank. The formalized value method is as follows:</p><div class="language-sql line-numbers-mode" data-highlighter="prismjs" data-ext="sql" data-title="sql"><pre><code><span class="line"><span class="token keyword">select</span> <span class="token operator">&lt;</span>path<span class="token operator">&gt;</span> <span class="token keyword">from</span> <span class="token operator">&lt;</span>prefixPath<span class="token operator">&gt;</span> <span class="token keyword">where</span> <span class="token keyword">time</span> <span class="token operator">=</span> <span class="token operator">&lt;</span>T<span class="token operator">&gt;</span> fill<span class="token punctuation">(</span>constant<span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>Detailed descriptions of all parameters are given in following table:</p><table><thead><tr><th style="text-align:left;">Parameter name (case insensitive)</th><th style="text-align:left;">Interpretation</th></tr></thead><tbody><tr><td style="text-align:left;">path, prefixPath</td><td style="text-align:left;">query path; mandatory field</td></tr><tr><td style="text-align:left;">T</td><td style="text-align:left;">query timestamp (only one can be specified); mandatory field</td></tr><tr><td style="text-align:left;">constant</td><td style="text-align:left;">represents given fill value</td></tr></tbody></table><p><strong>Note</strong> if the timeseries has a valid value at query timestamp T, this value will be used as the specific fill value.</p><p>Here we give an example of filling null values using the value method. The SQL statement is as follows:</p><div class="language-sql line-numbers-mode" data-highlighter="prismjs" data-ext="sql" data-title="sql"><pre><code><span class="line"><span class="token keyword">select</span> temperature <span class="token keyword">from</span> root<span class="token punctuation">.</span>sgcc<span class="token punctuation">.</span>wf03<span class="token punctuation">.</span>wt01 <span class="token keyword">where</span> <span class="token keyword">time</span> <span class="token operator">=</span> <span class="token number">2017</span><span class="token operator">-</span><span class="token number">11</span><span class="token operator">-</span><span class="token number">01</span>T16:<span class="token number">37</span>:<span class="token number">50.000</span> fill<span class="token punctuation">(</span><span class="token number">2.0</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>which means:</p><p>Because the timeseries root.sgcc.wf03.wt01.temperature is null at 2017-11-01T16:37:50.000, the system uses given specific value 2.0 to fill</p><p>On the <a href="https://github.com/thulab/iotdb/files/4438687/OtherMaterial-Sample.Data.txt" target="_blank" rel="noopener noreferrer">sample data</a>, the execution result of this statement is shown below:</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre><code><span class="line">+-----------------------------+-------------------------------+</span>
<span class="line">|                         Time|root.sgcc.wf03.wt01.temperature|</span>
<span class="line">+-----------------------------+-------------------------------+</span>
<span class="line">|2017-11-01T16:37:50.000+08:00|                            2.0|</span>
<span class="line">+-----------------------------+-------------------------------+</span>
<span class="line">Total line number = 1</span>
<span class="line">It costs 0.007s</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>When using the ValueFill, note that IoTDB will not fill the query result if the data type is different from the input constant</p><p>example:</p><div class="language-sql line-numbers-mode" data-highlighter="prismjs" data-ext="sql" data-title="sql"><pre><code><span class="line"><span class="token keyword">select</span> temperature <span class="token keyword">from</span> root<span class="token punctuation">.</span>sgcc<span class="token punctuation">.</span>wf03<span class="token punctuation">.</span>wt01 <span class="token keyword">where</span> <span class="token keyword">time</span> <span class="token operator">=</span> <span class="token number">2017</span><span class="token operator">-</span><span class="token number">11</span><span class="token operator">-</span><span class="token number">01</span>T16:<span class="token number">37</span>:<span class="token number">50.000</span> fill<span class="token punctuation">(</span><span class="token string">&#39;test&#39;</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>result:</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre><code><span class="line">+-----------------------------+-------------------------------+</span>
<span class="line">|                         Time|root.sgcc.wf03.wt01.temperature|</span>
<span class="line">+-----------------------------+-------------------------------+</span>
<span class="line">|2017-11-01T16:37:50.000+08:00|                          null |</span>
<span class="line">+-----------------------------+-------------------------------+</span>
<span class="line">Total line number = 1</span>
<span class="line">It costs 0.007s</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="downsampling-with-fill" tabindex="-1"><a class="header-anchor" href="#downsampling-with-fill"><span>Downsampling with Fill</span></a></h2><p>IoTDB supports null value filling of original down-frequency aggregate results. Previous, Linear, and Value fill methods can be used in any aggregation operator in a query statement, but only one fill method can be used in a query statement. In addition, the following two points should be paid attention to when using:</p><ul><li>GroupByFill will not fill the aggregate result of count in any case, because in IoTDB, if there is no data in a time range, the aggregate result of count is 0.</li><li>GroupByFill will classify sum aggregation results. In IoTDB, if a query interval does not contain any data, sum aggregation result is null, and GroupByFill will fill sum. If the sum of a time range happens to be 0, GroupByFill will not fill the value</li></ul><p>The syntax of downsampling aggregate query is similar to that of single fill query. Simple examples and usage details are listed below:</p><h3 id="difference-between-previousuntillast-and-previous" tabindex="-1"><a class="header-anchor" href="#difference-between-previousuntillast-and-previous"><span>Difference Between PREVIOUSUNTILLAST And PREVIOUS:</span></a></h3><ul><li>PREVIOUS will fill any null value as long as there exist value is not null before it.</li><li>PREVIOUSUNTILLAST won&#39;t fill the result whose time is after the last time of that time series.</li></ul><p>first, we check value root.ln.wf01.wt01.temperature when time after 2017-11-07T23:49:00.</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre><code><span class="line">IoTDB&gt; SELECT temperature FROM root.ln.wf01.wt01 where time &gt;= 2017-11-07T23:49:00</span>
<span class="line">+-----------------------------+-----------------------------+</span>
<span class="line">|                         Time|root.ln.wf01.wt01.temperature|</span>
<span class="line">+-----------------------------+-----------------------------+</span>
<span class="line">|2017-11-07T23:49:00.000+08:00|                         23.7|</span>
<span class="line">|2017-11-07T23:51:00.000+08:00|                        22.24|</span>
<span class="line">|2017-11-07T23:53:00.000+08:00|                        24.58|</span>
<span class="line">|2017-11-07T23:54:00.000+08:00|                        22.52|</span>
<span class="line">|2017-11-07T23:57:00.000+08:00|                        24.39|</span>
<span class="line">|2017-11-08T00:00:00.000+08:00|                        21.07|</span>
<span class="line">+-----------------------------+-----------------------------+</span>
<span class="line">Total line number = 6</span>
<span class="line">It costs 0.010s</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>we will find that in root.ln.wf01.wt01.temperature the first time and value are 2017-11-07T23:49:00 and 23.7 and the last time and value are 2017-11-08T00:00:00 and 21.07 respectively.</p><p>Then execute SQL statements:</p><div class="language-sql line-numbers-mode" data-highlighter="prismjs" data-ext="sql" data-title="sql"><pre><code><span class="line"><span class="token keyword">SELECT</span> last_value<span class="token punctuation">(</span>temperature<span class="token punctuation">)</span> <span class="token keyword">FROM</span> root<span class="token punctuation">.</span>ln<span class="token punctuation">.</span>wf01<span class="token punctuation">.</span>wt01 <span class="token keyword">GROUP</span> <span class="token keyword">BY</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">2017</span><span class="token operator">-</span><span class="token number">11</span><span class="token operator">-</span><span class="token number">07</span>T23:<span class="token number">50</span>:<span class="token number">00</span><span class="token punctuation">,</span> <span class="token number">2017</span><span class="token operator">-</span><span class="token number">11</span><span class="token operator">-</span><span class="token number">07</span>T23:<span class="token number">59</span>:<span class="token number">00</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token number">1</span>m<span class="token punctuation">)</span> FILL <span class="token punctuation">(</span>PREVIOUSUNTILLAST<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">SELECT</span> last_value<span class="token punctuation">(</span>temperature<span class="token punctuation">)</span> <span class="token keyword">FROM</span> root<span class="token punctuation">.</span>ln<span class="token punctuation">.</span>wf01<span class="token punctuation">.</span>wt01 <span class="token keyword">GROUP</span> <span class="token keyword">BY</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">2017</span><span class="token operator">-</span><span class="token number">11</span><span class="token operator">-</span><span class="token number">07</span>T23:<span class="token number">50</span>:<span class="token number">00</span><span class="token punctuation">,</span> <span class="token number">2017</span><span class="token operator">-</span><span class="token number">11</span><span class="token operator">-</span><span class="token number">07</span>T23:<span class="token number">59</span>:<span class="token number">00</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token number">1</span>m<span class="token punctuation">)</span> FILL <span class="token punctuation">(</span>PREVIOUS<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>result:</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre><code><span class="line">IoTDB&gt; SELECT last_value(temperature) FROM root.ln.wf01.wt01 GROUP BY([2017-11-07T23:50:00, 2017-11-07T23:59:00),1m) FILL (PREVIOUSUNTILLAST);</span>
<span class="line">+-----------------------------+-----------------------------------------+</span>
<span class="line">|                         Time|last_value(root.ln.wf01.wt01.temperature)|</span>
<span class="line">+-----------------------------+-----------------------------------------+</span>
<span class="line">|2017-11-07T23:50:00.000+08:00|                                     null|</span>
<span class="line">|2017-11-07T23:51:00.000+08:00|                                    22.24|</span>
<span class="line">|2017-11-07T23:52:00.000+08:00|                                    22.24|</span>
<span class="line">|2017-11-07T23:53:00.000+08:00|                                    24.58|</span>
<span class="line">|2017-11-07T23:54:00.000+08:00|                                    22.52|</span>
<span class="line">|2017-11-07T23:55:00.000+08:00|                                    22.52|</span>
<span class="line">|2017-11-07T23:56:00.000+08:00|                                    22.52|</span>
<span class="line">|2017-11-07T23:57:00.000+08:00|                                    24.39|</span>
<span class="line">|2017-11-07T23:58:00.000+08:00|                                     null|</span>
<span class="line">+-----------------------------+-----------------------------------------+</span>
<span class="line">Total line number = 9</span>
<span class="line">It costs 0.007s</span>
<span class="line"></span>
<span class="line">IoTDB&gt; SELECT last_value(temperature) FROM root.ln.wf01.wt01 GROUP BY([2017-11-07T23:50:00, 2017-11-07T23:59:00),1m) FILL (PREVIOUS);</span>
<span class="line">+-----------------------------+-----------------------------------------+</span>
<span class="line">|                         Time|last_value(root.ln.wf01.wt01.temperature)|</span>
<span class="line">+-----------------------------+-----------------------------------------+</span>
<span class="line">|2017-11-07T23:50:00.000+08:00|                                     null|</span>
<span class="line">|2017-11-07T23:51:00.000+08:00|                                    22.24|</span>
<span class="line">|2017-11-07T23:52:00.000+08:00|                                    22.24|</span>
<span class="line">|2017-11-07T23:53:00.000+08:00|                                    24.58|</span>
<span class="line">|2017-11-07T23:54:00.000+08:00|                                    22.52|</span>
<span class="line">|2017-11-07T23:55:00.000+08:00|                                    22.52|</span>
<span class="line">|2017-11-07T23:56:00.000+08:00|                                    22.52|</span>
<span class="line">|2017-11-07T23:57:00.000+08:00|                                    24.39|</span>
<span class="line">|2017-11-07T23:58:00.000+08:00|                                    24.39|</span>
<span class="line">+-----------------------------+-----------------------------------------+</span>
<span class="line">Total line number = 9</span>
<span class="line">It costs 0.006s</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>which means:</p><p>using PREVIOUSUNTILLAST won&#39;t fill time after 2017-11-07T23:57.</p><h3 id="fill-the-first-and-last-null-value" tabindex="-1"><a class="header-anchor" href="#fill-the-first-and-last-null-value"><span>Fill The First And Last Null Value</span></a></h3><p>The fill methods of IoTDB can be divided into three categories: PreviousFill, LinearFill and ValueFill. Where PreviousFill needs to know the first not-null value before the null value, LinearFill needs to know the first not-null value before and after the null value to fill. If the first or last value in the result returned by a query statement is null, a sequence of null values may exist at the beginning or the end of the result set, which does not meet GroupByFill&#39;s expectations.</p><p>In the above example, there is no data in the first time interval [2017-11-07T23:50:00, 2017-11-07T23:51:00). The previous time interval with data is [2017-11-01T23:49:00, 2017-11-07T23:50:00). The first interval can be filled by setting PREVIOUS to fill the forward query parameter before_range as shown in the following example:</p><div class="language-sql line-numbers-mode" data-highlighter="prismjs" data-ext="sql" data-title="sql"><pre><code><span class="line"><span class="token keyword">SELECT</span> last_value<span class="token punctuation">(</span>temperature<span class="token punctuation">)</span> <span class="token keyword">FROM</span> root<span class="token punctuation">.</span>ln<span class="token punctuation">.</span>wf01<span class="token punctuation">.</span>wt01 <span class="token keyword">GROUP</span> <span class="token keyword">BY</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">2017</span><span class="token operator">-</span><span class="token number">11</span><span class="token operator">-</span><span class="token number">07</span>T23:<span class="token number">50</span>:<span class="token number">00</span><span class="token punctuation">,</span> <span class="token number">2017</span><span class="token operator">-</span><span class="token number">11</span><span class="token operator">-</span><span class="token number">07</span>T23:<span class="token number">59</span>:<span class="token number">00</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token number">1</span>m<span class="token punctuation">)</span> FILL <span class="token punctuation">(</span>PREVIOUS<span class="token punctuation">,</span> <span class="token number">1</span>m<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>result:</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre><code><span class="line">IoTDB&gt; SELECT last_value(temperature) FROM root.ln.wf01.wt01 GROUP BY([2017-11-07T23:50:00, 2017-11-07T23:59:00),1m) FILL (PREVIOUS, 1m);</span>
<span class="line">+-----------------------------+-----------------------------------------+</span>
<span class="line">|                         Time|last_value(root.ln.wf01.wt01.temperature)|</span>
<span class="line">+-----------------------------+-----------------------------------------+</span>
<span class="line">|2017-11-07T23:50:00.000+08:00|                                     23.7|</span>
<span class="line">|2017-11-07T23:51:00.000+08:00|                                    22.24|</span>
<span class="line">|2017-11-07T23:52:00.000+08:00|                                    22.24|</span>
<span class="line">|2017-11-07T23:53:00.000+08:00|                                    24.58|</span>
<span class="line">|2017-11-07T23:54:00.000+08:00|                                    22.52|</span>
<span class="line">|2017-11-07T23:55:00.000+08:00|                                    22.52|</span>
<span class="line">|2017-11-07T23:56:00.000+08:00|                                     null|</span>
<span class="line">|2017-11-07T23:57:00.000+08:00|                                    24.39|</span>
<span class="line">|2017-11-07T23:58:00.000+08:00|                                    24.39|</span>
<span class="line">+-----------------------------+-----------------------------------------+</span>
<span class="line">Total line number = 9</span>
<span class="line">It costs 0.005s</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>explain:</p><p>In order not to conflict with the original semantics, when before_range and after_range parameters are not set, the null value of GroupByFill is filled with the first/next not-null value of the null value. When setting before_range, after_range parameters, and the timestamp of the null record is set to T. GroupByFill takes the previous/last not-null value in [t-before_range, t+after_range) to complete the fill.</p><p>Because there is no data in the time interval [2017-11-07T23:55:00, 2017-11-07T23:57:00), Therefore, although this example fills the data of [2017-11-07T23:50:00, 2017-11-07T23:51:00) by setting before_range, due to the small before_range, [2017-11-07T23:56:00, 2017-11-07T23:57:00) data cannot be filled.</p><p>Before_range and after_range parameters can also be filled with LINEAR, as shown in the following example:</p><div class="language-sql line-numbers-mode" data-highlighter="prismjs" data-ext="sql" data-title="sql"><pre><code><span class="line"><span class="token keyword">SELECT</span> last_value<span class="token punctuation">(</span>temperature<span class="token punctuation">)</span> <span class="token keyword">FROM</span> root<span class="token punctuation">.</span>ln<span class="token punctuation">.</span>wf01<span class="token punctuation">.</span>wt01 <span class="token keyword">GROUP</span> <span class="token keyword">BY</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">2017</span><span class="token operator">-</span><span class="token number">11</span><span class="token operator">-</span><span class="token number">07</span>T23:<span class="token number">50</span>:<span class="token number">00</span><span class="token punctuation">,</span> <span class="token number">2017</span><span class="token operator">-</span><span class="token number">11</span><span class="token operator">-</span><span class="token number">07</span>T23:<span class="token number">59</span>:<span class="token number">00</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token number">1</span>m<span class="token punctuation">)</span> FILL <span class="token punctuation">(</span>LINEAR<span class="token punctuation">,</span> <span class="token number">5</span>m<span class="token punctuation">,</span> <span class="token number">5</span>m<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>resultï¼š</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre><code><span class="line">IoTDB&gt; SELECT last_value(temperature) FROM root.ln.wf01.wt01 GROUP BY([2017-11-07T23:50:00, 2017-11-07T23:59:00),1m) FILL (LINEAR, 5m, 5m);</span>
<span class="line">+-----------------------------+-----------------------------------------+</span>
<span class="line">|                         Time|last_value(root.ln.wf01.wt01.temperature)|</span>
<span class="line">+-----------------------------+-----------------------------------------+</span>
<span class="line">|2017-11-07T23:50:00.000+08:00|                                22.970001|</span>
<span class="line">|2017-11-07T23:51:00.000+08:00|                                    22.24|</span>
<span class="line">|2017-11-07T23:52:00.000+08:00|                                    23.41|</span>
<span class="line">|2017-11-07T23:53:00.000+08:00|                                    24.58|</span>
<span class="line">|2017-11-07T23:54:00.000+08:00|                                    22.52|</span>
<span class="line">|2017-11-07T23:55:00.000+08:00|                                23.143333|</span>
<span class="line">|2017-11-07T23:56:00.000+08:00|                                23.766666|</span>
<span class="line">|2017-11-07T23:57:00.000+08:00|                                    24.39|</span>
<span class="line">|2017-11-07T23:58:00.000+08:00|                                23.283333|</span>
<span class="line">+-----------------------------+-----------------------------------------+</span>
<span class="line">Total line number = 9</span>
<span class="line">It costs 0.008s</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>Note: Set the initial down-frequency query interval to [start_time, end_time). The query result will keep the same as not setting before_range and after_range parameters. However, the query interval is changed to [start_time - before_range, end_time + after_range). Therefore, the efficiency will be affected when these two parameters are set too large. Please pay attention to them when using.</p></blockquote><h3 id="value-fill-1" tabindex="-1"><a class="header-anchor" href="#value-fill-1"><span>Value Fill</span></a></h3><p>The ValueFill method parses the input constant value into a string. During fill, the string constant is converted to the corresponding type of data. If the conversion succeeds, the null record will be filled; otherwise, it is not filled. Examples are as follows:</p><div class="language-sql line-numbers-mode" data-highlighter="prismjs" data-ext="sql" data-title="sql"><pre><code><span class="line"><span class="token keyword">SELECT</span> last_value<span class="token punctuation">(</span>temperature<span class="token punctuation">)</span> <span class="token keyword">FROM</span> root<span class="token punctuation">.</span>ln<span class="token punctuation">.</span>wf01<span class="token punctuation">.</span>wt01 <span class="token keyword">GROUP</span> <span class="token keyword">BY</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">2017</span><span class="token operator">-</span><span class="token number">11</span><span class="token operator">-</span><span class="token number">07</span>T23:<span class="token number">50</span>:<span class="token number">00</span><span class="token punctuation">,</span> <span class="token number">2017</span><span class="token operator">-</span><span class="token number">11</span><span class="token operator">-</span><span class="token number">07</span>T23:<span class="token number">59</span>:<span class="token number">00</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token number">1</span>m<span class="token punctuation">)</span> FILL <span class="token punctuation">(</span><span class="token number">20.0</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token keyword">SELECT</span> last_value<span class="token punctuation">(</span>temperature<span class="token punctuation">)</span> <span class="token keyword">FROM</span> root<span class="token punctuation">.</span>ln<span class="token punctuation">.</span>wf01<span class="token punctuation">.</span>wt01 <span class="token keyword">GROUP</span> <span class="token keyword">BY</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">2017</span><span class="token operator">-</span><span class="token number">11</span><span class="token operator">-</span><span class="token number">07</span>T23:<span class="token number">50</span>:<span class="token number">00</span><span class="token punctuation">,</span> <span class="token number">2017</span><span class="token operator">-</span><span class="token number">11</span><span class="token operator">-</span><span class="token number">07</span>T23:<span class="token number">59</span>:<span class="token number">00</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token number">1</span>m<span class="token punctuation">)</span> FILL <span class="token punctuation">(</span><span class="token string">&#39;temperature&#39;</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>result:</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre><code><span class="line">IoTDB&gt; SELECT last_value(temperature) FROM root.ln.wf01.wt01 GROUP BY([2017-11-07T23:50:00, 2017-11-07T23:59:00),1m) FILL (20.0);</span>
<span class="line">+-----------------------------+-----------------------------------------+</span>
<span class="line">|                         Time|last_value(root.ln.wf01.wt01.temperature)|</span>
<span class="line">+-----------------------------+-----------------------------------------+</span>
<span class="line">|2017-11-07T23:50:00.000+08:00|                                     20.0|</span>
<span class="line">|2017-11-07T23:51:00.000+08:00|                                    22.24|</span>
<span class="line">|2017-11-07T23:52:00.000+08:00|                                     20.0|</span>
<span class="line">|2017-11-07T23:53:00.000+08:00|                                    24.58|</span>
<span class="line">|2017-11-07T23:54:00.000+08:00|                                    22.52|</span>
<span class="line">|2017-11-07T23:55:00.000+08:00|                                     20.0|</span>
<span class="line">|2017-11-07T23:56:00.000+08:00|                                     20.0|</span>
<span class="line">|2017-11-07T23:57:00.000+08:00|                                    24.39|</span>
<span class="line">|2017-11-07T23:58:00.000+08:00|                                     20.0|</span>
<span class="line">+-----------------------------+-----------------------------------------+</span>
<span class="line">Total line number = 9</span>
<span class="line">It costs 0.007s</span>
<span class="line"></span>
<span class="line">IoTDB&gt; SELECT last_value(temperature) FROM root.ln.wf01.wt01 GROUP BY([2017-11-07T23:50:00, 2017-11-07T23:59:00),1m) FILL (&#39;temperature&#39;);</span>
<span class="line">+-----------------------------+-----------------------------------------+</span>
<span class="line">|                         Time|last_value(root.ln.wf01.wt01.temperature)|</span>
<span class="line">+-----------------------------+-----------------------------------------+</span>
<span class="line">|2017-11-07T23:50:00.000+08:00|                                     null|</span>
<span class="line">|2017-11-07T23:51:00.000+08:00|                                    22.24|</span>
<span class="line">|2017-11-07T23:52:00.000+08:00|                                     null|</span>
<span class="line">|2017-11-07T23:53:00.000+08:00|                                    24.58|</span>
<span class="line">|2017-11-07T23:54:00.000+08:00|                                    22.52|</span>
<span class="line">|2017-11-07T23:55:00.000+08:00|                                     null|</span>
<span class="line">|2017-11-07T23:56:00.000+08:00|                                     null|</span>
<span class="line">|2017-11-07T23:57:00.000+08:00|                                    24.39|</span>
<span class="line">|2017-11-07T23:58:00.000+08:00|                                     null|</span>
<span class="line">+-----------------------------+-----------------------------------------+</span>
<span class="line">Total line number = 9</span>
<span class="line">It costs 0.005s</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,86)]))}const o=s(l,[["render",i],["__file","Fill-Null-Value.html.vue"]]),c=JSON.parse('{"path":"/UserGuide/V0.13.x/Query-Data/Fill-Null-Value.html","title":"Fill Null Value","lang":"en-US","frontmatter":{"description":"Fill Null Value When performing segment aggregation on a time series, there may be no data for a certain period of time, and the aggregated result of this segment of data is nul...","head":[["link",{"rel":"alternate","hreflang":"zh-cn","href":"https://iotdb.apache.org/zh/UserGuide/V0.13.x/Query-Data/Fill-Null-Value.html"}],["meta",{"property":"og:url","content":"https://iotdb.apache.org/UserGuide/V0.13.x/Query-Data/Fill-Null-Value.html"}],["meta",{"property":"og:site_name","content":"IoTDB Website"}],["meta",{"property":"og:title","content":"Fill Null Value"}],["meta",{"property":"og:description","content":"Fill Null Value When performing segment aggregation on a time series, there may be no data for a certain period of time, and the aggregated result of this segment of data is nul..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"en-US"}],["meta",{"property":"og:locale:alternate","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2023-07-10T03:11:17.000Z"}],["meta",{"property":"article:modified_time","content":"2023-07-10T03:11:17.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"Fill Null Value\\",\\"image\\":[\\"\\"],\\"dateModified\\":\\"2023-07-10T03:11:17.000Z\\",\\"author\\":[]}"]]},"headers":[{"level":2,"title":"Fill Methods","slug":"fill-methods","link":"#fill-methods","children":[]},{"level":2,"title":"Single Point Fill","slug":"single-point-fill","link":"#single-point-fill","children":[{"level":3,"title":"Previous Fill","slug":"previous-fill","link":"#previous-fill","children":[]},{"level":3,"title":"Linear Fill","slug":"linear-fill","link":"#linear-fill","children":[]},{"level":3,"title":"Value Fill","slug":"value-fill","link":"#value-fill","children":[]}]},{"level":2,"title":"Downsampling with Fill","slug":"downsampling-with-fill","link":"#downsampling-with-fill","children":[{"level":3,"title":"Difference Between PREVIOUSUNTILLAST And PREVIOUS:","slug":"difference-between-previousuntillast-and-previous","link":"#difference-between-previousuntillast-and-previous","children":[]},{"level":3,"title":"Fill The First And Last Null Value","slug":"fill-the-first-and-last-null-value","link":"#fill-the-first-and-last-null-value","children":[]},{"level":3,"title":"Value Fill","slug":"value-fill-1","link":"#value-fill-1","children":[]}]}],"git":{"createdTime":1688958677000,"updatedTime":1688958677000,"contributors":[{"name":"CritasWang","email":"critas@outlook.com","commits":1}]},"readingTime":{"minutes":9.05,"words":2716},"filePathRelative":"UserGuide/V0.13.x/Query-Data/Fill-Null-Value.md","localizedDate":"July 10, 2023","autoDesc":true}');export{o as comp,c as data};
