import{_ as o,c as p,b as a,d as n,e as s,a as t,w as l,r,o as c}from"./app-zAl9uZF4.js";const u={};function m(v,e){const i=r("RouteLink"),d=r("PathPattern");return c(),p("div",null,[e[9]||(e[9]=a('<h1 id="operate-metadata" tabindex="-1"><a class="header-anchor" href="#operate-metadata"><span>Operate Metadata</span></a></h1><h2 id="database-management" tabindex="-1"><a class="header-anchor" href="#database-management"><span>Database Management</span></a></h2><h3 id="create-database" tabindex="-1"><a class="header-anchor" href="#create-database"><span>Create Database</span></a></h3><p>According to the storage model we can set up the corresponding database. Two SQL statements are supported for creating databases, as follows:</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre><code><span class="line">IoTDB &gt; create database root.ln</span>\n<span class="line">IoTDB &gt; create database root.sgcc</span>\n<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>We can thus create two databases using the above two SQL statements.</p><p>It is worth noting that 1 database is recommended.</p><p>When the path itself or the parent/child layer of the path is already created as database, the path is then not allowed to be created as database. For example, it is not feasible to create <code>root.ln.wf01</code> as database when two databases <code>root.ln</code> and <code>root.sgcc</code> exist. The system gives the corresponding error prompt as shown below:</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre><code><span class="line">IoTDB&gt; CREATE DATABASE root.ln.wf01</span>\n<span class="line">Msg: 300: root.ln has already been created as database.</span>\n<span class="line">IoTDB&gt; create database root.ln.wf01</span>\n<span class="line">Msg: 300: root.ln has already been created as database.</span>\n<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>The LayerName of database can only be chinese or english characters, numbers, underscores, dots and backticks. If you want to set it to pure numbers or contain backticks or dots, you need to enclose the database name with backticks (<code>``</code>). In <code>``</code>，2 backticks represents one, i.e. <code>````</code> represents <code>`</code>.</p><p>Besides, if deploy on Windows system, the LayerName is case-insensitive, which means it&#39;s not allowed to create databases <code>root.ln</code> and <code>root.LN</code> at the same time.</p><h3 id="show-databases" tabindex="-1"><a class="header-anchor" href="#show-databases"><span>Show Databases</span></a></h3>',12)),n("p",null,[e[2]||(e[2]=s("After creating the database, we can use the ")),t(i,{to:"/UserGuide/latest/SQL-Manual/SQL-Manual.html"},{default:l(()=>e[0]||(e[0]=[s("SHOW DATABASES")])),_:1}),e[3]||(e[3]=s(" statement and ")),t(i,{to:"/UserGuide/latest/SQL-Manual/SQL-Manual.html"},{default:l(()=>e[1]||(e[1]=[s("SHOW DATABASES <PathPattern>")])),_:1}),e[4]||(e[4]=s(" to view the databases. The SQL statements are as follows:"))]),e[10]||(e[10]=a(`<div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre><code><span class="line">IoTDB&gt; SHOW DATABASES</span>
<span class="line">IoTDB&gt; SHOW DATABASES root.**</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>The result is as follows:</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre><code><span class="line">+-------------+----+-------------------------+-----------------------+-----------------------+</span>
<span class="line">|database| ttl|schema_replication_factor|data_replication_factor|time_partition_interval|</span>
<span class="line">+-------------+----+-------------------------+-----------------------+-----------------------+</span>
<span class="line">|    root.sgcc|null|                        2|                      2|                 604800|</span>
<span class="line">|      root.ln|null|                        2|                      2|                 604800|</span>
<span class="line">+-------------+----+-------------------------+-----------------------+-----------------------+</span>
<span class="line">Total line number = 2</span>
<span class="line">It costs 0.060s</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="delete-database" tabindex="-1"><a class="header-anchor" href="#delete-database"><span>Delete Database</span></a></h3><p>User can use the <code>DELETE DATABASE &lt;PathPattern&gt;</code> statement to delete all databases matching the pathPattern. Please note the data in the database will also be deleted.</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre><code><span class="line">IoTDB &gt; DELETE DATABASE root.ln</span>
<span class="line">IoTDB &gt; DELETE DATABASE root.sgcc</span>
<span class="line">// delete all data, all timeseries and all databases</span>
<span class="line">IoTDB &gt; DELETE DATABASE root.**</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="count-databases" tabindex="-1"><a class="header-anchor" href="#count-databases"><span>Count Databases</span></a></h3><p>User can use the <code>COUNT DATABASE &lt;PathPattern&gt;</code> statement to count the number of databases. It is allowed to specify <code>PathPattern</code> to count the number of databases matching the <code>PathPattern</code>.</p><p>SQL statement is as follows:</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre><code><span class="line">IoTDB&gt; count databases</span>
<span class="line">IoTDB&gt; count databases root.*</span>
<span class="line">IoTDB&gt; count databases root.sgcc.*</span>
<span class="line">IoTDB&gt; count databases root.sgcc</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>The result is as follows:</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre><code><span class="line">+-------------+</span>
<span class="line">|     database|</span>
<span class="line">+-------------+</span>
<span class="line">|    root.sgcc|</span>
<span class="line">| root.turbine|</span>
<span class="line">|      root.ln|</span>
<span class="line">+-------------+</span>
<span class="line">Total line number = 3</span>
<span class="line">It costs 0.003s</span>
<span class="line"></span>
<span class="line">+-------------+</span>
<span class="line">|     database|</span>
<span class="line">+-------------+</span>
<span class="line">|            3|</span>
<span class="line">+-------------+</span>
<span class="line">Total line number = 1</span>
<span class="line">It costs 0.003s</span>
<span class="line"></span>
<span class="line">+-------------+</span>
<span class="line">|     database|</span>
<span class="line">+-------------+</span>
<span class="line">|            3|</span>
<span class="line">+-------------+</span>
<span class="line">Total line number = 1</span>
<span class="line">It costs 0.002s</span>
<span class="line"></span>
<span class="line">+-------------+</span>
<span class="line">|     database|</span>
<span class="line">+-------------+</span>
<span class="line">|            0|</span>
<span class="line">+-------------+</span>
<span class="line">Total line number = 1</span>
<span class="line">It costs 0.002s</span>
<span class="line"></span>
<span class="line">+-------------+</span>
<span class="line">|     database|</span>
<span class="line">+-------------+</span>
<span class="line">|            1|</span>
<span class="line">+-------------+</span>
<span class="line">Total line number = 1</span>
<span class="line">It costs 0.002s</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="setting-up-heterogeneous-databases-advanced-operations" tabindex="-1"><a class="header-anchor" href="#setting-up-heterogeneous-databases-advanced-operations"><span>Setting up heterogeneous databases (Advanced operations)</span></a></h3><p>Under the premise of familiar with IoTDB metadata modeling,<br> users can set up heterogeneous databases in IoTDB to cope with different production needs.</p><p>Currently, the following database heterogeneous parameters are supported:</p><table><thead><tr><th>Parameter</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>TTL</td><td>Long</td><td>TTL of the Database</td></tr><tr><td>SCHEMA_REPLICATION_FACTOR</td><td>Integer</td><td>The schema replication number of the Database</td></tr><tr><td>DATA_REPLICATION_FACTOR</td><td>Integer</td><td>The data replication number of the Database</td></tr><tr><td>SCHEMA_REGION_GROUP_NUM</td><td>Integer</td><td>The SchemaRegionGroup number of the Database</td></tr><tr><td>DATA_REGION_GROUP_NUM</td><td>Integer</td><td>The DataRegionGroup number of the Database</td></tr></tbody></table><p>Note the following when configuring heterogeneous parameters:</p><ul><li>TTL and TIME_PARTITION_INTERVAL must be positive integers.</li><li>SCHEMA_REPLICATION_FACTOR and DATA_REPLICATION_FACTOR must be smaller than or equal to the number of deployed DataNodes.</li><li>The function of SCHEMA_REGION_GROUP_NUM and DATA_REGION_GROUP_NUM are related to the parameter <code>schema_region_group_extension_policy</code> and <code>data_region_group_extension_policy</code> in iotdb-common.properties configuration file. Take DATA_REGION_GROUP_NUM as an example:<br> If <code>data_region_group_extension_policy=CUSTOM</code> is set, DATA_REGION_GROUP_NUM serves as the number of DataRegionGroups owned by the Database.<br> If <code>data_region_group_extension_policy=AUTO</code>, DATA_REGION_GROUP_NUM is used as the lower bound of the DataRegionGroup quota owned by the Database. That is, when the Database starts writing data, it will have at least this number of DataRegionGroups.</li></ul><p>Users can set any heterogeneous parameters when creating a Database, or adjust some heterogeneous parameters during a stand-alone/distributed IoTDB run.</p><h4 id="set-heterogeneous-parameters-when-creating-a-database" tabindex="-1"><a class="header-anchor" href="#set-heterogeneous-parameters-when-creating-a-database"><span>Set heterogeneous parameters when creating a Database</span></a></h4><p>The user can set any of the above heterogeneous parameters when creating a Database. The SQL statement is as follows:</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre><code><span class="line">CREATE DATABASE prefixPath (WITH databaseAttributeClause (COMMA? databaseAttributeClause)*)?</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>For example:</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre><code><span class="line">CREATE DATABASE root.db WITH SCHEMA_REPLICATION_FACTOR=1, DATA_REPLICATION_FACTOR=3, SCHEMA_REGION_GROUP_NUM=1, DATA_REGION_GROUP_NUM=2;</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h4 id="adjust-heterogeneous-parameters-at-run-time" tabindex="-1"><a class="header-anchor" href="#adjust-heterogeneous-parameters-at-run-time"><span>Adjust heterogeneous parameters at run time</span></a></h4><p>Users can adjust some heterogeneous parameters during the IoTDB runtime, as shown in the following SQL statement:</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre><code><span class="line">ALTER DATABASE prefixPath WITH databaseAttributeClause (COMMA? databaseAttributeClause)*</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>For example:</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre><code><span class="line">ALTER DATABASE root.db WITH SCHEMA_REGION_GROUP_NUM=1, DATA_REGION_GROUP_NUM=2;</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>Note that only the following heterogeneous parameters can be adjusted at runtime:</p><ul><li>SCHEMA_REGION_GROUP_NUM</li><li>DATA_REGION_GROUP_NUM</li></ul><h4 id="show-heterogeneous-databases" tabindex="-1"><a class="header-anchor" href="#show-heterogeneous-databases"><span>Show heterogeneous databases</span></a></h4><p>The user can query the specific heterogeneous configuration of each Database, and the SQL statement is as follows:</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre><code><span class="line">SHOW DATABASES DETAILS prefixPath?</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>For example:</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre><code><span class="line">IoTDB&gt; SHOW DATABASES DETAILS</span>
<span class="line">+--------+--------+-----------------------+---------------------+---------------------+--------------------+-----------------------+-----------------------+------------------+---------------------+---------------------+</span>
<span class="line">|Database|     TTL|SchemaReplicationFactor|DataReplicationFactor|TimePartitionInterval|SchemaRegionGroupNum|MinSchemaRegionGroupNum|MaxSchemaRegionGroupNum|DataRegionGroupNum|MinDataRegionGroupNum|MaxDataRegionGroupNum|</span>
<span class="line">+--------+--------+-----------------------+---------------------+---------------------+--------------------+-----------------------+-----------------------+------------------+---------------------+---------------------+</span>
<span class="line">|root.db1|    null|                      1|                    3|            604800000|                   0|                      1|                      1|                 0|                    2|                    2|</span>
<span class="line">|root.db2|86400000|                      1|                    1|            604800000|                   0|                      1|                      1|                 0|                    2|                    2|</span>
<span class="line">|root.db3|    null|                      1|                    1|            604800000|                   0|                      1|                      1|                 0|                    2|                    2|</span>
<span class="line">+--------+--------+-----------------------+---------------------+---------------------+--------------------+-----------------------+-----------------------+------------------+---------------------+---------------------+</span>
<span class="line">Total line number = 3</span>
<span class="line">It costs 0.058s</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>The query results in each column are as follows:</p><ul><li>The name of the Database</li><li>The TTL of the Database</li><li>The schema replication number of the Database</li><li>The data replication number of the Database</li><li>The time partition interval of the Database</li><li>The current SchemaRegionGroup number of the Database</li><li>The required minimum SchemaRegionGroup number of the Database</li><li>The permitted maximum SchemaRegionGroup number of the Database</li><li>The current DataRegionGroup number of the Database</li><li>The required minimum DataRegionGroup number of the Database</li><li>The permitted maximum DataRegionGroup number of the Database</li></ul><h3 id="ttl" tabindex="-1"><a class="header-anchor" href="#ttl"><span>TTL</span></a></h3><p>IoTDB supports device-level TTL settings, which means it is able to delete old data automatically and periodically. The benefit of using TTL is that hopefully you can control the total disk space usage and prevent the machine from running out of disks. Moreover, the query performance may downgrade as the total number of files goes up and the memory usage also increases as there are more files. Timely removing such files helps to keep at a high query performance level and reduce memory usage.</p><p>The default unit of TTL is milliseconds. If the time precision in the configuration file changes to another, the TTL is still set to milliseconds.</p><p>When setting TTL, the system will look for all devices included in the set path and set TTL for these devices. The system will delete expired data at the device granularity.<br> After the device data expires, it will not be queryable. The data in the disk file cannot be guaranteed to be deleted immediately, but it can be guaranteed to be deleted eventually.<br> However, due to operational costs, the expired data will not be physically deleted right after expiring. The physical deletion is delayed until compaction.<br> Therefore, before the data is physically deleted, if the TTL is reduced or lifted, it may cause data that was previously invisible due to TTL to reappear.<br> The system can only set up to 1000 TTL rules, and when this limit is reached, some TTL rules need to be deleted before new rules can be set.</p><h4 id="ttl-path-rule" tabindex="-1"><a class="header-anchor" href="#ttl-path-rule"><span>TTL Path Rule</span></a></h4><p>The path can only be prefix paths (i.e., the path cannot contain * , except ** in the last level).<br> This path will match devices and also allows users to specify paths without asterisks as specific databases or devices.<br> When the path does not contain asterisks, the system will check if it matches a database; if it matches a database, both the path and path.** will be set at the same time. Note: Device TTL settings do not verify the existence of metadata, i.e., it is allowed to set TTL for a non-existent device.</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre><code><span class="line">qualified paths：</span>
<span class="line">root.**</span>
<span class="line">root.db.**</span>
<span class="line">root.db.group1.**</span>
<span class="line">root.db</span>
<span class="line">root.db.group1.d1</span>
<span class="line"></span>
<span class="line">unqualified paths：</span>
<span class="line">root.*.db</span>
<span class="line">root.**.db.*</span>
<span class="line">root.db.*</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="ttl-applicable-rules" tabindex="-1"><a class="header-anchor" href="#ttl-applicable-rules"><span>TTL Applicable Rules</span></a></h4><p>When a device is subject to multiple TTL rules, the more precise and longer rules are prioritized. For example, for the device &quot;root.bj.hd.dist001.turbine001&quot;, the rule &quot;root.bj.hd.dist001.turbine001&quot; takes precedence over &quot;root.bj.hd.dist001.**&quot;, and the rule &quot;root.bj.hd.dist001.**&quot; takes precedence over &quot;root.bj.hd.**&quot;.</p><h4 id="set-ttl" tabindex="-1"><a class="header-anchor" href="#set-ttl"><span>Set TTL</span></a></h4><p>The set ttl operation can be understood as setting a TTL rule, for example, setting ttl to root.sg.group1.** is equivalent to mounting ttl for all devices that can match this path pattern.<br> The unset ttl operation indicates unmounting TTL for the corresponding path pattern; if there is no corresponding TTL, nothing will be done.<br> If you want to set TTL to be infinitely large, you can use the INF keyword.<br> The SQL Statement for setting TTL is as follow:</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre><code><span class="line">set ttl to pathPattern 360000;</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>Set the Time to Live (TTL) to a pathPattern of 360,000 milliseconds; the pathPattern should not contain a wildcard (*) in the middle and must end with a double asterisk (**). The pathPattern is used to match corresponding devices.<br> To maintain compatibility with older SQL syntax, if the user-provided pathPattern matches a database (db), the path pattern is automatically expanded to include all sub-paths denoted by path.**.<br> For instance, writing &quot;set ttl to <a href="http://root.sg" target="_blank" rel="noopener noreferrer">root.sg</a> 360000&quot; will automatically be transformed into &quot;set ttl to <a href="http://root.sg" target="_blank" rel="noopener noreferrer">root.sg</a>.** 360000&quot;, which sets the TTL for all devices under <a href="http://root.sg" target="_blank" rel="noopener noreferrer">root.sg</a>. However, if the specified pathPattern does not match a database, the aforementioned logic will not apply. For example, writing &quot;set ttl to root.sg.group 360000&quot; will not be expanded to &quot;root.sg.group.**&quot; since root.sg.group does not match a database.<br> It is also permissible to specify a particular device without a wildcard (*).</p><h4 id="unset-ttl" tabindex="-1"><a class="header-anchor" href="#unset-ttl"><span>Unset TTL</span></a></h4><p>To unset TTL, we can use follwing SQL statement:</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre><code><span class="line">IoTDB&gt; unset ttl from root.ln</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>After unset TTL, all data will be accepted in <code>root.ln</code>.</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre><code><span class="line">IoTDB&gt; unset ttl from root.sgcc.**</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>Unset the TTL in the <code>root.sgcc</code> path.</p><p>New syntax</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre><code><span class="line">IoTDB&gt; unset ttl from root.**</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>Old syntax</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre><code><span class="line">IoTDB&gt; unset ttl to root.**</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>There is no functional difference between the old and new syntax, and they are compatible with each other.<br> The new syntax is just more conventional in terms of wording.</p><p>Unset the TTL setting for all path pattern.</p><h4 id="show-ttl" tabindex="-1"><a class="header-anchor" href="#show-ttl"><span>Show TTL</span></a></h4><p>To Show TTL, we can use following SQL statement:</p><p>show all ttl</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre><code><span class="line">IoTDB&gt; SHOW ALL TTL</span>
<span class="line">+--------------+--------+</span>
<span class="line">|          path|     TTL|</span>
<span class="line">|       root.**|55555555|</span>
<span class="line">| root.sg2.a.**|44440000|</span>
<span class="line">+--------------+--------+</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>show ttl on pathPattern</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre><code><span class="line">IoTDB&gt; SHOW TTL ON root.db.**;</span>
<span class="line">+--------------+--------+</span>
<span class="line">|          path|     TTL|</span>
<span class="line">|    root.db.**|55555555|</span>
<span class="line">|  root.db.a.**|44440000|</span>
<span class="line">+--------------+--------+</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>The SHOW ALL TTL example gives the TTL for all path patterns.<br> The SHOW TTL ON pathPattern shows the TTL for the path pattern specified.</p><p>Display devices&#39; ttl</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre><code><span class="line">IoTDB&gt; show devices</span>
<span class="line">+---------------+---------+---------+</span>
<span class="line">|         Device|IsAligned|      TTL|</span>
<span class="line">+---------------+---------+---------+</span>
<span class="line">|root.sg.device1|    false| 36000000|</span>
<span class="line">|root.sg.device2|     true|      INF|</span>
<span class="line">+---------------+---------+---------+</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>All devices will definitely have a TTL, meaning it cannot be null. INF represents infinity.</p><h2 id="device-template" tabindex="-1"><a class="header-anchor" href="#device-template"><span>Device Template</span></a></h2><p>IoTDB supports the device template function, enabling different entities of the same type to share metadata, reduce the memory usage of metadata, and simplify the management of numerous entities and measurements.</p><h3 id="create-device-template" tabindex="-1"><a class="header-anchor" href="#create-device-template"><span>Create Device Template</span></a></h3><p>The SQL syntax for creating a metadata template is as follows:</p><div class="language-sql line-numbers-mode" data-highlighter="prismjs" data-ext="sql" data-title="sql"><pre><code><span class="line"><span class="token keyword">CREATE</span> DEVICE TEMPLATE <span class="token operator">&lt;</span>templateName<span class="token operator">&gt;</span> ALIGNED? <span class="token string">&#39;(&#39;</span> <span class="token operator">&lt;</span>measurementId<span class="token operator">&gt;</span> <span class="token operator">&lt;</span>attributeClauses<span class="token operator">&gt;</span> <span class="token punctuation">[</span><span class="token string">&#39;,&#39;</span> <span class="token operator">&lt;</span>measurementId<span class="token operator">&gt;</span> <span class="token operator">&lt;</span>attributeClauses<span class="token operator">&gt;</span><span class="token punctuation">]</span><span class="token operator">+</span> <span class="token string">&#39;)&#39;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p><strong>Example 1:</strong> Create a template containing two non-aligned timeseries</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line">IoTDB<span class="token operator">&gt;</span> create device template t1 <span class="token punctuation">(</span>temperature FLOAT <span class="token assign-left variable">encoding</span><span class="token operator">=</span>RLE, status BOOLEAN <span class="token assign-left variable">encoding</span><span class="token operator">=</span>PLAIN <span class="token assign-left variable">compression</span><span class="token operator">=</span>SNAPPY<span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p><strong>Example 2:</strong> Create a template containing a group of aligned timeseries</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line">IoTDB<span class="token operator">&gt;</span> create device template t2 aligned <span class="token punctuation">(</span>lat FLOAT <span class="token assign-left variable">encoding</span><span class="token operator">=</span>Gorilla, lon FLOAT <span class="token assign-left variable">encoding</span><span class="token operator">=</span>Gorilla<span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>The<code> lat</code> and <code>lon</code> measurements are aligned.</p><figure><img src="https://alioss.timecho.com/docs/img/模板.png" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure><figure><img src="https://alioss.timecho.com/docs/img/templateEN.jpg" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure><h3 id="set-device-template" tabindex="-1"><a class="header-anchor" href="#set-device-template"><span>Set Device Template</span></a></h3><p>After a device template is created, it should be set to specific path before creating related timeseries or insert data.</p><p><strong>It should be ensured that the related database has been set before setting template.</strong></p><p><strong>It is recommended to set device template to database path. It is not suggested to set device template to some path above database</strong></p><p><strong>It is forbidden to create timeseries under a path setting s tedeviceplate. Device template shall not be set on a prefix path of an existing timeseries.</strong></p><p>The SQL Statement for setting device template is as follow:</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line">IoTDB<span class="token operator">&gt;</span> <span class="token builtin class-name">set</span> device template t1 to root.sg1.d1</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="activate-device-template" tabindex="-1"><a class="header-anchor" href="#activate-device-template"><span>Activate Device Template</span></a></h3><p>After setting the device template, with the system enabled to auto create schema, you can insert data into the timeseries. For example, suppose there&#39;s a database root.sg1 and t1 has been set to root.sg1.d1, then timeseries like root.sg1.d1.temperature and root.sg1.d1.status are available and data points can be inserted.</p><p><strong>Attention</strong>: Before inserting data or the system not enabled to auto create schema, timeseries defined by the device template will not be created. You can use the following SQL statement to create the timeseries or activate the templdeviceate, act before inserting data:</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line">IoTDB<span class="token operator">&gt;</span> create timeseries using device template on root.sg1.d1</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p><strong>Example:</strong> Execute the following statement</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line">IoTDB<span class="token operator">&gt;</span> <span class="token builtin class-name">set</span> device template t1 to root.sg1.d1</span>
<span class="line">IoTDB<span class="token operator">&gt;</span> <span class="token builtin class-name">set</span> device template t2 to root.sg1.d2</span>
<span class="line">IoTDB<span class="token operator">&gt;</span> create timeseries using device template on root.sg1.d1</span>
<span class="line">IoTDB<span class="token operator">&gt;</span> create timeseries using device template on root.sg1.d2</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Show the time series:</p><div class="language-sql line-numbers-mode" data-highlighter="prismjs" data-ext="sql" data-title="sql"><pre><code><span class="line"><span class="token keyword">show</span> timeseries root<span class="token punctuation">.</span>sg1<span class="token punctuation">.</span><span class="token operator">*</span><span class="token operator">*</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line">+-----------------------+-----+-------------+--------+--------+-----------+----+----------+--------+-------------------+</span>
<span class="line"><span class="token operator">|</span>             timeseries<span class="token operator">|</span><span class="token builtin class-name">alias</span><span class="token operator">|</span>     database<span class="token operator">|</span>dataType<span class="token operator">|</span>encoding<span class="token operator">|</span>compression<span class="token operator">|</span>tags<span class="token operator">|</span>attributes<span class="token operator">|</span>deadband<span class="token operator">|</span>deadband parameters<span class="token operator">|</span></span>
<span class="line">+-----------------------+-----+-------------+--------+--------+-----------+----+----------+--------+-------------------+</span>
<span class="line"><span class="token operator">|</span>root.sg1.d1.temperature<span class="token operator">|</span> null<span class="token operator">|</span>     root.sg1<span class="token operator">|</span>   FLOAT<span class="token operator">|</span>     RLE<span class="token operator">|</span>     SNAPPY<span class="token operator">|</span>null<span class="token operator">|</span>      null<span class="token operator">|</span>    null<span class="token operator">|</span>               null<span class="token operator">|</span></span>
<span class="line"><span class="token operator">|</span>     root.sg1.d1.status<span class="token operator">|</span> null<span class="token operator">|</span>     root.sg1<span class="token operator">|</span> BOOLEAN<span class="token operator">|</span>   PLAIN<span class="token operator">|</span>     SNAPPY<span class="token operator">|</span>null<span class="token operator">|</span>      null<span class="token operator">|</span>    null<span class="token operator">|</span>               null<span class="token operator">|</span></span>
<span class="line"><span class="token operator">|</span>        root.sg1.d2.lon<span class="token operator">|</span> null<span class="token operator">|</span>     root.sg1<span class="token operator">|</span>   FLOAT<span class="token operator">|</span> GORILLA<span class="token operator">|</span>     SNAPPY<span class="token operator">|</span>null<span class="token operator">|</span>      null<span class="token operator">|</span>    null<span class="token operator">|</span>               null<span class="token operator">|</span></span>
<span class="line"><span class="token operator">|</span>        root.sg1.d2.lat<span class="token operator">|</span> null<span class="token operator">|</span>     root.sg1<span class="token operator">|</span>   FLOAT<span class="token operator">|</span> GORILLA<span class="token operator">|</span>     SNAPPY<span class="token operator">|</span>null<span class="token operator">|</span>      null<span class="token operator">|</span>    null<span class="token operator">|</span>               null<span class="token operator">|</span></span>
<span class="line">+-----------------------+-----+-------------+--------+--------+-----------+----+----------+--------+-------------------+</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Show the devices:</p><div class="language-sql line-numbers-mode" data-highlighter="prismjs" data-ext="sql" data-title="sql"><pre><code><span class="line"><span class="token keyword">show</span> devices root<span class="token punctuation">.</span>sg1<span class="token punctuation">.</span><span class="token operator">*</span><span class="token operator">*</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line">+---------------+---------+</span>
<span class="line"><span class="token operator">|</span>        devices<span class="token operator">|</span>isAligned<span class="token operator">|</span></span>
<span class="line">+---------------+---------+</span>
<span class="line"><span class="token operator">|</span>    root.sg1.d1<span class="token operator">|</span>    <span class="token boolean">false</span><span class="token operator">|</span></span>
<span class="line"><span class="token operator">|</span>    root.sg1.d2<span class="token operator">|</span>     <span class="token boolean">true</span><span class="token operator">|</span></span>
<span class="line">+---------------+---------+</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="show-device-template" tabindex="-1"><a class="header-anchor" href="#show-device-template"><span>Show Device Template</span></a></h3><ul><li>Show all device templates</li></ul><p>The SQL statement looks like this:</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line">IoTDB<span class="token operator">&gt;</span> show device templates</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>The execution result is as follows:</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line">+-------------+</span>
<span class="line"><span class="token operator">|</span>template name<span class="token operator">|</span></span>
<span class="line">+-------------+</span>
<span class="line"><span class="token operator">|</span>           t2<span class="token operator">|</span></span>
<span class="line"><span class="token operator">|</span>           t1<span class="token operator">|</span></span>
<span class="line">+-------------+</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>Show nodes under in device template</li></ul><p>The SQL statement looks like this:</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line">IoTDB<span class="token operator">&gt;</span> show nodes <span class="token keyword">in</span> device template t1</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>The execution result is as follows:</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line">+-----------+--------+--------+-----------+</span>
<span class="line"><span class="token operator">|</span>child nodes<span class="token operator">|</span>dataType<span class="token operator">|</span>encoding<span class="token operator">|</span>compression<span class="token operator">|</span></span>
<span class="line">+-----------+--------+--------+-----------+</span>
<span class="line"><span class="token operator">|</span>temperature<span class="token operator">|</span>   FLOAT<span class="token operator">|</span>     RLE<span class="token operator">|</span>     SNAPPY<span class="token operator">|</span></span>
<span class="line"><span class="token operator">|</span>     status<span class="token operator">|</span> BOOLEAN<span class="token operator">|</span>   PLAIN<span class="token operator">|</span>     SNAPPY<span class="token operator">|</span></span>
<span class="line">+-----------+--------+--------+-----------+</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>Show the path prefix where a device template is set</li></ul><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line">IoTDB<span class="token operator">&gt;</span> show paths <span class="token builtin class-name">set</span> device template t1</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>The execution result is as follows:</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line">+-----------+</span>
<span class="line"><span class="token operator">|</span>child paths<span class="token operator">|</span></span>
<span class="line">+-----------+</span>
<span class="line"><span class="token operator">|</span>root.sg1.d1<span class="token operator">|</span></span>
<span class="line">+-----------+</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>Show the path prefix where a device template is used (i.e. the time series has been created)</li></ul><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line">IoTDB<span class="token operator">&gt;</span> show paths using device template t1</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>The execution result is as follows:</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line">+-----------+</span>
<span class="line"><span class="token operator">|</span>child paths<span class="token operator">|</span></span>
<span class="line">+-----------+</span>
<span class="line"><span class="token operator">|</span>root.sg1.d1<span class="token operator">|</span></span>
<span class="line">+-----------+</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="deactivate-device-template" tabindex="-1"><a class="header-anchor" href="#deactivate-device-template"><span>Deactivate device Template</span></a></h3><p>To delete a group of timeseries represented by device template, namely deactivate the device template, use the following SQL statement:</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line">IoTDB<span class="token operator">&gt;</span> delete timeseries of device template t1 from root.sg1.d1</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>or</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line">IoTDB<span class="token operator">&gt;</span> deactivate device template t1 from root.sg1.d1</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>The deactivation supports batch process.</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line">IoTDB<span class="token operator">&gt;</span> delete timeseries of device template t1 from root.sg1.*, root.sg2.*</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>or</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line">IoTDB<span class="token operator">&gt;</span> deactivate device template t1 from root.sg1.*, root.sg2.*</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>If the template name is not provided in sql, all template activation on paths matched by given path pattern will be removed.</p><h3 id="unset-device-template" tabindex="-1"><a class="header-anchor" href="#unset-device-template"><span>Unset Device Template</span></a></h3><p>The SQL Statement for unsetting device template is as follow:</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line">IoTDB<span class="token operator">&gt;</span> <span class="token builtin class-name">unset</span> device template t1 from root.sg1.d1</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p><strong>Attention</strong>: It should be guaranteed that none of the timeseries represented by the target device template exists, before unset it. It can be achieved by deactivation operation.</p><h3 id="drop-device-template" tabindex="-1"><a class="header-anchor" href="#drop-device-template"><span>Drop Device Template</span></a></h3><p>The SQL Statement for dropping device template is as follow:</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line">IoTDB<span class="token operator">&gt;</span> drop device template t1</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p><strong>Attention</strong>: Dropping an already set template is not supported.</p><h3 id="alter-device-template" tabindex="-1"><a class="header-anchor" href="#alter-device-template"><span>Alter Device Template</span></a></h3><p>In a scenario where measurements need to be added, you can modify the template to add measurements to all devicesdevice using the device template.</p><p>The SQL Statement for altering device template is as follow:</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line">IoTDB<span class="token operator">&gt;</span> alter device template t1 <span class="token function">add</span> <span class="token punctuation">(</span>speed FLOAT <span class="token assign-left variable">encoding</span><span class="token operator">=</span>RLE, FLOAT TEXT <span class="token assign-left variable">encoding</span><span class="token operator">=</span>PLAIN <span class="token assign-left variable">compression</span><span class="token operator">=</span>SNAPPY<span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p><strong>When executing data insertion to devices with device template set on related prefix path and there are measurements not present in this device template, the measurements will be auto added to this device template.</strong></p><h2 id="timeseries-management" tabindex="-1"><a class="header-anchor" href="#timeseries-management"><span>Timeseries Management</span></a></h2><h3 id="create-timeseries" tabindex="-1"><a class="header-anchor" href="#create-timeseries"><span>Create Timeseries</span></a></h3><p>According to the storage model selected before, we can create corresponding timeseries in the two databases respectively. The SQL statements for creating timeseries are as follows:</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre><code><span class="line">IoTDB &gt; create timeseries root.ln.wf01.wt01.status with datatype=BOOLEAN,encoding=PLAIN</span>
<span class="line">IoTDB &gt; create timeseries root.ln.wf01.wt01.temperature with datatype=FLOAT,encoding=RLE</span>
<span class="line">IoTDB &gt; create timeseries root.ln.wf02.wt02.hardware with datatype=TEXT,encoding=PLAIN</span>
<span class="line">IoTDB &gt; create timeseries root.ln.wf02.wt02.status with datatype=BOOLEAN,encoding=PLAIN</span>
<span class="line">IoTDB &gt; create timeseries root.sgcc.wf03.wt01.status with datatype=BOOLEAN,encoding=PLAIN</span>
<span class="line">IoTDB &gt; create timeseries root.sgcc.wf03.wt01.temperature with datatype=FLOAT,encoding=RLE</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>From v0.13, you can use a simplified version of the SQL statements to create timeseries:</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre><code><span class="line">IoTDB &gt; create timeseries root.ln.wf01.wt01.status BOOLEAN encoding=PLAIN</span>
<span class="line">IoTDB &gt; create timeseries root.ln.wf01.wt01.temperature FLOAT encoding=RLE</span>
<span class="line">IoTDB &gt; create timeseries root.ln.wf02.wt02.hardware TEXT encoding=PLAIN</span>
<span class="line">IoTDB &gt; create timeseries root.ln.wf02.wt02.status BOOLEAN encoding=PLAIN</span>
<span class="line">IoTDB &gt; create timeseries root.sgcc.wf03.wt01.status BOOLEAN encoding=PLAIN</span>
<span class="line">IoTDB &gt; create timeseries root.sgcc.wf03.wt01.temperature FLOAT encoding=RLE</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Notice that when in the CREATE TIMESERIES statement the encoding method conflicts with the data type, the system gives the corresponding error prompt as shown below:</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre><code><span class="line">IoTDB &gt; create timeseries root.ln.wf02.wt02.status WITH DATATYPE=BOOLEAN, ENCODING=TS_2DIFF</span>
<span class="line">error: encoding TS_2DIFF does not support BOOLEAN</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div>`,154)),n("p",null,[e[6]||(e[6]=s("Please refer to ")),t(i,{to:"/UserGuide/latest/Basic-Concept/Encoding-and-Compression.html"},{default:l(()=>e[5]||(e[5]=[s("Encoding")])),_:1}),e[7]||(e[7]=s(" for correspondence between data type and encoding."))]),e[11]||(e[11]=a(`<h3 id="create-aligned-timeseries" tabindex="-1"><a class="header-anchor" href="#create-aligned-timeseries"><span>Create Aligned Timeseries</span></a></h3><p>The SQL statement for creating a group of timeseries are as follows:</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre><code><span class="line">IoTDB&gt; CREATE ALIGNED TIMESERIES root.ln.wf01.GPS(latitude FLOAT encoding=PLAIN compressor=SNAPPY, longitude FLOAT encoding=PLAIN compressor=SNAPPY)</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>You can set different datatype, encoding, and compression for the timeseries in a group of aligned timeseries</p><p>It is also supported to set an alias, tag, and attribute for aligned timeseries.</p><h3 id="delete-timeseries" tabindex="-1"><a class="header-anchor" href="#delete-timeseries"><span>Delete Timeseries</span></a></h3><p>To delete the timeseries we created before, we are able to use <code>(DELETE | DROP) TimeSeries &lt;PathPattern&gt;</code> statement.</p><p>The usage are as follows:</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre><code><span class="line">IoTDB&gt; delete timeseries root.ln.wf01.wt01.status</span>
<span class="line">IoTDB&gt; delete timeseries root.ln.wf01.wt01.temperature, root.ln.wf02.wt02.hardware</span>
<span class="line">IoTDB&gt; delete timeseries root.ln.wf02.*</span>
<span class="line">IoTDB&gt; drop timeseries root.ln.wf02.*</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="show-timeseries" tabindex="-1"><a class="header-anchor" href="#show-timeseries"><span>Show Timeseries</span></a></h3><ul><li><p>SHOW LATEST? TIMESERIES pathPattern? whereClause? limitClause?</p><p>There are four optional clauses added in SHOW TIMESERIES, return information of time series</p></li></ul><p>Timeseries information includes: timeseries path, alias of measurement, database it belongs to, data type, encoding type, compression type, tags and attributes.</p><p>Examples:</p><ul><li><p>SHOW TIMESERIES</p><p>presents all timeseries information in JSON form</p></li><li><p>SHOW TIMESERIES &lt;<code>PathPattern</code>&gt;</p><p>returns all timeseries information matching the given &lt;<code>PathPattern</code>&gt;. SQL statements are as follows:</p></li></ul><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre><code><span class="line">IoTDB&gt; show timeseries root.**</span>
<span class="line">IoTDB&gt; show timeseries root.ln.**</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>The results are shown below respectively:</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre><code><span class="line">+-------------------------------+--------+-------------+--------+--------+-----------+-------------------------------------------+--------------------------------------------------------+--------+-------------------+</span>
<span class="line">|                     timeseries|   alias|     database|dataType|encoding|compression|                                       tags|                                              attributes|deadband|deadband parameters|</span>
<span class="line">+-------------------------------+--------+-------------+--------+--------+-----------+-------------------------------------------+--------------------------------------------------------+--------+-------------------+</span>
<span class="line">|root.sgcc.wf03.wt01.temperature|    null|    root.sgcc|   FLOAT|     RLE|     SNAPPY|                                       null|                                                    null|    null|               null|</span>
<span class="line">|     root.sgcc.wf03.wt01.status|    null|    root.sgcc| BOOLEAN|   PLAIN|     SNAPPY|                                       null|                                                    null|    null|               null|</span>
<span class="line">|             root.turbine.d1.s1|newAlias| root.turbine|   FLOAT|     RLE|     SNAPPY|{&quot;newTag1&quot;:&quot;newV1&quot;,&quot;tag4&quot;:&quot;v4&quot;,&quot;tag3&quot;:&quot;v3&quot;}|{&quot;attr2&quot;:&quot;v2&quot;,&quot;attr1&quot;:&quot;newV1&quot;,&quot;attr4&quot;:&quot;v4&quot;,&quot;attr3&quot;:&quot;v3&quot;}|    null|               null|</span>
<span class="line">|     root.ln.wf02.wt02.hardware|    null|      root.ln|    TEXT|   PLAIN|     SNAPPY|                                       null|                                                    null|    null|               null|</span>
<span class="line">|       root.ln.wf02.wt02.status|    null|      root.ln| BOOLEAN|   PLAIN|     SNAPPY|                                       null|                                                    null|    null|               null|</span>
<span class="line">|  root.ln.wf01.wt01.temperature|    null|      root.ln|   FLOAT|     RLE|     SNAPPY|                                       null|                                                    null|    null|               null|</span>
<span class="line">|       root.ln.wf01.wt01.status|    null|      root.ln| BOOLEAN|   PLAIN|     SNAPPY|                                       null|                                                    null|    null|               null|</span>
<span class="line">+-------------------------------+--------+-------------+--------+--------+-----------+-------------------------------------------+--------------------------------------------------------+--------+-------------------+</span>
<span class="line">Total line number = 7</span>
<span class="line">It costs 0.016s</span>
<span class="line"></span>
<span class="line">+-----------------------------+-----+-------------+--------+--------+-----------+----+----------+--------+-------------------+</span>
<span class="line">|                   timeseries|alias|     database|dataType|encoding|compression|tags|attributes|deadband|deadband parameters|</span>
<span class="line">+-----------------------------+-----+-------------+--------+--------+-----------+----+----------+--------+-------------------+</span>
<span class="line">|   root.ln.wf02.wt02.hardware| null|      root.ln|    TEXT|   PLAIN|     SNAPPY|null|      null|    null|               null|</span>
<span class="line">|     root.ln.wf02.wt02.status| null|      root.ln| BOOLEAN|   PLAIN|     SNAPPY|null|      null|    null|               null|</span>
<span class="line">|root.ln.wf01.wt01.temperature| null|      root.ln|   FLOAT|     RLE|     SNAPPY|null|      null|    null|               null|</span>
<span class="line">|     root.ln.wf01.wt01.status| null|      root.ln| BOOLEAN|   PLAIN|     SNAPPY|null|      null|    null|               null|</span>
<span class="line">+-----------------------------+-----+-------------+--------+--------+-----------+----+----------+--------+-------------------+</span>
<span class="line">Total line number = 4</span>
<span class="line">It costs 0.004s</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><p>SHOW TIMESERIES LIMIT INT OFFSET INT</p><p>returns all the timeseries information start from the offset and limit the number of series returned. For example,</p></li></ul><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre><code><span class="line">show timeseries root.ln.** limit 10 offset 10</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ul><li><p>SHOW TIMESERIES WHERE TIMESERIES contains &#39;containStr&#39;</p><p>The query result set is filtered by string fuzzy matching based on the names of the timeseries. For example:</p></li></ul><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre><code><span class="line">show timeseries root.ln.** where timeseries contains &#39;wf01.wt&#39;</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>The result is shown below:</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre><code><span class="line">+-------------------------------+--------+-------------+--------+--------+-----------+-------------------------------------------+--------------------------------------------------------+--------+-------------------+</span>
<span class="line">|                     timeseries|   alias|     database|dataType|encoding|compression|                                       tags|                                              attributes|deadband|deadband parameters|</span>
<span class="line">+-------------------------------+--------+-------------+--------+--------+-----------+-------------------------------------------+--------------------------------------------------------+--------+-------------------+</span>
<span class="line">|  root.ln.wf01.wt01.temperature|    null|      root.ln|   FLOAT|     RLE|     SNAPPY|                                       null|                                                    null|    null|               null|</span>
<span class="line">|       root.ln.wf01.wt01.status|    null|      root.ln| BOOLEAN|   PLAIN|     SNAPPY|                                       null|                                                    null|    null|               null|</span>
<span class="line">+-------------------------------+--------+-------------+--------+--------+-----------+-------------------------------------------+--------------------------------------------------------+--------+-------------------+</span>
<span class="line">Total line number = 2</span>
<span class="line">It costs 0.016s</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><p>SHOW TIMESERIES WHERE DataType=type</p><p>The query result set is filtered by data type. For example:</p></li></ul><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre><code><span class="line">show timeseries root.ln.** where dataType=FLOAT</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>The result is shown below:</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre><code><span class="line">+-------------------------------+--------+-------------+--------+--------+-----------+-------------------------------------------+--------------------------------------------------------+--------+-------------------+</span>
<span class="line">|                     timeseries|   alias|     database|dataType|encoding|compression|                                       tags|                                              attributes|deadband|deadband parameters|</span>
<span class="line">+-------------------------------+--------+-------------+--------+--------+-----------+-------------------------------------------+--------------------------------------------------------+--------+-------------------+</span>
<span class="line">|root.sgcc.wf03.wt01.temperature|    null|    root.sgcc|   FLOAT|     RLE|     SNAPPY|                                       null|                                                    null|    null|               null|</span>
<span class="line">|             root.turbine.d1.s1|newAlias| root.turbine|   FLOAT|     RLE|     SNAPPY|{&quot;newTag1&quot;:&quot;newV1&quot;,&quot;tag4&quot;:&quot;v4&quot;,&quot;tag3&quot;:&quot;v3&quot;}|{&quot;attr2&quot;:&quot;v2&quot;,&quot;attr1&quot;:&quot;newV1&quot;,&quot;attr4&quot;:&quot;v4&quot;,&quot;attr3&quot;:&quot;v3&quot;}|    null|               null|</span>
<span class="line">|  root.ln.wf01.wt01.temperature|    null|      root.ln|   FLOAT|     RLE|     SNAPPY|                                       null|                                                    null|    null|               null|</span>
<span class="line">+-------------------------------+--------+-------------+--------+--------+-----------+-------------------------------------------+--------------------------------------------------------+--------+-------------------+</span>
<span class="line">Total line number = 3</span>
<span class="line">It costs 0.016s</span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><p>SHOW LATEST TIMESERIES</p><p>all the returned timeseries information should be sorted in descending order of the last timestamp of timeseries</p></li></ul><p>It is worth noting that when the queried path does not exist, the system will return no timeseries.</p><h3 id="count-timeseries" tabindex="-1"><a class="header-anchor" href="#count-timeseries"><span>Count Timeseries</span></a></h3><p>IoTDB is able to use <code>COUNT TIMESERIES &lt;Path&gt;</code> to count the number of timeseries matching the path. SQL statements are as follows:</p><ul><li><code>WHERE</code> condition could be used to fuzzy match a time series name with the following syntax: <code>COUNT TIMESERIES &lt;Path&gt; WHERE TIMESERIES contains &#39;containStr&#39;</code>.</li><li><code>WHERE</code> condition could be used to filter result by data type with the syntax: <code>COUNT TIMESERIES &lt;Path&gt; WHERE DataType=&lt;DataType&gt;&#39;</code>.</li><li><code>WHERE</code> condition could be used to filter result by tags with the syntax: <code>COUNT TIMESERIES &lt;Path&gt; WHERE TAGS(key)=&#39;value&#39;</code> or <code>COUNT TIMESERIES &lt;Path&gt; WHERE TAGS(key) contains &#39;value&#39;</code>.</li><li><code>LEVEL</code> could be defined to show count the number of timeseries of each node at the given level in current Metadata Tree. This could be used to query the number of sensors under each device. The grammar is: <code>COUNT TIMESERIES &lt;Path&gt; GROUP BY LEVEL=&lt;INTEGER&gt;</code>.</li></ul><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre><code><span class="line">IoTDB &gt; COUNT TIMESERIES root.**</span>
<span class="line">IoTDB &gt; COUNT TIMESERIES root.ln.**</span>
<span class="line">IoTDB &gt; COUNT TIMESERIES root.ln.*.*.status</span>
<span class="line">IoTDB &gt; COUNT TIMESERIES root.ln.wf01.wt01.status</span>
<span class="line">IoTDB &gt; COUNT TIMESERIES root.** WHERE TIMESERIES contains &#39;sgcc&#39; </span>
<span class="line">IoTDB &gt; COUNT TIMESERIES root.** WHERE DATATYPE = INT64</span>
<span class="line">IoTDB &gt; COUNT TIMESERIES root.** WHERE TAGS(unit) contains &#39;c&#39; </span>
<span class="line">IoTDB &gt; COUNT TIMESERIES root.** WHERE TAGS(unit) = &#39;c&#39; </span>
<span class="line">IoTDB &gt; COUNT TIMESERIES root.** WHERE TIMESERIES contains &#39;sgcc&#39; group by level = 1</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>For example, if there are several timeseries (use <code>show timeseries</code> to show all timeseries):</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre><code><span class="line">+-------------------------------+--------+-------------+--------+--------+-----------+-------------------------------------------+--------------------------------------------------------+--------+-------------------+</span>
<span class="line">|                     timeseries|   alias|     database|dataType|encoding|compression|                                       tags|                                              attributes|deadband|deadband parameters|</span>
<span class="line">+-------------------------------+--------+-------------+--------+--------+-----------+-------------------------------------------+--------------------------------------------------------+--------+-------------------+</span>
<span class="line">|root.sgcc.wf03.wt01.temperature|    null|    root.sgcc|   FLOAT|     RLE|     SNAPPY|                                       null|                                                    null|    null|               null|</span>
<span class="line">|     root.sgcc.wf03.wt01.status|    null|    root.sgcc| BOOLEAN|   PLAIN|     SNAPPY|                                       null|                                                    null|    null|               null|</span>
<span class="line">|             root.turbine.d1.s1|newAlias| root.turbine|   FLOAT|     RLE|     SNAPPY|{&quot;newTag1&quot;:&quot;newV1&quot;,&quot;tag4&quot;:&quot;v4&quot;,&quot;tag3&quot;:&quot;v3&quot;}|{&quot;attr2&quot;:&quot;v2&quot;,&quot;attr1&quot;:&quot;newV1&quot;,&quot;attr4&quot;:&quot;v4&quot;,&quot;attr3&quot;:&quot;v3&quot;}|    null|               null|</span>
<span class="line">|     root.ln.wf02.wt02.hardware|    null|      root.ln|    TEXT|   PLAIN|     SNAPPY|                               {&quot;unit&quot;:&quot;c&quot;}|                                                    null|    null|               null|</span>
<span class="line">|       root.ln.wf02.wt02.status|    null|      root.ln| BOOLEAN|   PLAIN|     SNAPPY|                    {&quot;description&quot;:&quot;test1&quot;}|                                                    null|    null|               null|</span>
<span class="line">|  root.ln.wf01.wt01.temperature|    null|      root.ln|   FLOAT|     RLE|     SNAPPY|                                       null|                                                    null|    null|               null|</span>
<span class="line">|       root.ln.wf01.wt01.status|    null|      root.ln| BOOLEAN|   PLAIN|     SNAPPY|                                       null|                                                    null|    null|               null|</span>
<span class="line">+-------------------------------+--------+-------------+--------+--------+-----------+-------------------------------------------+--------------------------------------------------------+--------+-------------------+</span>
<span class="line">Total line number = 7</span>
<span class="line">It costs 0.004s</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Then the Metadata Tree will be as below:</p><center><img style="width:100%;max-width:600px;margin-left:auto;margin-right:auto;display:block;" src="https://alioss.timecho.com/docs/img/github/69792176-1718f400-1201-11ea-861a-1a83c07ca144.jpg"></center><p>As can be seen, <code>root</code> is considered as <code>LEVEL=0</code>. So when you enter statements such as:</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre><code><span class="line">IoTDB &gt; COUNT TIMESERIES root.** GROUP BY LEVEL=1</span>
<span class="line">IoTDB &gt; COUNT TIMESERIES root.ln.** GROUP BY LEVEL=2</span>
<span class="line">IoTDB &gt; COUNT TIMESERIES root.ln.wf01.* GROUP BY LEVEL=2</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>You will get following results:</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre><code><span class="line">+------------+-----------------+</span>
<span class="line">|      column|count(timeseries)|</span>
<span class="line">+------------+-----------------+</span>
<span class="line">|   root.sgcc|                2|</span>
<span class="line">|root.turbine|                1|</span>
<span class="line">|     root.ln|                4|</span>
<span class="line">+------------+-----------------+</span>
<span class="line">Total line number = 3</span>
<span class="line">It costs 0.002s</span>
<span class="line"></span>
<span class="line">+------------+-----------------+</span>
<span class="line">|      column|count(timeseries)|</span>
<span class="line">+------------+-----------------+</span>
<span class="line">|root.ln.wf02|                2|</span>
<span class="line">|root.ln.wf01|                2|</span>
<span class="line">+------------+-----------------+</span>
<span class="line">Total line number = 2</span>
<span class="line">It costs 0.002s</span>
<span class="line"></span>
<span class="line">+------------+-----------------+</span>
<span class="line">|      column|count(timeseries)|</span>
<span class="line">+------------+-----------------+</span>
<span class="line">|root.ln.wf01|                2|</span>
<span class="line">+------------+-----------------+</span>
<span class="line">Total line number = 1</span>
<span class="line">It costs 0.002s</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>Note: The path of timeseries is just a filter condition, which has no relationship with the definition of level.</p></blockquote><h3 id="active-timeseries-query" tabindex="-1"><a class="header-anchor" href="#active-timeseries-query"><span>Active Timeseries Query</span></a></h3><p>By adding WHERE time filter conditions to the existing SHOW/COUNT TIMESERIES, we can obtain time series with data within the specified time range.</p><p>It is important to note that in metadata queries with time filters, views are not considered; only the time series actually stored in the TsFile are taken into account.</p><p>An example usage is as follows:</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre><code><span class="line">IoTDB&gt; insert into root.sg.data(timestamp, s1,s2) values(15000, 1, 2);</span>
<span class="line">IoTDB&gt; insert into root.sg.data2(timestamp, s1,s2) values(15002, 1, 2);</span>
<span class="line">IoTDB&gt; insert into root.sg.data3(timestamp, s1,s2) values(16000, 1, 2);</span>
<span class="line">IoTDB&gt; show timeseries;</span>
<span class="line">+----------------+-----+--------+--------+--------+-----------+----+----------+--------+------------------+--------+</span>
<span class="line">|      Timeseries|Alias|Database|DataType|Encoding|Compression|Tags|Attributes|Deadband|DeadbandParameters|ViewType|</span>
<span class="line">+----------------+-----+--------+--------+--------+-----------+----+----------+--------+------------------+--------+</span>
<span class="line">| root.sg.data.s1| null| root.sg|   FLOAT| GORILLA|        LZ4|null|      null|    null|              null|    BASE|</span>
<span class="line">| root.sg.data.s2| null| root.sg|   FLOAT| GORILLA|        LZ4|null|      null|    null|              null|    BASE|</span>
<span class="line">|root.sg.data3.s1| null| root.sg|   FLOAT| GORILLA|        LZ4|null|      null|    null|              null|    BASE|</span>
<span class="line">|root.sg.data3.s2| null| root.sg|   FLOAT| GORILLA|        LZ4|null|      null|    null|              null|    BASE|</span>
<span class="line">|root.sg.data2.s1| null| root.sg|   FLOAT| GORILLA|        LZ4|null|      null|    null|              null|    BASE|</span>
<span class="line">|root.sg.data2.s2| null| root.sg|   FLOAT| GORILLA|        LZ4|null|      null|    null|              null|    BASE|</span>
<span class="line">+----------------+-----+--------+--------+--------+-----------+----+----------+--------+------------------+--------+</span>
<span class="line"></span>
<span class="line">IoTDB&gt; show timeseries where time &gt;= 15000 and time &lt; 16000;</span>
<span class="line">+----------------+-----+--------+--------+--------+-----------+----+----------+--------+------------------+--------+</span>
<span class="line">|      Timeseries|Alias|Database|DataType|Encoding|Compression|Tags|Attributes|Deadband|DeadbandParameters|ViewType|</span>
<span class="line">+----------------+-----+--------+--------+--------+-----------+----+----------+--------+------------------+--------+</span>
<span class="line">| root.sg.data.s1| null| root.sg|   FLOAT| GORILLA|        LZ4|null|      null|    null|              null|    BASE|</span>
<span class="line">| root.sg.data.s2| null| root.sg|   FLOAT| GORILLA|        LZ4|null|      null|    null|              null|    BASE|</span>
<span class="line">|root.sg.data2.s1| null| root.sg|   FLOAT| GORILLA|        LZ4|null|      null|    null|              null|    BASE|</span>
<span class="line">|root.sg.data2.s2| null| root.sg|   FLOAT| GORILLA|        LZ4|null|      null|    null|              null|    BASE|</span>
<span class="line">+----------------+-----+--------+--------+--------+-----------+----+----------+--------+------------------+--------+</span>
<span class="line"></span>
<span class="line">IoTDB&gt; count timeseries where time &gt;= 15000 and time &lt; 16000;</span>
<span class="line">+-----------------+</span>
<span class="line">|count(timeseries)|</span>
<span class="line">+-----------------+</span>
<span class="line">|                4|</span>
<span class="line">+-----------------+</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Regarding the definition of active time series, data that can be queried normally is considered active, meaning time series that have been inserted but deleted are not included.</p><h3 id="tag-and-attribute-management" tabindex="-1"><a class="header-anchor" href="#tag-and-attribute-management"><span>Tag and Attribute Management</span></a></h3><p>We can also add an alias, extra tag and attribute information while creating one timeseries.</p><p>The differences between tag and attribute are:</p><ul><li>Tag could be used to query the path of timeseries, we will maintain an inverted index in memory on the tag: Tag -&gt; Timeseries</li><li>Attribute could only be queried by timeseries path : Timeseries -&gt; Attribute</li></ul><p>The SQL statements for creating timeseries with extra tag and attribute information are extended as follows:</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre><code><span class="line">create timeseries root.turbine.d1.s1(temprature) with datatype=FLOAT, encoding=RLE, compression=SNAPPY tags(tag1=v1, tag2=v2) attributes(attr1=v1, attr2=v2)</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>The <code>temprature</code> in the brackets is an alias for the sensor <code>s1</code>. So we can use <code>temprature</code> to replace <code>s1</code> anywhere.</p><blockquote><p>IoTDB also supports using AS function to set alias. The difference between the two is: the alias set by the AS function is used to replace the whole time series name, temporary and not bound with the time series; while the alias mentioned above is only used as the alias of the sensor, which is bound with it and can be used equivalent to the original sensor name.</p></blockquote><blockquote><p>Notice that the size of the extra tag and attribute information shouldn&#39;t exceed the <code>tag_attribute_total_size</code>.</p></blockquote><p>We can update the tag information after creating it as following:</p><ul><li>Rename the tag/attribute key</li></ul><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre><code><span class="line">ALTER timeseries root.turbine.d1.s1 RENAME tag1 TO newTag1</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ul><li>Reset the tag/attribute value</li></ul><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre><code><span class="line">ALTER timeseries root.turbine.d1.s1 SET newTag1=newV1, attr1=newV1</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ul><li>Delete the existing tag/attribute</li></ul><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre><code><span class="line">ALTER timeseries root.turbine.d1.s1 DROP tag1, tag2</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ul><li>Add new tags</li></ul><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre><code><span class="line">ALTER timeseries root.turbine.d1.s1 ADD TAGS tag3=v3, tag4=v4</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ul><li>Add new attributes</li></ul><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre><code><span class="line">ALTER timeseries root.turbine.d1.s1 ADD ATTRIBUTES attr3=v3, attr4=v4</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ul><li>Upsert alias, tags and attributes</li></ul><blockquote><p>add alias or a new key-value if the alias or key doesn&#39;t exist, otherwise, update the old one with new value.</p></blockquote><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre><code><span class="line">ALTER timeseries root.turbine.d1.s1 UPSERT ALIAS=newAlias TAGS(tag3=v3, tag4=v4) ATTRIBUTES(attr3=v3, attr4=v4)</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ul><li>Show timeseries using tags. Use TAGS(tagKey) to identify the tags used as filter key</li></ul><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre><code><span class="line">SHOW TIMESERIES (&lt;\`PathPattern\`&gt;)? timeseriesWhereClause</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>returns all the timeseries information that satisfy the where condition and match the pathPattern. SQL statements are as follows:</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre><code><span class="line">ALTER timeseries root.ln.wf02.wt02.hardware ADD TAGS unit=c</span>
<span class="line">ALTER timeseries root.ln.wf02.wt02.status ADD TAGS description=test1</span>
<span class="line">show timeseries root.ln.** where TAGS(unit)=&#39;c&#39;</span>
<span class="line">show timeseries root.ln.** where TAGS(description) contains &#39;test1&#39;</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>The results are shown below respectly:</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre><code><span class="line">+--------------------------+-----+-------------+--------+--------+-----------+------------+----------+--------+-------------------+</span>
<span class="line">|                timeseries|alias|     database|dataType|encoding|compression|        tags|attributes|deadband|deadband parameters|</span>
<span class="line">+--------------------------+-----+-------------+--------+--------+-----------+------------+----------+--------+-------------------+</span>
<span class="line">|root.ln.wf02.wt02.hardware| null|      root.ln|    TEXT|   PLAIN|     SNAPPY|{&quot;unit&quot;:&quot;c&quot;}|      null|    null|               null|</span>
<span class="line">+--------------------------+-----+-------------+--------+--------+-----------+------------+----------+--------+-------------------+</span>
<span class="line">Total line number = 1</span>
<span class="line">It costs 0.005s</span>
<span class="line"></span>
<span class="line">+------------------------+-----+-------------+--------+--------+-----------+-----------------------+----------+--------+-------------------+</span>
<span class="line">|              timeseries|alias|     database|dataType|encoding|compression|                   tags|attributes|deadband|deadband parameters|</span>
<span class="line">+------------------------+-----+-------------+--------+--------+-----------+-----------------------+----------+--------+-------------------+</span>
<span class="line">|root.ln.wf02.wt02.status| null|      root.ln| BOOLEAN|   PLAIN|     SNAPPY|{&quot;description&quot;:&quot;test1&quot;}|      null|    null|               null|</span>
<span class="line">+------------------------+-----+-------------+--------+--------+-----------+-----------------------+----------+--------+-------------------+</span>
<span class="line">Total line number = 1</span>
<span class="line">It costs 0.004s</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>count timeseries using tags</li></ul><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre><code><span class="line">COUNT TIMESERIES (&lt;\`PathPattern\`&gt;)? timeseriesWhereClause</span>
<span class="line">COUNT TIMESERIES (&lt;\`PathPattern\`&gt;)? timeseriesWhereClause GROUP BY LEVEL=&lt;INTEGER&gt;</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>returns all the number of timeseries that satisfy the where condition and match the pathPattern. SQL statements are as follows:</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre><code><span class="line">count timeseries</span>
<span class="line">count timeseries root.** where TAGS(unit)=&#39;c&#39;</span>
<span class="line">count timeseries root.** where TAGS(unit)=&#39;c&#39; group by level = 2</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>The results are shown below respectly :</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre><code><span class="line">IoTDB&gt; count timeseries</span>
<span class="line">+-----------------+</span>
<span class="line">|count(timeseries)|</span>
<span class="line">+-----------------+</span>
<span class="line">|                6|</span>
<span class="line">+-----------------+</span>
<span class="line">Total line number = 1</span>
<span class="line">It costs 0.019s</span>
<span class="line">IoTDB&gt; count timeseries root.** where TAGS(unit)=&#39;c&#39;</span>
<span class="line">+-----------------+</span>
<span class="line">|count(timeseries)|</span>
<span class="line">+-----------------+</span>
<span class="line">|                2|</span>
<span class="line">+-----------------+</span>
<span class="line">Total line number = 1</span>
<span class="line">It costs 0.020s</span>
<span class="line">IoTDB&gt; count timeseries root.** where TAGS(unit)=&#39;c&#39; group by level = 2</span>
<span class="line">+--------------+-----------------+</span>
<span class="line">|        column|count(timeseries)|</span>
<span class="line">+--------------+-----------------+</span>
<span class="line">|  root.ln.wf02|                2|</span>
<span class="line">|  root.ln.wf01|                0|</span>
<span class="line">|root.sgcc.wf03|                0|</span>
<span class="line">+--------------+-----------------+</span>
<span class="line">Total line number = 3</span>
<span class="line">It costs 0.011s</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>Notice that, we only support one condition in the where clause. Either it&#39;s an equal filter or it is an <code>contains</code> filter. In both case, the property in the where condition must be a tag.</p></blockquote><p>create aligned timeseries</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre><code><span class="line">create aligned timeseries root.sg1.d1(s1 INT32 tags(tag1=v1, tag2=v2) attributes(attr1=v1, attr2=v2), s2 DOUBLE tags(tag3=v3, tag4=v4) attributes(attr3=v3, attr4=v4))</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>The execution result is as follows:</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre><code><span class="line">IoTDB&gt; show timeseries</span>
<span class="line">+--------------+-----+-------------+--------+--------+-----------+-------------------------+---------------------------+--------+-------------------+</span>
<span class="line">|    timeseries|alias|     database|dataType|encoding|compression|                     tags|                 attributes|deadband|deadband parameters|</span>
<span class="line">+--------------+-----+-------------+--------+--------+-----------+-------------------------+---------------------------+--------+-------------------+</span>
<span class="line">|root.sg1.d1.s1| null|     root.sg1|   INT32|     RLE|     SNAPPY|{&quot;tag1&quot;:&quot;v1&quot;,&quot;tag2&quot;:&quot;v2&quot;}|{&quot;attr2&quot;:&quot;v2&quot;,&quot;attr1&quot;:&quot;v1&quot;}|    null|               null|</span>
<span class="line">|root.sg1.d1.s2| null|     root.sg1|  DOUBLE| GORILLA|     SNAPPY|{&quot;tag4&quot;:&quot;v4&quot;,&quot;tag3&quot;:&quot;v3&quot;}|{&quot;attr4&quot;:&quot;v4&quot;,&quot;attr3&quot;:&quot;v3&quot;}|    null|               null|</span>
<span class="line">+--------------+-----+-------------+--------+--------+-----------+-------------------------+---------------------------+--------+-------------------+</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Support query：</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre><code><span class="line">IoTDB&gt; show timeseries where TAGS(tag1)=&#39;v1&#39;</span>
<span class="line">+--------------+-----+-------------+--------+--------+-----------+-------------------------+---------------------------+--------+-------------------+</span>
<span class="line">|    timeseries|alias|     database|dataType|encoding|compression|                     tags|                 attributes|deadband|deadband parameters|</span>
<span class="line">+--------------+-----+-------------+--------+--------+-----------+-------------------------+---------------------------+--------+-------------------+</span>
<span class="line">|root.sg1.d1.s1| null|     root.sg1|   INT32|     RLE|     SNAPPY|{&quot;tag1&quot;:&quot;v1&quot;,&quot;tag2&quot;:&quot;v2&quot;}|{&quot;attr2&quot;:&quot;v2&quot;,&quot;attr1&quot;:&quot;v1&quot;}|    null|               null|</span>
<span class="line">+--------------+-----+-------------+--------+--------+-----------+-------------------------+---------------------------+--------+-------------------+</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>The above operations are supported for timeseries tag, attribute updates, etc.</p><h2 id="node-management" tabindex="-1"><a class="header-anchor" href="#node-management"><span>Node Management</span></a></h2><h3 id="show-child-paths" tabindex="-1"><a class="header-anchor" href="#show-child-paths"><span>Show Child Paths</span></a></h3><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre><code><span class="line">SHOW CHILD PATHS pathPattern</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>Return all child paths and their node types of all the paths matching pathPattern.</p><p>node types: ROOT -&gt; DB INTERNAL -&gt; DATABASE -&gt; INTERNAL -&gt; DEVICE -&gt; TIMESERIES</p><p>Example：</p><ul><li>return the child paths of root.ln：show child paths root.ln</li></ul><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre><code><span class="line">+------------+----------+</span>
<span class="line">| child paths|node types|</span>
<span class="line">+------------+----------+</span>
<span class="line">|root.ln.wf01|  INTERNAL|</span>
<span class="line">|root.ln.wf02|  INTERNAL|</span>
<span class="line">+------------+----------+</span>
<span class="line">Total line number = 2</span>
<span class="line">It costs 0.002s</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>get all paths in form of root.xx.xx.xx：show child paths root.xx.xx</p></blockquote><h3 id="show-child-nodes" tabindex="-1"><a class="header-anchor" href="#show-child-nodes"><span>Show Child Nodes</span></a></h3><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre><code><span class="line">SHOW CHILD NODES pathPattern</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>Return all child nodes of the pathPattern.</p><p>Example：</p><ul><li>return the child nodes of root：show child nodes root</li></ul><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre><code><span class="line">+------------+</span>
<span class="line">| child nodes|</span>
<span class="line">+------------+</span>
<span class="line">|          ln|</span>
<span class="line">+------------+</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>return the child nodes of root.ln：show child nodes root.ln</li></ul><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre><code><span class="line">+------------+</span>
<span class="line">| child nodes|</span>
<span class="line">+------------+</span>
<span class="line">|        wf01|</span>
<span class="line">|        wf02|</span>
<span class="line">+------------+</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="count-nodes" tabindex="-1"><a class="header-anchor" href="#count-nodes"><span>Count Nodes</span></a></h3><p>IoTDB is able to use <code>COUNT NODES &lt;PathPattern&gt; LEVEL=&lt;INTEGER&gt;</code> to count the number of nodes at<br> the given level in current Metadata Tree considering a given pattern. IoTDB will find paths that<br> match the pattern and counts distinct nodes at the specified level among the matched paths.<br> This could be used to query the number of devices with specified measurements. The usage are as<br> follows:</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre><code><span class="line">IoTDB &gt; COUNT NODES root.** LEVEL=2</span>
<span class="line">IoTDB &gt; COUNT NODES root.ln.** LEVEL=2</span>
<span class="line">IoTDB &gt; COUNT NODES root.ln.wf01.** LEVEL=3</span>
<span class="line">IoTDB &gt; COUNT NODES root.**.temperature LEVEL=3</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>As for the above mentioned example and Metadata tree, you can get following results:</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre><code><span class="line">+------------+</span>
<span class="line">|count(nodes)|</span>
<span class="line">+------------+</span>
<span class="line">|           4|</span>
<span class="line">+------------+</span>
<span class="line">Total line number = 1</span>
<span class="line">It costs 0.003s</span>
<span class="line"></span>
<span class="line">+------------+</span>
<span class="line">|count(nodes)|</span>
<span class="line">+------------+</span>
<span class="line">|           2|</span>
<span class="line">+------------+</span>
<span class="line">Total line number = 1</span>
<span class="line">It costs 0.002s</span>
<span class="line"></span>
<span class="line">+------------+</span>
<span class="line">|count(nodes)|</span>
<span class="line">+------------+</span>
<span class="line">|           1|</span>
<span class="line">+------------+</span>
<span class="line">Total line number = 1</span>
<span class="line">It costs 0.002s</span>
<span class="line"></span>
<span class="line">+------------+</span>
<span class="line">|count(nodes)|</span>
<span class="line">+------------+</span>
<span class="line">|           2|</span>
<span class="line">+------------+</span>
<span class="line">Total line number = 1</span>
<span class="line">It costs 0.002s</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>Note: The path of timeseries is just a filter condition, which has no relationship with the definition of level.</p></blockquote><h3 id="show-devices" tabindex="-1"><a class="header-anchor" href="#show-devices"><span>Show Devices</span></a></h3><ul><li>SHOW DEVICES pathPattern? (WITH DATABASE)? devicesWhereClause? limitClause?</li></ul><p>Similar to <code>Show Timeseries</code>, IoTDB also supports two ways of viewing devices:</p><ul><li><code>SHOW DEVICES</code> statement presents all devices&#39; information, which is equal to <code>SHOW DEVICES root.**</code>.</li><li><code>SHOW DEVICES &lt;PathPattern&gt;</code> statement specifies the <code>PathPattern</code> and returns the devices information matching the pathPattern and under the given level.</li><li><code>WHERE</code> condition supports <code>DEVICE contains &#39;xxx&#39;</code> to do a fuzzy query based on the device name.</li></ul><p>SQL statement is as follows:</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre><code><span class="line">IoTDB&gt; show devices</span>
<span class="line">IoTDB&gt; show devices root.ln.**</span>
<span class="line">IoTDB&gt; show devices root.ln.** where device contains &#39;t&#39;</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>You can get results below:</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre><code><span class="line">+-------------------+---------+</span>
<span class="line">|            devices|isAligned|</span>
<span class="line">+-------------------+---------+</span>
<span class="line">|  root.ln.wf01.wt01|    false|</span>
<span class="line">|  root.ln.wf02.wt02|    false|</span>
<span class="line">|root.sgcc.wf03.wt01|    false|</span>
<span class="line">|    root.turbine.d1|    false|</span>
<span class="line">+-------------------+---------+</span>
<span class="line">Total line number = 4</span>
<span class="line">It costs 0.002s</span>
<span class="line"></span>
<span class="line">+-----------------+---------+</span>
<span class="line">|          devices|isAligned|</span>
<span class="line">+-----------------+---------+</span>
<span class="line">|root.ln.wf01.wt01|    false|</span>
<span class="line">|root.ln.wf02.wt02|    false|</span>
<span class="line">+-----------------+---------+</span>
<span class="line">Total line number = 2</span>
<span class="line">It costs 0.001s</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><code>isAligned</code> indicates whether the timeseries under the device are aligned.</p><p>To view devices&#39; information with database, we can use <code>SHOW DEVICES WITH DATABASE</code> statement.</p><ul><li><code>SHOW DEVICES WITH DATABASE</code> statement presents all devices&#39; information with their database.</li><li><code>SHOW DEVICES &lt;PathPattern&gt; WITH DATABASE</code> statement specifies the <code>PathPattern</code> and returns the<br> devices&#39; information under the given level with their database information.</li></ul><p>SQL statement is as follows:</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre><code><span class="line">IoTDB&gt; show devices with database</span>
<span class="line">IoTDB&gt; show devices root.ln.** with database</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>You can get results below:</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre><code><span class="line">+-------------------+-------------+---------+</span>
<span class="line">|            devices|     database|isAligned|</span>
<span class="line">+-------------------+-------------+---------+</span>
<span class="line">|  root.ln.wf01.wt01|      root.ln|    false|</span>
<span class="line">|  root.ln.wf02.wt02|      root.ln|    false|</span>
<span class="line">|root.sgcc.wf03.wt01|    root.sgcc|    false|</span>
<span class="line">|    root.turbine.d1| root.turbine|    false|</span>
<span class="line">+-------------------+-------------+---------+</span>
<span class="line">Total line number = 4</span>
<span class="line">It costs 0.003s</span>
<span class="line"></span>
<span class="line">+-----------------+-------------+---------+</span>
<span class="line">|          devices|     database|isAligned|</span>
<span class="line">+-----------------+-------------+---------+</span>
<span class="line">|root.ln.wf01.wt01|      root.ln|    false|</span>
<span class="line">|root.ln.wf02.wt02|      root.ln|    false|</span>
<span class="line">+-----------------+-------------+---------+</span>
<span class="line">Total line number = 2</span>
<span class="line">It costs 0.001s</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="count-devices" tabindex="-1"><a class="header-anchor" href="#count-devices"><span>Count Devices</span></a></h3>`,130)),n("ul",null,[n("li",null,[e[8]||(e[8]=s("COUNT DEVICES /")),t(d)])]),e[12]||(e[12]=a(`<p>The above statement is used to count the number of devices. At the same time, it is allowed to specify <code>PathPattern</code> to count the number of devices matching the <code>PathPattern</code>.</p><p>SQL statement is as follows:</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre><code><span class="line">IoTDB&gt; show devices</span>
<span class="line">IoTDB&gt; count devices</span>
<span class="line">IoTDB&gt; count devices root.ln.**</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>You can get results below:</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre><code><span class="line">+-------------------+---------+</span>
<span class="line">|            devices|isAligned|</span>
<span class="line">+-------------------+---------+</span>
<span class="line">|root.sgcc.wf03.wt03|    false|</span>
<span class="line">|    root.turbine.d1|    false|</span>
<span class="line">|  root.ln.wf02.wt02|    false|</span>
<span class="line">|  root.ln.wf01.wt01|    false|</span>
<span class="line">+-------------------+---------+</span>
<span class="line">Total line number = 4</span>
<span class="line">It costs 0.024s</span>
<span class="line"></span>
<span class="line">+--------------+</span>
<span class="line">|count(devices)|</span>
<span class="line">+--------------+</span>
<span class="line">|             4|</span>
<span class="line">+--------------+</span>
<span class="line">Total line number = 1</span>
<span class="line">It costs 0.004s</span>
<span class="line"></span>
<span class="line">+--------------+</span>
<span class="line">|count(devices)|</span>
<span class="line">+--------------+</span>
<span class="line">|             2|</span>
<span class="line">+--------------+</span>
<span class="line">Total line number = 1</span>
<span class="line">It costs 0.004s</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="active-device-query" tabindex="-1"><a class="header-anchor" href="#active-device-query"><span>Active Device Query</span></a></h3><p>Similar to active timeseries query, we can add time filter conditions to device viewing and statistics to query active devices that have data within a certain time range. The definition of active here is the same as for active time series. An example usage is as follows:</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre><code><span class="line">IoTDB&gt; insert into root.sg.data(timestamp, s1,s2) values(15000, 1, 2);</span>
<span class="line">IoTDB&gt; insert into root.sg.data2(timestamp, s1,s2) values(15002, 1, 2);</span>
<span class="line">IoTDB&gt; insert into root.sg.data3(timestamp, s1,s2) values(16000, 1, 2);</span>
<span class="line">IoTDB&gt; show devices;</span>
<span class="line">+-------------------+---------+</span>
<span class="line">|            devices|isAligned|</span>
<span class="line">+-------------------+---------+</span>
<span class="line">|       root.sg.data|    false|</span>
<span class="line">|      root.sg.data2|    false|</span>
<span class="line">|      root.sg.data3|    false|</span>
<span class="line">+-------------------+---------+</span>
<span class="line"></span>
<span class="line">IoTDB&gt; show devices where time &gt;= 15000 and time &lt; 16000;</span>
<span class="line">+-------------------+---------+</span>
<span class="line">|            devices|isAligned|</span>
<span class="line">+-------------------+---------+</span>
<span class="line">|       root.sg.data|    false|</span>
<span class="line">|      root.sg.data2|    false|</span>
<span class="line">+-------------------+---------+</span>
<span class="line"></span>
<span class="line">IoTDB&gt; count devices where time &gt;= 15000 and time &lt; 16000;</span>
<span class="line">+--------------+</span>
<span class="line">|count(devices)|</span>
<span class="line">+--------------+</span>
<span class="line">|             2|</span>
<span class="line">+--------------+</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,8))])}const b=o(u,[["render",m],["__file","Operate-Metadata_timecho.html.vue"]]),g=JSON.parse('{"path":"/UserGuide/latest/User-Manual/Operate-Metadata_timecho.html","title":"Operate Metadata","lang":"en-US","frontmatter":{"description":"Operate Metadata Database Management Create Database According to the storage model we can set up the corresponding database. Two SQL statements are supported for creating datab...","head":[["link",{"rel":"alternate","hreflang":"zh-cn","href":"https://iotdb.apache.org/zh/UserGuide/latest/User-Manual/Operate-Metadata_timecho.html"}],["meta",{"property":"og:url","content":"https://iotdb.apache.org/UserGuide/latest/User-Manual/Operate-Metadata_timecho.html"}],["meta",{"property":"og:site_name","content":"IoTDB Website"}],["meta",{"property":"og:title","content":"Operate Metadata"}],["meta",{"property":"og:description","content":"Operate Metadata Database Management Create Database According to the storage model we can set up the corresponding database. Two SQL statements are supported for creating datab..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:image","content":"https://alioss.timecho.com/docs/img/%E6%A8%A1%E6%9D%BF.png"}],["meta",{"property":"og:locale","content":"en-US"}],["meta",{"property":"og:locale:alternate","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2024-11-13T03:49:52.000Z"}],["meta",{"property":"article:modified_time","content":"2024-11-13T03:49:52.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"Operate Metadata\\",\\"image\\":[\\"https://alioss.timecho.com/docs/img/%E6%A8%A1%E6%9D%BF.png\\",\\"https://alioss.timecho.com/docs/img/templateEN.jpg\\"],\\"dateModified\\":\\"2024-11-13T03:49:52.000Z\\",\\"author\\":[]}"]]},"headers":[{"level":2,"title":"Database Management","slug":"database-management","link":"#database-management","children":[{"level":3,"title":"Create Database","slug":"create-database","link":"#create-database","children":[]},{"level":3,"title":"Show Databases","slug":"show-databases","link":"#show-databases","children":[]},{"level":3,"title":"Delete Database","slug":"delete-database","link":"#delete-database","children":[]},{"level":3,"title":"Count Databases","slug":"count-databases","link":"#count-databases","children":[]},{"level":3,"title":"Setting up heterogeneous databases (Advanced operations)","slug":"setting-up-heterogeneous-databases-advanced-operations","link":"#setting-up-heterogeneous-databases-advanced-operations","children":[]},{"level":3,"title":"TTL","slug":"ttl","link":"#ttl","children":[]}]},{"level":2,"title":"Device Template","slug":"device-template","link":"#device-template","children":[{"level":3,"title":"Create Device Template","slug":"create-device-template","link":"#create-device-template","children":[]},{"level":3,"title":"Set Device Template","slug":"set-device-template","link":"#set-device-template","children":[]},{"level":3,"title":"Activate Device Template","slug":"activate-device-template","link":"#activate-device-template","children":[]},{"level":3,"title":"Show Device Template","slug":"show-device-template","link":"#show-device-template","children":[]},{"level":3,"title":"Deactivate device Template","slug":"deactivate-device-template","link":"#deactivate-device-template","children":[]},{"level":3,"title":"Unset Device Template","slug":"unset-device-template","link":"#unset-device-template","children":[]},{"level":3,"title":"Drop Device Template","slug":"drop-device-template","link":"#drop-device-template","children":[]},{"level":3,"title":"Alter Device Template","slug":"alter-device-template","link":"#alter-device-template","children":[]}]},{"level":2,"title":"Timeseries Management","slug":"timeseries-management","link":"#timeseries-management","children":[{"level":3,"title":"Create Timeseries","slug":"create-timeseries","link":"#create-timeseries","children":[]},{"level":3,"title":"Create Aligned Timeseries","slug":"create-aligned-timeseries","link":"#create-aligned-timeseries","children":[]},{"level":3,"title":"Delete Timeseries","slug":"delete-timeseries","link":"#delete-timeseries","children":[]},{"level":3,"title":"Show Timeseries","slug":"show-timeseries","link":"#show-timeseries","children":[]},{"level":3,"title":"Count Timeseries","slug":"count-timeseries","link":"#count-timeseries","children":[]},{"level":3,"title":"Active Timeseries Query","slug":"active-timeseries-query","link":"#active-timeseries-query","children":[]},{"level":3,"title":"Tag and Attribute Management","slug":"tag-and-attribute-management","link":"#tag-and-attribute-management","children":[]}]},{"level":2,"title":"Node Management","slug":"node-management","link":"#node-management","children":[{"level":3,"title":"Show Child Paths","slug":"show-child-paths","link":"#show-child-paths","children":[]},{"level":3,"title":"Show Child Nodes","slug":"show-child-nodes","link":"#show-child-nodes","children":[]},{"level":3,"title":"Count Nodes","slug":"count-nodes","link":"#count-nodes","children":[]},{"level":3,"title":"Show Devices","slug":"show-devices","link":"#show-devices","children":[]},{"level":3,"title":"Count Devices","slug":"count-devices","link":"#count-devices","children":[]},{"level":3,"title":"Active Device Query","slug":"active-device-query","link":"#active-device-query","children":[]}]}],"git":{"createdTime":1688958677000,"updatedTime":1731469792000,"contributors":[{"name":"W1y1r","email":"150988475+W1y1r@users.noreply.github.com","commits":3},{"name":"Caideyipi","email":"87789683+Caideyipi@users.noreply.github.com","commits":1},{"name":"YangCaiyin","email":"ycycse@gmail.com","commits":1},{"name":"shuwenwei","email":"55970239+shuwenwei@users.noreply.github.com","commits":1}]},"readingTime":{"minutes":18.87,"words":5661},"filePathRelative":"UserGuide/latest/User-Manual/Operate-Metadata_timecho.md","localizedDate":"July 10, 2023","autoDesc":true}');export{b as comp,g as data};
