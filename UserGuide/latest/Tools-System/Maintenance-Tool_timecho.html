<!doctype html>
<html lang="en-US" data-theme="light">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-rc.14" />
    <meta name="theme" content="VuePress Theme Hope 2.0.0-rc.52" />
    <style>
      html {
        background: var(--bg-color, #fff);
      }

      html[data-theme="dark"] {
        background: var(--bg-color, #1d1e1f);
      }

      body {
        background: var(--bg-color);
      }
    </style>
    <script>
      const userMode = localStorage.getItem("vuepress-theme-hope-scheme");
      const systemDarkMode =
        window.matchMedia &&
        window.matchMedia("(prefers-color-scheme: dark)").matches;

      if (userMode === "dark" || (userMode !== "light" && systemDarkMode)) {
        document.documentElement.setAttribute("data-theme", "dark");
      }
    </script>
    <link rel="alternate" hreflang="zh-cn" href="https://iotdb.apache.org/zh/UserGuide/latest/Tools-System/Maintenance-Tool_timecho.html"><meta property="og:url" content="https://iotdb.apache.org/UserGuide/latest/Tools-System/Maintenance-Tool_timecho.html"><meta property="og:site_name" content="IoTDB Website"><meta property="og:title" content="Maintenance Tool"><meta property="og:description" content="Maintenance Tool IoTDB-OpsKit The IoTDB OpsKit is an easy-to-use operation and maintenance tool (enterprise version tool). It is designed to solve the operation and maintenance ..."><meta property="og:type" content="article"><meta property="og:locale" content="en-US"><meta property="og:locale:alternate" content="zh-CN"><meta property="og:updated_time" content="2024-11-11T11:01:16.000Z"><meta property="article:modified_time" content="2024-11-11T11:01:16.000Z"><script type="application/ld+json">{"@context":"https://schema.org","@type":"Article","headline":"Maintenance Tool","image":[""],"dateModified":"2024-11-11T11:01:16.000Z","author":[]}</script><link rel="icon" href="/favicon.ico"><meta name="Description" content="Apache IoTDB: Time Series Database for IoT"><meta name="Keywords" content="TSDB, time series, time series database, IoTDB, IoT database, IoT data management,时序数据库, 时间序列管理, IoTDB, 物联网数据库, 实时数据库, 物联网数据管理, 物联网数据"><meta name="baidu-site-verification" content="wfKETzB3OT"><meta name="google-site-verification" content="mZWAoRY0yj_HAr-s47zHCGHzx5Ju-RVm5wDbPnwQYFo"><script type="text/javascript">
var _paq = window._paq = window._paq || [];
/* tracker methods like "setCustomDimension" should be called before "trackPageView" */
_paq.push(["setDoNotTrack", true]);
_paq.push(["disableCookies"]);
_paq.push(['trackPageView']);
_paq.push(['enableLinkTracking']);
(function() {
  var u="https://analytics.apache.org/";
  _paq.push(['setTrackerUrl', u+'matomo.php']);
  _paq.push(['setSiteId', '56']);
  var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0];
  g.async=true; g.src=u+'matomo.js'; s.parentNode.insertBefore(g,s);
})();
       </script><title>Maintenance Tool | IoTDB Website</title><meta name="description" content="Maintenance Tool IoTDB-OpsKit The IoTDB OpsKit is an easy-to-use operation and maintenance tool (enterprise version tool). It is designed to solve the operation and maintenance ...">
    <link rel="preload" href="/assets/style-DDhMq_FM.css" as="style"><link rel="stylesheet" href="/assets/style-DDhMq_FM.css">
    <link rel="modulepreload" href="/assets/app-sVi9U6n1.js"><link rel="modulepreload" href="/assets/Maintenance-Tool_timecho.html-BDOnvKrz.js">
    
  </head>
  <body>
    <div id="app"><!--[--><!--[--><!--[--><span tabindex="-1"></span><a href="#main-content" class="vp-skip-link sr-only">Skip to main content</a><!--]--><!--[--><div class="theme-container external-link-icon pure has-toc"><!--[--><header id="navbar" class="vp-navbar"><div class="vp-navbar-start"><button type="button" class="vp-toggle-sidebar-button" title="Toggle Sidebar"><span class="icon"></span></button><!----><!--[--><a class="route-link vp-brand" href="/"><img class="vp-nav-logo" src="/logo.png" alt><!----><span class="vp-site-name hide-in-pad">IoTDB Website</span></a><!--]--><!----></div><div class="vp-navbar-center"><!----><!--[--><!--]--><!----></div><div class="vp-navbar-end"><!----><!--[--><!--[--><div id="docsearch-container" style="display:none;"></div><div><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"><kbd class="DocSearch-Button-Key"><svg width="15" height="15" class="DocSearch-Control-Key-Icon"><path d="M4.505 4.496h2M5.505 5.496v5M8.216 4.496l.055 5.993M10 7.5c.333.333.5.667.5 1v2M12.326 4.5v5.996M8.384 4.496c1.674 0 2.116 0 2.116 1.5s-.442 1.5-2.116 1.5M3.205 9.303c-.09.448-.277 1.21-1.241 1.203C1 10.5.5 9.513.5 8V7c0-1.57.5-2.5 1.464-2.494.964.006 1.134.598 1.24 1.342M12.553 10.5h1.953" stroke-width="1.2" stroke="currentColor" fill="none" stroke-linecap="square"></path></svg></kbd><kbd class="DocSearch-Button-Key">K</kbd></span></button></div><!--]--><nav class="vp-nav-links"><div class="vp-nav-item hide-in-mobile"><div class="vp-dropdown-wrapper"><button type="button" class="vp-dropdown-title" aria-label="Documentation"><!--[--><!---->Documentation<!--]--><span class="arrow"></span><ul class="vp-dropdown"><li class="vp-dropdown-item"><a class="route-link auto-link" href="/UserGuide/latest/QuickStart/QuickStart_apache.html" aria-label="v1.3.3"><!---->v1.3.3<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/UserGuide/V1.3.0-2/QuickStart/QuickStart_apache.html" aria-label="v1.3.0/1/2"><!---->v1.3.0/1/2<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/UserGuide/V1.2.x/QuickStart/QuickStart.html" aria-label="v1.2.x"><!---->v1.2.x<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/UserGuide/V1.1.x/QuickStart/QuickStart.html" aria-label="v1.1.x"><!---->v1.1.x<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/UserGuide/V1.0.x/QuickStart/QuickStart.html" aria-label="v1.0.x"><!---->v1.0.x<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/UserGuide/V0.13.x/QuickStart/QuickStart.html" aria-label="v0.13.x"><!---->v0.13.x<!----></a></li></ul></button></div></div><div class="vp-nav-item hide-in-mobile"><a class="auto-link external-link" href="https://cwiki.apache.org/confluence/display/IOTDB/System+Design" aria-label="Design" rel="noopener noreferrer" target="_blank"><!---->Design<!----></a></div><div class="vp-nav-item hide-in-mobile"><a class="route-link auto-link" href="/Download/" aria-label="Download"><!---->Download<!----></a></div><div class="vp-nav-item hide-in-mobile"><div class="vp-dropdown-wrapper"><button type="button" class="vp-dropdown-title" aria-label="Community"><!--[--><!---->Community<!--]--><span class="arrow"></span><ul class="vp-dropdown"><li class="vp-dropdown-item"><a class="route-link auto-link" href="/Community/About-the-Community.html" aria-label="About the Community"><!---->About the Community<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/Community/Development-Guide.html" aria-label="Development Guide"><!---->Development Guide<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/Community/Community-Partners.html" aria-label="Community Partners"><!---->Community Partners<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/Community/Communication-Channels.html" aria-label="Communication Channels"><!---->Communication Channels<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/Community/Events-and-Reports.html" aria-label="Events and Reports"><!---->Events and Reports<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/Community/Commiters.html" aria-label="Commiters"><!---->Commiters<!----></a></li></ul></button></div></div><div class="vp-nav-item hide-in-mobile"><div class="vp-dropdown-wrapper"><button type="button" class="vp-dropdown-title" aria-label="ASF"><!--[--><!---->ASF<!--]--><span class="arrow"></span><ul class="vp-dropdown"><li class="vp-dropdown-item"><a class="auto-link external-link" href="https://www.apache.org/" aria-label="Foundation" rel="noopener noreferrer" target="_blank"><!---->Foundation<!----></a></li><li class="vp-dropdown-item"><a class="auto-link external-link" href="https://www.apache.org/licenses/" aria-label="License" rel="noopener noreferrer" target="_blank"><!---->License<!----></a></li><li class="vp-dropdown-item"><a class="auto-link external-link" href="https://www.apache.org/security/" aria-label="Security" rel="noopener noreferrer" target="_blank"><!---->Security<!----></a></li><li class="vp-dropdown-item"><a class="auto-link external-link" href="https://www.apache.org/foundation/sponsorship.html" aria-label="Sponsorship" rel="noopener noreferrer" target="_blank"><!---->Sponsorship<!----></a></li><li class="vp-dropdown-item"><a class="auto-link external-link" href="https://www.apache.org/foundation/thanks.html" aria-label="Thanks" rel="noopener noreferrer" target="_blank"><!---->Thanks<!----></a></li><li class="vp-dropdown-item"><a class="auto-link external-link" href="https://www.apache.org/events/current-event" aria-label="Current  Events" rel="noopener noreferrer" target="_blank"><!---->Current  Events<!----></a></li><li class="vp-dropdown-item"><a class="auto-link external-link" href="https://privacy.apache.org/policies/privacy-policy-public.html" aria-label="Privacy" rel="noopener noreferrer" target="_blank"><!---->Privacy<!----></a></li></ul></button></div></div></nav><div class="vp-nav-item"><div class="vp-dropdown-wrapper"><button type="button" class="vp-dropdown-title" aria-label="Select language"><!--[--><svg xmlns="http://www.w3.org/2000/svg" class="icon i18n-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="i18n icon" name="i18n" style="width:1rem;height:1rem;vertical-align:middle;"><path d="M379.392 460.8 494.08 575.488l-42.496 102.4L307.2 532.48 138.24 701.44l-71.68-72.704L234.496 460.8l-45.056-45.056c-27.136-27.136-51.2-66.56-66.56-108.544h112.64c7.68 14.336 16.896 27.136 26.112 35.84l45.568 46.08 45.056-45.056C382.976 312.32 409.6 247.808 409.6 204.8H0V102.4h256V0h102.4v102.4h256v102.4H512c0 70.144-37.888 161.28-87.04 210.944L378.88 460.8zM576 870.4 512 1024H409.6l256-614.4H768l256 614.4H921.6l-64-153.6H576zM618.496 768h196.608L716.8 532.48 618.496 768z"></path></svg><!--]--><span class="arrow"></span><ul class="vp-dropdown"><li class="vp-dropdown-item"><a class="route-link route-link-active auto-link" href="/UserGuide/latest/Tools-System/Maintenance-Tool_timecho.html" aria-label="English"><!---->English<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/zh/UserGuide/latest/Tools-System/Maintenance-Tool_timecho.html" aria-label="简体中文"><!---->简体中文<!----></a></li></ul></button></div></div><div class="vp-nav-item hide-in-mobile"><button type="button" class="vp-color-mode-switch" id="color-mode-switch"><svg xmlns="http://www.w3.org/2000/svg" class="icon auto-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="auto icon" name="auto" style="display:none;"><path d="M512 992C246.92 992 32 777.08 32 512S246.92 32 512 32s480 214.92 480 480-214.92 480-480 480zm0-840c-198.78 0-360 161.22-360 360 0 198.84 161.22 360 360 360s360-161.16 360-360c0-198.78-161.22-360-360-360zm0 660V212c165.72 0 300 134.34 300 300 0 165.72-134.28 300-300 300z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon dark-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="dark icon" name="dark" style="display:none;"><path d="M524.8 938.667h-4.267a439.893 439.893 0 0 1-313.173-134.4 446.293 446.293 0 0 1-11.093-597.334A432.213 432.213 0 0 1 366.933 90.027a42.667 42.667 0 0 1 45.227 9.386 42.667 42.667 0 0 1 10.24 42.667 358.4 358.4 0 0 0 82.773 375.893 361.387 361.387 0 0 0 376.747 82.774 42.667 42.667 0 0 1 54.187 55.04 433.493 433.493 0 0 1-99.84 154.88 438.613 438.613 0 0 1-311.467 128z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon light-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="light icon" name="light" style="display:block;"><path d="M952 552h-80a40 40 0 0 1 0-80h80a40 40 0 0 1 0 80zM801.88 280.08a41 41 0 0 1-57.96-57.96l57.96-58a41.04 41.04 0 0 1 58 58l-58 57.96zM512 752a240 240 0 1 1 0-480 240 240 0 0 1 0 480zm0-560a40 40 0 0 1-40-40V72a40 40 0 0 1 80 0v80a40 40 0 0 1-40 40zm-289.88 88.08-58-57.96a41.04 41.04 0 0 1 58-58l57.96 58a41 41 0 0 1-57.96 57.96zM192 512a40 40 0 0 1-40 40H72a40 40 0 0 1 0-80h80a40 40 0 0 1 40 40zm30.12 231.92a41 41 0 0 1 57.96 57.96l-57.96 58a41.04 41.04 0 0 1-58-58l58-57.96zM512 832a40 40 0 0 1 40 40v80a40 40 0 0 1-80 0v-80a40 40 0 0 1 40-40zm289.88-88.08 58 57.96a41.04 41.04 0 0 1-58 58l-57.96-58a41 41 0 0 1 57.96-57.96z"></path></svg></button></div><div class="vp-nav-item vp-action"><a class="vp-action-link" href="https://github.com/apache/iotdb" target="_blank" rel="noopener noreferrer" aria-label="GitHub"><svg xmlns="http://www.w3.org/2000/svg" class="icon github-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="github icon" name="github" style="width:1.25rem;height:1.25rem;vertical-align:middle;"><path d="M511.957 21.333C241.024 21.333 21.333 240.981 21.333 512c0 216.832 140.544 400.725 335.574 465.664 24.49 4.395 32.256-10.07 32.256-23.083 0-11.69.256-44.245 0-85.205-136.448 29.61-164.736-64.64-164.736-64.64-22.315-56.704-54.4-71.765-54.4-71.765-44.587-30.464 3.285-29.824 3.285-29.824 49.195 3.413 75.179 50.517 75.179 50.517 43.776 75.008 114.816 53.333 142.762 40.79 4.523-31.66 17.152-53.377 31.19-65.537-108.971-12.458-223.488-54.485-223.488-242.602 0-53.547 19.114-97.323 50.517-131.67-5.035-12.33-21.93-62.293 4.779-129.834 0 0 41.258-13.184 134.912 50.346a469.803 469.803 0 0 1 122.88-16.554c41.642.213 83.626 5.632 122.88 16.554 93.653-63.488 134.784-50.346 134.784-50.346 26.752 67.541 9.898 117.504 4.864 129.834 31.402 34.347 50.474 78.123 50.474 131.67 0 188.586-114.73 230.016-224.042 242.09 17.578 15.232 33.578 44.672 33.578 90.454v135.85c0 13.142 7.936 27.606 32.854 22.87C862.25 912.597 1002.667 728.747 1002.667 512c0-271.019-219.648-490.667-490.71-490.667z"></path></svg></a></div><!--]--><!----><button type="button" class="vp-toggle-navbar-button" aria-label="Toggle Navbar" aria-expanded="false" aria-controls="nav-screen"><span><span class="vp-top"></span><span class="vp-middle"></span><span class="vp-bottom"></span></span></button></div></header><!----><!--]--><!----><div class="toggle-sidebar-wrapper"><span class="arrow start"></span></div><aside id="sidebar" class="vp-sidebar"><!----><ul class="vp-sidebar-links"><li><section class="vp-sidebar-group"><p class="vp-sidebar-header"><!----><span class="vp-sidebar-title">IoTDB User Guide (V1.3.3)</span><!----></p><ul class="vp-sidebar-links"></ul></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">About IoTDB</span><span class="vp-arrow end"></span></button><!----></section></li><li><a class="route-link auto-link vp-sidebar-link" href="/UserGuide/latest/QuickStart/QuickStart_apache.html" aria-label="Quick Start"><!---->Quick Start<!----></a></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">Basic Concept</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">Deployment &amp; Maintenance</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">User Manual</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">Tools System</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">API</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">Ecosystem Integration</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">SQL Manual</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">FAQ</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">Reference</span><span class="vp-arrow end"></span></button><!----></section></li></ul><!----></aside><!--[--><!--[--><main id="main-content" class="vp-page"><!--[--><!----><!----><nav class="vp-breadcrumb disable"></nav><div class="vp-page-title"><h1><!---->Maintenance Tool</h1><div class="page-info"><!----><!----><span class="page-date-info" aria-label="Writing Date"><svg xmlns="http://www.w3.org/2000/svg" class="icon calendar-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="calendar icon" name="calendar"><path d="M716.4 110.137c0-18.753-14.72-33.473-33.472-33.473-18.753 0-33.473 14.72-33.473 33.473v33.473h66.993v-33.473zm-334.87 0c0-18.753-14.72-33.473-33.473-33.473s-33.52 14.72-33.52 33.473v33.473h66.993v-33.473zm468.81 33.52H716.4v100.465c0 18.753-14.72 33.473-33.472 33.473a33.145 33.145 0 01-33.473-33.473V143.657H381.53v100.465c0 18.753-14.72 33.473-33.473 33.473a33.145 33.145 0 01-33.473-33.473V143.657H180.6A134.314 134.314 0 0046.66 277.595v535.756A134.314 134.314 0 00180.6 947.289h669.74a134.36 134.36 0 00133.94-133.938V277.595a134.314 134.314 0 00-133.94-133.938zm33.473 267.877H147.126a33.145 33.145 0 01-33.473-33.473c0-18.752 14.72-33.473 33.473-33.473h736.687c18.752 0 33.472 14.72 33.472 33.473a33.145 33.145 0 01-33.472 33.473z"></path></svg><span><!----></span><meta property="datePublished" content="2023-07-10T03:11:17.000Z"></span><!----><span class="page-reading-time-info" aria-label="Reading Time"><svg xmlns="http://www.w3.org/2000/svg" class="icon timer-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="timer icon" name="timer"><path d="M799.387 122.15c4.402-2.978 7.38-7.897 7.38-13.463v-1.165c0-8.933-7.38-16.312-16.312-16.312H256.33c-8.933 0-16.311 7.38-16.311 16.312v1.165c0 5.825 2.977 10.874 7.637 13.592 4.143 194.44 97.22 354.963 220.201 392.763-122.204 37.542-214.893 196.511-220.2 389.397-4.661 5.049-7.638 11.651-7.638 19.03v5.825h566.49v-5.825c0-7.379-2.849-13.981-7.509-18.9-5.049-193.016-97.867-351.985-220.2-389.527 123.24-37.67 216.446-198.453 220.588-392.892zM531.16 450.445v352.632c117.674 1.553 211.787 40.778 211.787 88.676H304.097c0-48.286 95.149-87.382 213.728-88.676V450.445c-93.077-3.107-167.901-81.297-167.901-177.093 0-8.803 6.99-15.793 15.793-15.793 8.803 0 15.794 6.99 15.794 15.793 0 80.261 63.69 145.635 142.01 145.635s142.011-65.374 142.011-145.635c0-8.803 6.99-15.793 15.794-15.793s15.793 6.99 15.793 15.793c0 95.019-73.789 172.82-165.96 177.093z"></path></svg><span>About 22 min</span><meta property="timeRequired" content="PT22M"></span><!----><!----></div><hr></div><div class="vp-toc-placeholder"><aside id="toc"><!----><div class="vp-toc-header">On This Page<button type="button" class="print-button" title="Print"><svg xmlns="http://www.w3.org/2000/svg" class="icon print-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="print icon" name="print"><path d="M819.2 364.8h-44.8V128c0-17.067-14.933-32-32-32H281.6c-17.067 0-32 14.933-32 32v236.8h-44.8C145.067 364.8 96 413.867 96 473.6v192c0 59.733 49.067 108.8 108.8 108.8h44.8V896c0 17.067 14.933 32 32 32h460.8c17.067 0 32-14.933 32-32V774.4h44.8c59.733 0 108.8-49.067 108.8-108.8v-192c0-59.733-49.067-108.8-108.8-108.8zM313.6 160h396.8v204.8H313.6V160zm396.8 704H313.6V620.8h396.8V864zM864 665.6c0 25.6-19.2 44.8-44.8 44.8h-44.8V588.8c0-17.067-14.933-32-32-32H281.6c-17.067 0-32 14.933-32 32v121.6h-44.8c-25.6 0-44.8-19.2-44.8-44.8v-192c0-25.6 19.2-44.8 44.8-44.8h614.4c25.6 0 44.8 19.2 44.8 44.8v192z"></path></svg></button><div class="arrow end"></div></div><div class="vp-toc-wrapper"><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#iotdb-opskit">IoTDB-OpsKit</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#environment-dependence">Environment dependence</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#deployment-method">Deployment method</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#introduction-to-cluster-configuration-files">Introduction to cluster configuration files</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#scenes-to-be-used">scenes to be used</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#command">Command</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#detailed-command-execution-process">Detailed command execution process</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#introduction-to-cluster-deployment-tool-samples">Introduction to Cluster Deployment Tool Samples</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#iotdb-data-directory-overview-tool">IoTDB Data Directory Overview Tool</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#usage">Usage</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#example">Example</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#tsfile-sketch-tool">TsFile Sketch Tool</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#usage-1">Usage</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#example-1">Example</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#tsfile-resource-sketch-tool">TsFile Resource Sketch Tool</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#usage-2">Usage</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#example-2">Example</a></li><!----><!--]--></ul></li><!--]--></ul><div class="vp-toc-marker" style="top:-1.7rem;"></div></div><!----></aside></div><!----><div class="theme-hope-content"><h1 id="maintenance-tool" tabindex="-1"><a class="header-anchor" href="#maintenance-tool"><span>Maintenance Tool</span></a></h1><h2 id="iotdb-opskit" tabindex="-1"><a class="header-anchor" href="#iotdb-opskit"><span>IoTDB-OpsKit</span></a></h2><p>The IoTDB OpsKit is an easy-to-use operation and maintenance tool (enterprise version tool).<br> It is designed to solve the operation and maintenance problems of multiple nodes in the IoTDB distributed system.<br> It mainly includes cluster deployment, cluster start and stop, elastic expansion, configuration update, data export and other functions, thereby realizing one-click command issuance for complex database clusters, which greatly Reduce management difficulty.<br> This document will explain how to remotely deploy, configure, start and stop IoTDB cluster instances with cluster management tools.</p><h3 id="environment-dependence" tabindex="-1"><a class="header-anchor" href="#environment-dependence"><span>Environment dependence</span></a></h3><p>This tool is a supporting tool for TimechoDB(Enterprise Edition based on IoTDB). You can contact your sales representative to obtain the tool download method.</p><p>The machine where IoTDB is to be deployed needs to rely on jdk 8 and above, lsof, netstat, and unzip functions. If not, please install them yourself. You can refer to the installation commands required for the environment in the last section of the document.</p><p>Tip: The IoTDB cluster management tool requires an account with root privileges</p><h3 id="deployment-method" tabindex="-1"><a class="header-anchor" href="#deployment-method"><span>Deployment method</span></a></h3><h4 id="download-and-install" tabindex="-1"><a class="header-anchor" href="#download-and-install"><span>Download and install</span></a></h4><p>This tool is a supporting tool for TimechoDB(Enterprise Edition based on IoTDB). You can contact your salesperson to obtain the tool download method.</p><p>Note: Since the binary package only supports GLIBC2.17 and above, the minimum version is Centos7.</p><ul><li>After entering the following commands in the iotdb-opskit directory:</li></ul><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line"><span class="token function">bash</span> install-iotdbctl.sh</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>The iotdbctl keyword can be activated in the subsequent shell, such as checking the environment instructions required before deployment as follows:</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line">iotdbctl cluster check example</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ul><li>You can also directly use &lt;iotdbctl absolute path&gt;/sbin/iotdbctl without activating iotdbctl to execute commands, such as checking the environment required before deployment:</li></ul><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line"><span class="token operator">&lt;</span>iotdbctl absolute path<span class="token operator">&gt;</span>/sbin/iotdbctl cluster check example</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="introduction-to-cluster-configuration-files" tabindex="-1"><a class="header-anchor" href="#introduction-to-cluster-configuration-files"><span>Introduction to cluster configuration files</span></a></h3><ul><li>There is a cluster configuration yaml file in the <code>iotdbctl/config</code> directory. The yaml file name is the cluster name. There can be multiple yaml files. In order to facilitate users to configure yaml files, a <code>default_cluster.yaml</code> example is provided under the iotdbctl/config directory.</li><li>The yaml file configuration consists of five major parts: <code>global</code>, <code>confignode_servers</code>, <code>datanode_servers</code>, <code>grafana_server</code>, and <code>prometheus_server</code></li><li><code>global</code> is a general configuration that mainly configures machine username and password, IoTDB local installation files, Jdk configuration, etc. A <code>default_cluster.yaml</code> sample data is provided in the <code>iotdbctl/config</code> directory,<br> Users can copy and modify it to their own cluster name and refer to the instructions inside to configure the IoTDB cluster. In the <code>default_cluster.yaml</code> sample, all uncommented items are required, and those that have been commented are non-required.</li></ul><p>例如要执行<code>default_cluster.yaml</code>检查命令则需要执行命令<code>iotdbctl cluster check default_cluster</code>即可，<br> 更多详细命令请参考下面命令列表。</p><table><thead><tr><th>parameter name</th><th>parameter describe</th><th>required</th></tr></thead><tbody><tr><td>iotdb_zip_dir</td><td>IoTDB deployment distribution directory, if the value is empty, it will be downloaded from the address specified by <code>iotdb_download_url</code></td><td>NO</td></tr><tr><td>iotdb_download_url</td><td>IoTDB download address, if <code>iotdb_zip_dir</code> has no value, download from the specified address</td><td>NO</td></tr><tr><td>jdk_tar_dir</td><td>jdk local directory, you can use this jdk path to upload and deploy to the target node.</td><td>NO</td></tr><tr><td>jdk_deploy_dir</td><td>jdk remote machine deployment directory, jdk will be deployed to this directory, and the following <code>jdk_dir_name</code> parameter forms a complete jdk deployment directory, that is, <code>&lt;jdk_deploy_dir&gt;/&lt;jdk_dir_name&gt;</code></td><td>NO</td></tr><tr><td>jdk_dir_name</td><td>The directory name after jdk decompression defaults to jdk_iotdb</td><td>NO</td></tr><tr><td>iotdb_lib_dir</td><td>The IoTDB lib directory or the IoTDB lib compressed package only supports .zip format and is only used for IoTDB upgrade. It is in the comment state by default. If you need to upgrade, please open the comment and modify the path. If you use a zip file, please use the zip command to compress the iotdb/lib directory, such as zip -r lib.zip apache-iotdb-1.2.0/lib/* d</td><td>NO</td></tr><tr><td>user</td><td>User name for ssh login deployment machine</td><td>YES</td></tr><tr><td>password</td><td>The password for ssh login. If the password does not specify the use of pkey to log in, please ensure that the ssh login between nodes has been configured without a key.</td><td>NO</td></tr><tr><td>pkey</td><td>Key login: If password has a value, password is used first, otherwise pkey is used to log in.</td><td>NO</td></tr><tr><td>ssh_port</td><td>ssh port</td><td>YES</td></tr><tr><td>deploy_dir</td><td>IoTDB deployment directory, IoTDB will be deployed to this directory and the following <code>iotdb_dir_name</code> parameter will form a complete IoTDB deployment directory, that is, <code>&lt;deploy_dir&gt;/&lt;iotdb_dir_name&gt;</code></td><td>YES</td></tr><tr><td>iotdb_dir_name</td><td>The directory name after decompression of IoTDB is iotdb by default.</td><td>NO</td></tr><tr><td><a href="http://datanode-env.sh" target="_blank" rel="noopener noreferrer">datanode-env.sh</a></td><td>Corresponding to <code>iotdb/config/datanode-env.sh</code>, when <code>global</code> and <code>confignode_servers</code> are configured at the same time, the value in <code>confignode_servers</code> is used first</td><td>NO</td></tr><tr><td><a href="http://confignode-env.sh" target="_blank" rel="noopener noreferrer">confignode-env.sh</a></td><td>Corresponding to <code>iotdb/config/confignode-env.sh</code>, the value in <code>datanode_servers</code> is used first when <code>global</code> and <code>datanode_servers</code> are configured at the same time</td><td>NO</td></tr><tr><td>iotdb-system.properties</td><td>Corresponds to <code>&lt;iotdb path&gt;/config/iotdb-system.properties</code></td><td>NO</td></tr><tr><td>cn_internal_address</td><td>The cluster configuration address points to the surviving ConfigNode, and it points to confignode_x by default. When <code>global</code> and <code>confignode_servers</code> are configured at the same time, the value in <code>confignode_servers</code> is used first, corresponding to <code>cn_internal_address</code> in <code>iotdb/config/iotdb-system.properties</code></td><td>YES</td></tr><tr><td>dn_internal_address</td><td>The cluster configuration address points to the surviving ConfigNode, and points to confignode_x by default. When configuring values for <code>global</code> and <code>datanode_servers</code> at the same time, the value in <code>datanode_servers</code> is used first, corresponding to <code>dn_internal_address</code> in <code>iotdb/config/iotdb-system.properties</code></td><td>YES</td></tr></tbody></table><p>Among them, <a href="http://datanode-env.sh" target="_blank" rel="noopener noreferrer">datanode-env.sh</a> and <a href="http://confignode-env.sh" target="_blank" rel="noopener noreferrer">confignode-env.sh</a> can be configured with extra parameters extra_opts. When this parameter is configured, corresponding values will be appended after <a href="http://datanode-env.sh" target="_blank" rel="noopener noreferrer">datanode-env.sh</a> and <a href="http://confignode-env.sh" target="_blank" rel="noopener noreferrer">confignode-env.sh</a>. Refer to default_cluster.yaml for configuration examples as follows:<br><a href="http://datanode-env.sh" target="_blank" rel="noopener noreferrer">datanode-env.sh</a>:<br> extra_opts: |<br> IOTDB_JMX_OPTS=&quot;<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>I</mi><mi>O</mi><mi>T</mi><mi>D</mi><msub><mi>B</mi><mi>J</mi></msub><mi>M</mi><msub><mi>X</mi><mi>O</mi></msub><mi>P</mi><mi>T</mi><mi>S</mi><mo>−</mo><mi>X</mi><mi>X</mi><mo>:</mo><mo>+</mo><mi>U</mi><mi>s</mi><mi>e</mi><mi>G</mi><mn>1</mn><mi>G</mi><mi>C</mi><mi mathvariant="normal">&quot;</mi><mi>I</mi><mi>O</mi><mi>T</mi><mi>D</mi><msub><mi>B</mi><mi>J</mi></msub><mi>M</mi><msub><mi>X</mi><mi>O</mi></msub><mi>P</mi><mi>T</mi><mi>S</mi><mo>=</mo><mi mathvariant="normal">&quot;</mi></mrow><annotation encoding="application/x-tex">IOTDB_JMX_OPTS -XX:+UseG1GC&quot; IOTDB_JMX_OPTS=&quot;</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord mathnormal" style="margin-right:0.07847em;">I</span><span class="mord mathnormal" style="margin-right:0.13889em;">OT</span><span class="mord mathnormal" style="margin-right:0.02778em;">D</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.05017em;">B</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:-0.0502em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.09618em;">J</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord mathnormal" style="margin-right:0.10903em;">M</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07847em;">X</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:-0.0785em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.02778em;">O</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord mathnormal" style="margin-right:0.05764em;">PTS</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.07847em;">XX</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">:</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8444em;vertical-align:-0.15em;"></span><span class="mord">+</span><span class="mord mathnormal" style="margin-right:0.10903em;">U</span><span class="mord mathnormal">se</span><span class="mord mathnormal">G</span><span class="mord">1</span><span class="mord mathnormal" style="margin-right:0.07153em;">GC</span><span class="mord">&quot;</span><span class="mord mathnormal" style="margin-right:0.07847em;">I</span><span class="mord mathnormal" style="margin-right:0.13889em;">OT</span><span class="mord mathnormal" style="margin-right:0.02778em;">D</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.05017em;">B</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:-0.0502em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.09618em;">J</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord mathnormal" style="margin-right:0.10903em;">M</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07847em;">X</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:-0.0785em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.02778em;">O</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord mathnormal" style="margin-right:0.05764em;">PTS</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord">&quot;</span></span></span></span>IOTDB_JMX_OPTS -XX:MaxGCPauseMillis=200&quot;</p><ul><li><code>confignode_servers</code> is the configuration for deploying IoTDB Confignodes, in which multiple Confignodes can be configured<br> By default, the first started ConfigNode node node1 is regarded as the Seed-ConfigNode</li></ul><table><thead><tr><th>parameter name</th><th>parameter describe</th><th>required</th></tr></thead><tbody><tr><td>name</td><td>Confignode name</td><td>YES</td></tr><tr><td>deploy_dir</td><td>IoTDB config node deployment directory</td><td>YES</td></tr><tr><td>cn_internal_address</td><td>Corresponds to iotdb/internal communication address, corresponding to <code>cn_internal_address</code> in <code>iotdb/config/iotdb-system.properties</code></td><td>YES</td></tr><tr><td>cn_internal_address</td><td>The cluster configuration address points to the surviving ConfigNode, and it points to confignode_x by default. When <code>global</code> and <code>confignode_servers</code> are configured at the same time, the value in <code>confignode_servers</code> is used first, corresponding to <code>cn_internal_address</code> in <code>iotdb/config/iotdb-system.properties</code></td><td>YES</td></tr><tr><td>cn_internal_port</td><td>Internal communication port, corresponding to <code>cn_internal_port</code> in <code>iotdb/config/iotdb-system.properties</code></td><td>YES</td></tr><tr><td>cn_consensus_port</td><td>Corresponds to <code>cn_consensus_port</code> in <code>iotdb/config/iotdb-system.properties</code></td><td>NO</td></tr><tr><td>cn_data_dir</td><td>Corresponds to <code>cn_consensus_port</code> in <code>iotdb/config/iotdb-system.properties</code> Corresponds to <code>cn_data_dir</code> in <code>iotdb/config/iotdb-system.properties</code></td><td>YES</td></tr><tr><td>iotdb-system.properties</td><td>Corresponding to <code>iotdb/config/iotdb-system.properties</code>, when configuring values in <code>global</code> and <code>confignode_servers</code> at the same time, the value in confignode_servers will be used first.</td><td>NO</td></tr></tbody></table><ul><li>datanode_servers 是部署IoTDB Datanodes配置，里面可以配置多个Datanode</li></ul><table><thead><tr><th>parameter name</th><th>parameter describe</th><th>required</th></tr></thead><tbody><tr><td>name</td><td>Datanode name</td><td>YES</td></tr><tr><td>deploy_dir</td><td>IoTDB data node deployment directory</td><td>YES</td></tr><tr><td>dn_rpc_address</td><td>The datanode rpc address corresponds to <code>dn_rpc_address</code> in <code>iotdb/config/iotdb-system.properties</code></td><td>YES</td></tr><tr><td>dn_internal_address</td><td>Internal communication address, corresponding to <code>dn_internal_address</code> in <code>iotdb/config/iotdb-system.properties</code></td><td>YES</td></tr><tr><td>dn_seed_config_node</td><td>The cluster configuration address points to the surviving ConfigNode, and points to confignode_x by default. When configuring values for <code>global</code> and <code>datanode_servers</code> at the same time, the value in <code>datanode_servers</code> is used first, corresponding to <code>dn_seed_config_node</code> in <code>iotdb/config/iotdb-system.properties</code>.</td><td>YES</td></tr><tr><td>dn_rpc_port</td><td>Datanode rpc port address, corresponding to <code>dn_rpc_port</code> in <code>iotdb/config/iotdb-system.properties</code></td><td>YES</td></tr><tr><td>dn_internal_port</td><td>Internal communication port, corresponding to <code>dn_internal_port</code> in <code>iotdb/config/iotdb-system.properties</code></td><td>YES</td></tr><tr><td>iotdb-system.properties</td><td>Corresponding to <code>iotdb/config/iotdb-system.properties</code>, when configuring values in <code>global</code> and <code>datanode_servers</code> at the same time, the value in <code>datanode_servers</code> will be used first.</td><td>NO</td></tr></tbody></table><ul><li>grafana_server is the configuration related to deploying Grafana</li></ul><table><thead><tr><th>parameter name</th><th>parameter describe</th><th>required</th></tr></thead><tbody><tr><td>grafana_dir_name</td><td>Grafana decompression directory name(default grafana_iotdb)</td><td>NO</td></tr><tr><td>host</td><td>Server ip deployed by grafana</td><td>YES</td></tr><tr><td>grafana_port</td><td>The port of grafana deployment machine, default 3000</td><td>NO</td></tr><tr><td>deploy_dir</td><td>grafana deployment server directory</td><td>YES</td></tr><tr><td>grafana_tar_dir</td><td>Grafana compressed package location</td><td>YES</td></tr><tr><td>dashboards</td><td>dashboards directory</td><td>NO</td></tr></tbody></table><ul><li>prometheus_server 是部署Prometheus 相关配置</li></ul><table><thead><tr><th>parameter name</th><th>parameter describe</th><th>required</th></tr></thead><tbody><tr><td>prometheus_dir_name</td><td>prometheus decompression directory name, default prometheus_iotdb</td><td>NO</td></tr><tr><td>host</td><td>Server IP deployed by prometheus</td><td>YES</td></tr><tr><td>prometheus_port</td><td>The port of prometheus deployment machine, default 9090</td><td>NO</td></tr><tr><td>deploy_dir</td><td>prometheus deployment server directory</td><td>YES</td></tr><tr><td>prometheus_tar_dir</td><td>prometheus compressed package path</td><td>YES</td></tr><tr><td>storage_tsdb_retention_time</td><td>The number of days to save data is 15 days by default</td><td>NO</td></tr><tr><td>storage_tsdb_retention_size</td><td>The data size that can be saved by the specified block defaults to 512M. Please note the units are KB, MB, GB, TB, PB, and EB.</td><td>NO</td></tr></tbody></table><p>If metrics are configured in <code>iotdb-system.properties</code> and <code>iotdb-system.properties</code> of config/xxx.yaml, the configuration will be automatically put into promethues without manual modification.</p><p>Note: How to configure the value corresponding to the yaml key to contain special characters such as: etc. It is recommended to use double quotes for the entire value, and do not use paths containing spaces in the corresponding file paths to prevent abnormal recognition problems.</p><h3 id="scenes-to-be-used" tabindex="-1"><a class="header-anchor" href="#scenes-to-be-used"><span>scenes to be used</span></a></h3><h4 id="clean-data" tabindex="-1"><a class="header-anchor" href="#clean-data"><span>Clean data</span></a></h4><ul><li>Cleaning up the cluster data scenario will delete the data directory in the IoTDB cluster and <code>cn_system_dir</code>, <code>cn_consensus_dir</code>, <code>cn_consensus_dir</code> configured in the yaml file<br><code>dn_data_dirs</code>, <code>dn_consensus_dir</code>, <code>dn_system_dir</code>, <code>logs</code> and <code>ext</code> directories.</li><li>First execute the stop cluster command, and then execute the cluster cleanup command.</li></ul><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line">iotdbctl cluster stop default_cluster</span>
<span class="line">iotdbctl cluster clean default_cluster</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="cluster-destruction" tabindex="-1"><a class="header-anchor" href="#cluster-destruction"><span>Cluster destruction</span></a></h4><ul><li>The cluster destruction scenario will delete <code>data</code>, <code>cn_system_dir</code>, <code>cn_consensus_dir</code>, in the IoTDB cluster<br><code>dn_data_dirs</code>, <code>dn_consensus_dir</code>, <code>dn_system_dir</code>, <code>logs</code>, <code>ext</code>, <code>IoTDB</code> deployment directory,<br> grafana deployment directory and prometheus deployment directory.</li><li>First execute the stop cluster command, and then execute the cluster destruction command.</li></ul><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line">iotdbctl cluster stop default_cluster</span>
<span class="line">iotdbctl cluster destroy default_cluster</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="cluster-upgrade" tabindex="-1"><a class="header-anchor" href="#cluster-upgrade"><span>Cluster upgrade</span></a></h4><ul><li>To upgrade the cluster, you first need to configure <code>iotdb_lib_dir</code> in config/xxx.yaml as the directory path where the jar to be uploaded to the server is located (for example, iotdb/lib).</li><li>If you use zip files to upload, please use the zip command to compress the iotdb/lib directory, such as zip -r lib.zip apache-iotdb-1.2.0/lib/*</li><li>Execute the upload command and then execute the restart IoTDB cluster command to complete the cluster upgrade.</li></ul><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line">iotdbctl cluster dist-lib default_cluster</span>
<span class="line">iotdbctl cluster restart default_cluster</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="hot-deployment" tabindex="-1"><a class="header-anchor" href="#hot-deployment"><span>hot deployment</span></a></h4><ul><li>First modify the configuration in config/xxx.yaml.</li><li>Execute the distribution command, and then execute the hot deployment command to complete the hot deployment of the cluster configuration</li></ul><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line">iotdbctl cluster dist-conf default_cluster</span>
<span class="line">iotdbctl cluster reload default_cluster</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="cluster-expansion" tabindex="-1"><a class="header-anchor" href="#cluster-expansion"><span>Cluster expansion</span></a></h4><ul><li>First modify and add a datanode or confignode node in config/xxx.yaml.</li><li>Execute the cluster expansion command</li></ul><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line">iotdbctl cluster scaleout default_cluster</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h4 id="cluster-scaling" tabindex="-1"><a class="header-anchor" href="#cluster-scaling"><span>Cluster scaling</span></a></h4><ul><li>First find the node name or ip+port to shrink in config/xxx.yaml (where confignode port is cn_internal_port, datanode port is rpc_port)</li><li>Execute cluster shrink command</li></ul><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line">iotdbctl cluster scalein default_cluster</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h4 id="using-cluster-management-tools-to-manipulate-existing-iotdb-clusters" tabindex="-1"><a class="header-anchor" href="#using-cluster-management-tools-to-manipulate-existing-iotdb-clusters"><span>Using cluster management tools to manipulate existing IoTDB clusters</span></a></h4><ul><li>Configure the server&#39;s <code>user</code>, <code>passwod</code> or <code>pkey</code>, <code>ssh_port</code></li><li>Modify the IoTDB deployment path in config/xxx.yaml, <code>deploy_dir</code> (IoTDB deployment directory), <code>iotdb_dir_name</code> (IoTDB decompression directory name, the default is iotdb)<br> For example, if the full path of IoTDB deployment is <code>/home/data/apache-iotdb-1.1.1</code>, you need to modify the yaml files <code>deploy_dir:/home/data/</code> and <code>iotdb_dir_name:apache-iotdb-1.1.1</code></li><li>If the server is not using java_home, modify <code>jdk_deploy_dir</code> (jdk deployment directory) and <code>jdk_dir_name</code> (the directory name after jdk decompression, the default is jdk_iotdb). If java_home is used, there is no need to modify the configuration.<br> For example, the full path of jdk deployment is <code>/home/data/jdk_1.8.2</code>, you need to modify the yaml files <code>jdk_deploy_dir:/home/data/</code>, <code>jdk_dir_name:jdk_1.8.2</code></li><li>Configure <code>cn_internal_address</code>, <code>dn_internal_address</code></li><li>Configure <code>cn_internal_address</code>, <code>cn_internal_port</code>, <code>cn_consensus_port</code>, <code>cn_system_dir</code>, in <code>iotdb-system.properties</code> in <code>confignode_servers</code><br> If the values in <code>cn_consensus_dir</code> and <code>iotdb-system.properties</code> are not the default for IoTDB, they need to be configured, otherwise there is no need to configure them.</li><li>Configure <code>dn_rpc_address</code>, <code>dn_internal_address</code>, <code>dn_data_dirs</code>, <code>dn_consensus_dir</code>, <code>dn_system_dir</code> in <code>iotdb-system.properties</code></li><li>Execute initialization command</li></ul><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line">iotdbctl cluster init default_cluster</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h4 id="deploy-iotdb-grafana-and-prometheus" tabindex="-1"><a class="header-anchor" href="#deploy-iotdb-grafana-and-prometheus"><span>Deploy IoTDB, Grafana and Prometheus</span></a></h4><ul><li>Configure <code>iotdb-system.properties</code> to open the metrics interface</li><li>Configure the Grafana configuration. If there are multiple <code>dashboards</code>, separate them with commas. The names cannot be repeated or they will be overwritten.</li><li>Configure the Prometheus configuration. If the IoTDB cluster is configured with metrics, there is no need to manually modify the Prometheus configuration. The Prometheus configuration will be automatically modified according to which node is configured with metrics.</li><li>Start the cluster</li></ul><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line">iotdbctl cluster start default_cluster</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>For more detailed parameters, please refer to the cluster configuration file introduction above</p><h3 id="command" tabindex="-1"><a class="header-anchor" href="#command"><span>Command</span></a></h3><p>The basic usage of this tool is:</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line">iotdbctl cluster <span class="token operator">&lt;</span>key<span class="token operator">&gt;</span> <span class="token operator">&lt;</span>cluster name<span class="token operator">&gt;</span> <span class="token punctuation">[</span>params <span class="token punctuation">(</span>Optional<span class="token punctuation">)</span><span class="token punctuation">]</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ul><li><p>key indicates a specific command.</p></li><li><p>cluster name indicates the cluster name (that is, the name of the yaml file in the <code>iotdbctl/config</code> file).</p></li><li><p>params indicates the required parameters of the command (optional).</p></li><li><p>For example, the command format to deploy the default_cluster cluster is:</p></li></ul><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line">iotdbctl cluster deploy default_cluster</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ul><li>The functions and parameters of the cluster are listed as follows:</li></ul><table><thead><tr><th>command</th><th>description</th><th>parameter</th></tr></thead><tbody><tr><td>check</td><td>check whether the cluster can be deployed</td><td>Cluster name list</td></tr><tr><td>clean</td><td>cleanup-cluster</td><td>cluster-name</td></tr><tr><td>deploy/dist-all</td><td>deploy cluster</td><td>Cluster name, -N, module name (optional for iotdb, grafana, prometheus), -op force (optional)</td></tr><tr><td>list</td><td>cluster status list</td><td>None</td></tr><tr><td>start</td><td>start cluster</td><td>Cluster name, -N, node name (nodename, grafana, prometheus optional)</td></tr><tr><td>stop</td><td>stop cluster</td><td>Cluster name, -N, node name (nodename, grafana, prometheus optional), -op force (nodename, grafana, prometheus optional)</td></tr><tr><td>restart</td><td>restart cluster</td><td>Cluster name, -N, node name (nodename, grafana, prometheus optional), -op force (nodename, grafana, prometheus optional)</td></tr><tr><td>show</td><td>view cluster information. The details field indicates the details of the cluster information.</td><td>Cluster name, details (optional)</td></tr><tr><td>destroy</td><td>destroy cluster</td><td>Cluster name, -N, module name (iotdb, grafana, prometheus optional)</td></tr><tr><td>scaleout</td><td>cluster expansion</td><td>Cluster name</td></tr><tr><td>scalein</td><td>cluster shrink</td><td>Cluster name, -N, cluster node name or cluster node ip+port</td></tr><tr><td>reload</td><td>hot loading of cluster configuration files</td><td>Cluster name</td></tr><tr><td>dist-conf</td><td>cluster configuration file distribution</td><td>Cluster name</td></tr><tr><td>dumplog</td><td>Back up specified cluster logs</td><td>Cluster name, -N, cluster node name -h Back up to target machine ip -pw Back up to target machine password -p Back up to target machine port -path Backup directory -startdate Start time -enddate End time -loglevel Log type -l transfer speed</td></tr><tr><td>dumpdata</td><td>Backup cluster data</td><td>Cluster name, -h backup to target machine ip -pw backup to target machine password -p backup to target machine port -path backup directory -startdate start time -enddate end time -l transmission speed</td></tr><tr><td>dist-lib</td><td>lib package upgrade</td><td>Cluster name</td></tr><tr><td>init</td><td>When an existing cluster uses the cluster deployment tool, initialize the cluster configuration</td><td>Cluster name</td></tr><tr><td>status</td><td>View process status</td><td>Cluster name</td></tr><tr><td>activate</td><td>Activate cluster</td><td>Cluster name</td></tr><tr><td>health_check</td><td>health check</td><td>Cluster name, -N, nodename (optional)</td></tr><tr><td>backup</td><td>Activate cluster</td><td>Cluster name,-N nodename (optional)</td></tr><tr><td>importschema</td><td>Activate cluster</td><td>Cluster name,-N nodename -param paramters</td></tr><tr><td>exportschema</td><td>Activate cluster</td><td>Cluster name,-N nodename -param paramters</td></tr></tbody></table><h3 id="detailed-command-execution-process" tabindex="-1"><a class="header-anchor" href="#detailed-command-execution-process"><span>Detailed command execution process</span></a></h3><p>The following commands are executed using default_cluster.yaml as an example, and users can modify them to their own cluster files to execute</p><h4 id="check-cluster-deployment-environment-commands" tabindex="-1"><a class="header-anchor" href="#check-cluster-deployment-environment-commands"><span>Check cluster deployment environment commands</span></a></h4><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line">iotdbctl cluster check default_cluster</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ul><li><p>Find the yaml file in the default location according to cluster-name and obtain the configuration information of <code>confignode_servers</code> and <code>datanode_servers</code></p></li><li><p>Verify that the target node is able to log in via SSH</p></li><li><p>Verify whether the JDK version on the corresponding node meets IoTDB jdk1.8 and above, and whether the server is installed with unzip, lsof, and netstat.</p></li><li><p>If you see the following prompt <code>Info:example check successfully!</code>, it proves that the server has already met the installation requirements.<br> If <code>Error:example check fail!</code> is output, it proves that some conditions do not meet the requirements. You can check the Error log output above (for example: <code>Error:Server (ip:172.20.31.76) iotdb port(10713) is listening</code>) to make repairs. ,<br> If the jdk check does not meet the requirements, we can configure a jdk1.8 or above version in the yaml file ourselves for deployment without affecting subsequent use.<br> If checking lsof, netstat or unzip does not meet the requirements, you need to install it on the server yourself.</p></li></ul><h4 id="deploy-cluster-command" tabindex="-1"><a class="header-anchor" href="#deploy-cluster-command"><span>Deploy cluster command</span></a></h4><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line">iotdbctl cluster deploy default_cluster</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ul><li><p>Find the yaml file in the default location according to cluster-name and obtain the configuration information of <code>confignode_servers</code> and <code>datanode_servers</code></p></li><li><p>Upload IoTDB compressed package and jdk compressed package according to the node information in <code>confignode_servers</code> and <code>datanode_servers</code> (if <code>jdk_tar_dir</code> and <code>jdk_deploy_dir</code> values ​​are configured in yaml)</p></li><li><p>Generate and upload <code>iotdb-system.properties</code> according to the yaml file node configuration information</p></li></ul><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line">iotdbctl cluster deploy default_cluster <span class="token parameter variable">-op</span> force</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>Note: This command will force the deployment, and the specific process will delete the existing deployment directory and redeploy</p><p><em>deploy a single module</em></p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line"><span class="token comment"># Deploy grafana module</span></span>
<span class="line">iotdbctl cluster deploy default_cluster <span class="token parameter variable">-N</span> grafana</span>
<span class="line"><span class="token comment"># Deploy the prometheus module</span></span>
<span class="line">iotdbctl cluster deploy default_cluster <span class="token parameter variable">-N</span> prometheus</span>
<span class="line"><span class="token comment"># Deploy the iotdb module</span></span>
<span class="line">iotdbctl cluster deploy default_cluster <span class="token parameter variable">-N</span> iotdb</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="start-cluster-command" tabindex="-1"><a class="header-anchor" href="#start-cluster-command"><span>Start cluster command</span></a></h4><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line">iotdbctl cluster start default_cluster</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ul><li><p>Find the yaml file in the default location according to cluster-name and obtain the configuration information of <code>confignode_servers</code> and <code>datanode_servers</code></p></li><li><p>Start confignode, start sequentially according to the order in <code>confignode_servers</code> in the yaml configuration file and check whether the confignode is normal according to the process id, the first confignode is seek config</p></li><li><p>Start the datanode in sequence according to the order in <code>datanode_servers</code> in the yaml configuration file and check whether the datanode is normal according to the process id.</p></li><li><p>After checking the existence of the process according to the process id, check whether each service in the cluster list is normal through the cli. If the cli link fails, retry every 10s until it succeeds and retry up to 5 times</p></li><li></li></ul><p>Start a single node command*</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line"><span class="token comment">#Start according to the IoTDB node name</span></span>
<span class="line">iotdbctl cluster start default_cluster <span class="token parameter variable">-N</span> datanode_1</span>
<span class="line"><span class="token comment">#Start according to IoTDB cluster ip+port, where port corresponds to cn_internal_port of confignode and rpc_port of datanode.</span></span>
<span class="line">iotdbctl cluster start default_cluster <span class="token parameter variable">-N</span> <span class="token number">192.168</span>.1.5:6667</span>
<span class="line"><span class="token comment">#Start grafana</span></span>
<span class="line">iotdbctl cluster start default_cluster <span class="token parameter variable">-N</span> grafana</span>
<span class="line"><span class="token comment">#Start prometheus</span></span>
<span class="line">iotdbctl cluster start default_cluster <span class="token parameter variable">-N</span> prometheus</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><p>Find the yaml file in the default location based on cluster-name</p></li><li><p>Find the node location information based on the provided node name or ip:port. If the started node is <code>data_node</code>, the ip uses <code>dn_rpc_address</code> in the yaml file, and the port uses <code>dn_rpc_port</code> in datanode_servers in the yaml file.<br> If the started node is <code>config_node</code>, the ip uses <code>cn_internal_address</code> in confignode_servers in the yaml file, and the port uses <code>cn_internal_port</code></p></li><li><p>start the node</p></li></ul><p>Note: Since the cluster deployment tool only calls the <a href="http://start-confignode.sh" target="_blank" rel="noopener noreferrer">start-confignode.sh</a> and <a href="http://start-datanode.sh" target="_blank" rel="noopener noreferrer">start-datanode.sh</a> scripts in the IoTDB cluster,<br> When the actual output result fails, it may be that the cluster has not started normally. It is recommended to use the status command to check the current cluster status (iotdbctl cluster status xxx)</p><h4 id="view-iotdb-cluster-status-command" tabindex="-1"><a class="header-anchor" href="#view-iotdb-cluster-status-command"><span>View IoTDB cluster status command</span></a></h4><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line">iotdbctl cluster show default_cluster</span>
<span class="line"><span class="token comment">#View IoTDB cluster details</span></span>
<span class="line">iotdbctl cluster show default_cluster details</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><p>Find the yaml file in the default location according to cluster-name and obtain the configuration information of <code>confignode_servers</code> and <code>datanode_servers</code></p></li><li><p>Execute <code>show cluster details</code> through cli on datanode in turn. If one node is executed successfully, it will not continue to execute cli on subsequent nodes and return the result directly.</p></li></ul><h4 id="stop-cluster-command" tabindex="-1"><a class="header-anchor" href="#stop-cluster-command"><span>Stop cluster command</span></a></h4><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line">iotdbctl cluster stop default_cluster</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ul><li><p>Find the yaml file in the default location according to cluster-name and obtain the configuration information of <code>confignode_servers</code> and <code>datanode_servers</code></p></li><li><p>According to the datanode node information in <code>datanode_servers</code>, stop the datanode nodes in order according to the configuration.</p></li><li><p>Based on the confignode node information in <code>confignode_servers</code>, stop the confignode nodes in sequence according to the configuration</p></li></ul><p><em>force stop cluster command</em></p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line">iotdbctl cluster stop default_cluster <span class="token parameter variable">-op</span> force</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>Will directly execute the kill -9 pid command to forcibly stop the cluster</p><p><em>Stop single node command</em></p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line"><span class="token comment">#Stop by IoTDB node name</span></span>
<span class="line">iotdbctl cluster stop default_cluster <span class="token parameter variable">-N</span> datanode_1</span>
<span class="line"><span class="token comment">#Stop according to IoTDB cluster ip+port (ip+port is to get the only node according to ip+dn_rpc_port in datanode or ip+cn_internal_port in confignode to get the only node)</span></span>
<span class="line">iotdbctl cluster stop default_cluster <span class="token parameter variable">-N</span> <span class="token number">192.168</span>.1.5:6667</span>
<span class="line"><span class="token comment">#Stop grafana</span></span>
<span class="line">iotdbctl cluster stop default_cluster <span class="token parameter variable">-N</span> grafana</span>
<span class="line"><span class="token comment">#Stop prometheus</span></span>
<span class="line">iotdbctl cluster stop default_cluster <span class="token parameter variable">-N</span> prometheus</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><p>Find the yaml file in the default location based on cluster-name</p></li><li><p>Find the corresponding node location information based on the provided node name or ip:port. If the stopped node is <code>data_node</code>, the ip uses <code>dn_rpc_address</code> in the yaml file, and the port uses <code>dn_rpc_port</code> in datanode_servers in the yaml file.<br> If the stopped node is <code>config_node</code>, the ip uses <code>cn_internal_address</code> in confignode_servers in the yaml file, and the port uses <code>cn_internal_port</code></p></li><li><p>stop the node</p></li></ul><p>Note: Since the cluster deployment tool only calls the <a href="http://stop-confignode.sh" target="_blank" rel="noopener noreferrer">stop-confignode.sh</a> and <a href="http://stop-datanode.sh" target="_blank" rel="noopener noreferrer">stop-datanode.sh</a> scripts in the IoTDB cluster, in some cases the iotdb cluster may not be stopped.</p><h4 id="clean-cluster-data-command" tabindex="-1"><a class="header-anchor" href="#clean-cluster-data-command"><span>Clean cluster data command</span></a></h4><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line">iotdbctl cluster clean default_cluster</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ul><li><p>Find the yaml file in the default location according to cluster-name and obtain the configuration information of <code>confignode_servers</code> and <code>datanode_servers</code></p></li><li><p>Based on the information in <code>confignode_servers</code> and <code>datanode_servers</code>, check whether there are still services running,<br> If any service is running, the cleanup command will not be executed.</p></li><li><p>Delete the data directory in the IoTDB cluster and the <code>cn_system_dir</code>, <code>cn_consensus_dir</code>, configured in the yaml file<br><code>dn_data_dirs</code>, <code>dn_consensus_dir</code>, <code>dn_system_dir</code>, <code>logs</code> and <code>ext</code> directories.</p></li></ul><h4 id="restart-cluster-command" tabindex="-1"><a class="header-anchor" href="#restart-cluster-command"><span>Restart cluster command</span></a></h4><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line">iotdbctl cluster restart default_cluster</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ul><li><p>Find the yaml file in the default location according to cluster-name and obtain the configuration information of <code>confignode_servers</code>, <code>datanode_servers</code>, <code>grafana</code> and <code>prometheus</code></p></li><li><p>Execute the above stop cluster command (stop), and then execute the start cluster command (start). For details, refer to the above start and stop commands.</p></li></ul><p><em>Force restart cluster command</em></p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line">iotdbctl cluster restart default_cluster <span class="token parameter variable">-op</span> force</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>Will directly execute the kill -9 pid command to force stop the cluster, and then start the cluster</p><p><em>Restart a single node command</em></p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line"><span class="token comment">#Restart datanode_1 according to the IoTDB node name</span></span>
<span class="line">iotdbctl cluster restart default_cluster <span class="token parameter variable">-N</span> datanode_1</span>
<span class="line"><span class="token comment">#Restart confignode_1 according to the IoTDB node name</span></span>
<span class="line">iotdbctl cluster restart default_cluster <span class="token parameter variable">-N</span> confignode_1</span>
<span class="line"><span class="token comment">#Restart grafana</span></span>
<span class="line">iotdbctl cluster restart default_cluster <span class="token parameter variable">-N</span> grafana</span>
<span class="line"><span class="token comment">#Restart prometheus</span></span>
<span class="line">iotdbctl cluster restart default_cluster <span class="token parameter variable">-N</span> prometheus</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="cluster-shrink-command" tabindex="-1"><a class="header-anchor" href="#cluster-shrink-command"><span>Cluster shrink command</span></a></h4><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line"><span class="token comment">#Scale down by node name</span></span>
<span class="line">iotdbctl cluster scalein default_cluster <span class="token parameter variable">-N</span> nodename</span>
<span class="line"><span class="token comment">#Scale down according to ip+port (ip+port obtains the only node according to ip+dn_rpc_port in datanode, and obtains the only node according to ip+cn_internal_port in confignode)</span></span>
<span class="line">iotdbctl cluster scalein default_cluster <span class="token parameter variable">-N</span> ip:port</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><p>Find the yaml file in the default location according to cluster-name and obtain the configuration information of <code>confignode_servers</code> and <code>datanode_servers</code></p></li><li><p>Determine whether there is only one confignode node and datanode to be reduced. If there is only one left, the reduction cannot be performed.</p></li><li><p>Then get the node information to shrink according to ip:port or nodename, execute the shrink command, and then destroy the node directory. If the shrink node is <code>data_node</code>, use <code>dn_rpc_address</code> in the yaml file for ip, and use <code>dn_rpc_address</code> in the port. <code>dn_rpc_port</code> in datanode_servers in yaml file.<br> If the shrinking node is <code>config_node</code>, the ip uses <code>cn_internal_address</code> in confignode_servers in the yaml file, and the port uses <code>cn_internal_port</code></p></li></ul><p>Tip: Currently, only one node scaling is supported at a time</p><h4 id="cluster-expansion-command" tabindex="-1"><a class="header-anchor" href="#cluster-expansion-command"><span>Cluster expansion command</span></a></h4><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line">iotdbctl cluster scaleout default_cluster</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ul><li><p>Modify the config/xxx.yaml file to add a datanode node or confignode node</p></li><li><p>Find the yaml file in the default location according to cluster-name and obtain the configuration information of <code>confignode_servers</code> and <code>datanode_servers</code></p></li><li><p>Find the node to be expanded, upload the IoTDB compressed package and jdb package (if the <code>jdk_tar_dir</code> and <code>jdk_deploy_dir</code> values ​​are configured in yaml) and decompress it</p></li><li><p>Generate and upload <code>iotdb-system.properties</code> according to the yaml file node configuration information</p></li><li><p>Execute the command to start the node and verify whether the node is started successfully</p></li></ul><p>Tip: Currently, only one node expansion is supported at a time</p><h4 id="destroy-cluster-command" tabindex="-1"><a class="header-anchor" href="#destroy-cluster-command"><span>destroy cluster command</span></a></h4><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line">iotdbctl cluster destroy default_cluster</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ul><li><p>cluster-name finds the yaml file in the default location</p></li><li><p>Check whether the node is still running based on the node node information in <code>confignode_servers</code>, <code>datanode_servers</code>, <code>grafana</code>, and <code>prometheus</code>.<br> Stop the destroy command if any node is running</p></li><li><p>Delete <code>data</code> in the IoTDB cluster and <code>cn_system_dir</code>, <code>cn_consensus_dir</code> configured in the yaml file<br><code>dn_data_dirs</code>, <code>dn_consensus_dir</code>, <code>dn_system_dir</code>, <code>logs</code>, <code>ext</code>, <code>IoTDB</code> deployment directory,<br> grafana deployment directory and prometheus deployment directory</p></li></ul><p><em>Destroy a single module</em></p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line"><span class="token comment"># Destroy grafana module</span></span>
<span class="line">iotdbctl cluster destroy default_cluster <span class="token parameter variable">-N</span> grafana</span>
<span class="line"><span class="token comment"># Destroy prometheus module</span></span>
<span class="line">iotdbctl cluster destroy default_cluster <span class="token parameter variable">-N</span> prometheus</span>
<span class="line"><span class="token comment"># Destroy iotdb module</span></span>
<span class="line">iotdbctl cluster destroy default_cluster <span class="token parameter variable">-N</span> iotdb</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="distribute-cluster-configuration-commands" tabindex="-1"><a class="header-anchor" href="#distribute-cluster-configuration-commands"><span>Distribute cluster configuration commands</span></a></h4><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line">iotdbctl cluster dist-conf default_cluster</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ul><li><p>Find the yaml file in the default location according to cluster-name and obtain the configuration information of <code>confignode_servers</code>, <code>datanode_servers</code>, <code>grafana</code> and <code>prometheus</code></p></li><li><p>Generate and upload <code>iotdb-system.properties</code> to the specified node according to the node configuration information of the yaml file</p></li></ul><h4 id="hot-load-cluster-configuration-command" tabindex="-1"><a class="header-anchor" href="#hot-load-cluster-configuration-command"><span>Hot load cluster configuration command</span></a></h4><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line">iotdbctl cluster reload default_cluster</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ul><li><p>Find the yaml file in the default location according to cluster-name and obtain the configuration information of <code>confignode_servers</code> and <code>datanode_servers</code></p></li><li><p>Execute <code>load configuration</code> in the cli according to the node configuration information of the yaml file.</p></li></ul><h4 id="cluster-node-log-backup" tabindex="-1"><a class="header-anchor" href="#cluster-node-log-backup"><span>Cluster node log backup</span></a></h4><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line">iotdbctl cluster dumplog default_cluster <span class="token parameter variable">-N</span> datanode_1,confignode_1  <span class="token parameter variable">-startdate</span> <span class="token string">&#39;2023-04-11&#39;</span> <span class="token parameter variable">-enddate</span> <span class="token string">&#39;2023-04-26&#39;</span> <span class="token parameter variable">-h</span> <span class="token number">192.168</span>.9.48 <span class="token parameter variable">-p</span> <span class="token number">36000</span> <span class="token parameter variable">-u</span> root <span class="token parameter variable">-pw</span> root <span class="token parameter variable">-path</span> <span class="token string">&#39;/iotdb/logs&#39;</span> <span class="token parameter variable">-logs</span> <span class="token string">&#39;/root/data/db/iotdb/logs&#39;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ul><li><p>Find the yaml file in the default location based on cluster-name</p></li><li><p>This command will verify the existence of datanode_1 and confignode_1 according to the yaml file, and then back up the log data of the specified node datanode_1 and confignode_1 to the specified service <code>192.168.9.48</code> port 36000 according to the configured start and end dates (startdate&lt;=logtime&lt;=enddate) The data backup path is <code>/iotdb/logs</code>, and the IoTDB log storage path is <code>/root/data/db/iotdb/logs</code> (not required, if you do not fill in -logs xxx, the default is to backup logs from the IoTDB installation path /logs )</p></li></ul><table><thead><tr><th>command</th><th>description</th><th>required</th></tr></thead><tbody><tr><td>-h</td><td>backup data server ip</td><td>NO</td></tr><tr><td>-u</td><td>backup data server username</td><td>NO</td></tr><tr><td>-pw</td><td>backup data machine password</td><td>NO</td></tr><tr><td>-p</td><td>backup data machine port(default 22)</td><td>NO</td></tr><tr><td>-path</td><td>path to backup data (default current path)</td><td>NO</td></tr><tr><td>-loglevel</td><td>Log levels include all, info, error, warn (default is all)</td><td>NO</td></tr><tr><td>-l</td><td>speed limit (default 1024 speed limit range 0 to 104857601 unit Kbit/s)</td><td>NO</td></tr><tr><td>-N</td><td>multiple configuration file cluster names are separated by commas.</td><td>YES</td></tr><tr><td>-startdate</td><td>start time (including default 1970-01-01)</td><td>NO</td></tr><tr><td>-enddate</td><td>end time (included)</td><td>NO</td></tr><tr><td>-logs</td><td>IoTDB log storage path, the default is ({iotdb}/logs)）</td><td>NO</td></tr></tbody></table><h4 id="cluster-data-backup" tabindex="-1"><a class="header-anchor" href="#cluster-data-backup"><span>Cluster data backup</span></a></h4><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line">iotdbctl cluster dumpdata default_cluster <span class="token parameter variable">-granularity</span> partition  <span class="token parameter variable">-startdate</span> <span class="token string">&#39;2023-04-11&#39;</span> <span class="token parameter variable">-enddate</span> <span class="token string">&#39;2023-04-26&#39;</span> <span class="token parameter variable">-h</span> <span class="token number">192.168</span>.9.48 <span class="token parameter variable">-p</span> <span class="token number">36000</span> <span class="token parameter variable">-u</span> root <span class="token parameter variable">-pw</span> root <span class="token parameter variable">-path</span> <span class="token string">&#39;/iotdb/datas&#39;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ul><li>This command will obtain the leader node based on the yaml file, and then back up the data to the /iotdb/datas directory on the 192.168.9.48 service based on the start and end dates (startdate&lt;=logtime&lt;=enddate)</li></ul><table><thead><tr><th>command</th><th>description</th><th>required</th></tr></thead><tbody><tr><td>-h</td><td>backup data server ip</td><td>NO</td></tr><tr><td>-u</td><td>backup data server username</td><td>NO</td></tr><tr><td>-pw</td><td>backup data machine password</td><td>NO</td></tr><tr><td>-p</td><td>backup data machine port(default 22)</td><td>NO</td></tr><tr><td>-path</td><td>path to backup data (default current path)</td><td>NO</td></tr><tr><td>-granularity</td><td>partition</td><td>YES</td></tr><tr><td>-l</td><td>speed limit (default 1024 speed limit range 0 to 104857601 unit Kbit/s)</td><td>NO</td></tr><tr><td>-startdate</td><td>start time (including default 1970-01-01)</td><td>YES</td></tr><tr><td>-enddate</td><td>end time (included)</td><td>YES</td></tr></tbody></table><h4 id="cluster-upgrade-1" tabindex="-1"><a class="header-anchor" href="#cluster-upgrade-1"><span>Cluster upgrade</span></a></h4><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line">iotdbctl cluster dist-lib default_cluster</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ul><li><p>Find the yaml file in the default location according to cluster-name and obtain the configuration information of <code>confignode_servers</code> and <code>datanode_servers</code></p></li><li><p>Upload lib package</p></li></ul><p>Note that after performing the upgrade, please restart IoTDB for it to take effect.</p><h4 id="cluster-initialization" tabindex="-1"><a class="header-anchor" href="#cluster-initialization"><span>Cluster initialization</span></a></h4><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line">iotdbctl cluster init default_cluster</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ul><li>Find the yaml file in the default location according to cluster-name and obtain the configuration information of <code>confignode_servers</code>, <code>datanode_servers</code>, <code>grafana</code> and <code>prometheus</code></li><li>Initialize cluster configuration</li></ul><h4 id="view-cluster-process-status" tabindex="-1"><a class="header-anchor" href="#view-cluster-process-status"><span>View cluster process status</span></a></h4><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line">iotdbctl cluster status default_cluster</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ul><li>Find the yaml file in the default location according to cluster-name and obtain the configuration information of <code>confignode_servers</code>, <code>datanode_servers</code>, <code>grafana</code> and <code>prometheus</code></li><li>Display the survival status of each node in the cluster</li></ul><h4 id="cluster-authorization-activation" tabindex="-1"><a class="header-anchor" href="#cluster-authorization-activation"><span>Cluster authorization activation</span></a></h4><p>Cluster activation is activated by entering the activation code by default, or by using the - op license_path activated through license path</p><ul><li>Default activation method</li></ul><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line">iotdbctl cluster activate default_cluster</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ul><li>Find the yaml file in the default location based on <code>cluster-name</code> and obtain the <code>confignode_servers</code> configuration information</li><li>Obtain the machine code inside</li><li>Waiting for activation code input</li></ul><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line">Machine code:</span>
<span class="line">Kt8NfGP73FbM8g4Vty+V9qU5lgLvwqHEF3KbLN/SGWYCJ61eFRKtqy7RS/jw03lHXt4MwdidrZJ<span class="token operator">==</span></span>
<span class="line">JHQpXu97IKwv3rzbaDwoPLUuzNCm5aEeC9ZEBW8ndKgGXEGzMms25+u<span class="token operator">==</span></span>
<span class="line">Please enter the activation code: </span>
<span class="line"><span class="token assign-left variable">JHQpXu97IKwv3rzbaDwoPLUuzNCm5aEeC9ZEBW8ndKg</span><span class="token operator">=</span>，lTF1Dur1AElXIi/5jPV9h0XCm8ziPd9/R+tMYLsze1oAPxE87+Nwws<span class="token operator">=</span></span>
<span class="line">Activation successful</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>Activate a node</li></ul><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line">iotdbctl cluster activate default_cluster <span class="token parameter variable">-N</span> confignode1</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ul><li>Activate through license path</li></ul><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line">iotdbctl cluster activate default_cluster <span class="token parameter variable">-op</span> license_path </span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ul><li>Find the yaml file in the default location based on <code>cluster-name</code> and obtain the <code>confignode_servers</code> configuration information</li><li>Obtain the machine code inside</li><li>Waiting for activation code input</li></ul><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line">Machine code:</span>
<span class="line">Kt8NfGP73FbM8g4Vty+V9qU5lgLvwqHEF3KbLN/SGWYCJ61eFRKtqy7RS/jw03lHXt4MwdidrZJ<span class="token operator">==</span></span>
<span class="line">JHQpXu97IKwv3rzbaDwoPLUuzNCm5aEeC9ZEBW8ndKgGXEGzMms25+u<span class="token operator">==</span></span>
<span class="line">Please enter the activation code: </span>
<span class="line"><span class="token assign-left variable">JHQpXu97IKwv3rzbaDwoPLUuzNCm5aEeC9ZEBW8ndKg</span><span class="token operator">=</span>，lTF1Dur1AElXIi/5jPV9h0XCm8ziPd9/R+tMYLsze1oAPxE87+Nwws<span class="token operator">=</span></span>
<span class="line">Activation successful</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>Activate a node</li></ul><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line">iotdbctl cluster activate default_cluster <span class="token parameter variable">-N</span> confignode1 <span class="token parameter variable">-op</span> license_path</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h4 id="cluster-health-check" tabindex="-1"><a class="header-anchor" href="#cluster-health-check"><span>Cluster Health Check</span></a></h4><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line">iotdbctl cluster health_check default_cluster</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ul><li>Locate the yaml file in the default location based on the cluster-name to retrieve confignode_servers and datanode_servers configuration information.</li><li>Execute health_check.sh on each node.</li><li>Single Node Health Check</li></ul><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line">iotdbctl cluster health_check default_cluster <span class="token parameter variable">-N</span> datanode_1</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ul><li>Locate the yaml file in the default location based on the cluster-name to retrieve datanode_servers configuration information.</li><li>Execute health_check.sh on datanode1.</li></ul><h4 id="cluster-shutdown-backup" tabindex="-1"><a class="header-anchor" href="#cluster-shutdown-backup"><span>Cluster Shutdown Backup</span></a></h4><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line">iotdbctl cluster backup default_cluster</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ul><li><p>Locate the yaml file in the default location based on the cluster-name to retrieve confignode_servers and datanode_servers configuration information.</p></li><li><p>Execute <a href="http://backup.sh" target="_blank" rel="noopener noreferrer">backup.sh</a> on each node</p></li><li><p>Single Node Backup</p></li></ul><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line">iotdbctl cluster backup default_cluster <span class="token parameter variable">-N</span> datanode_1</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ul><li>Locate the yaml file in the default location based on the cluster-name to retrieve datanode_servers configuration information.</li><li>Execute <a href="http://backup.sh" target="_blank" rel="noopener noreferrer">backup.sh</a> on datanode1.<br> Note: Multi-node deployment on a single machine only supports quick mode.</li></ul><h4 id="cluster-metadata-import" tabindex="-1"><a class="header-anchor" href="#cluster-metadata-import"><span>Cluster Metadata Import</span></a></h4><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line">iotdbctl cluster importschema default_cluster <span class="token parameter variable">-N</span> datanode1 <span class="token parameter variable">-param</span> <span class="token string">&quot;-s ./dump0.csv -fd ./failed/ -lpf 10000&quot;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ul><li>Locate the yaml file in the default location based on the cluster-name to retrieve datanode_servers configuration information.</li><li>Execute metadata import with <a href="http://import-schema.sh" target="_blank" rel="noopener noreferrer">import-schema.sh</a> on datanode1.</li><li>Parameters for -param are as follows:</li></ul><table><thead><tr><th>command</th><th>description</th><th>required</th></tr></thead><tbody><tr><td>-s</td><td>Specify the data file to be imported. You can specify a file or a directory. If a directory is specified, all files with a .csv extension in the directory will be imported in bulk.</td><td>YES</td></tr><tr><td>-fd</td><td>Specify a directory to store failed import files. If this parameter is not specified, failed files will be saved in the source data directory with the extension .failed added to the original filename.</td><td>No</td></tr><tr><td>-lpf</td><td>Specify the number of lines written to each failed import file. The default is 10000.</td><td>NO</td></tr></tbody></table><h4 id="cluster-metadata-export" tabindex="-1"><a class="header-anchor" href="#cluster-metadata-export"><span>Cluster Metadata Export</span></a></h4><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line">iotdbctl cluster exportschema default_cluster <span class="token parameter variable">-N</span> datanode1 <span class="token parameter variable">-param</span> <span class="token string">&quot;-t ./ -pf ./pattern.txt -lpf 10 -t 10000&quot;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ul><li>Locate the yaml file in the default location based on the cluster-name to retrieve datanode_servers configuration information.</li><li>Execute metadata export with <a href="http://export-schema.sh" target="_blank" rel="noopener noreferrer">export-schema.sh</a> on datanode1.</li><li>Parameters for -param are as follows:</li></ul><table><thead><tr><th>command</th><th>description</th><th>required</th></tr></thead><tbody><tr><td>-t</td><td>Specify the output path for the exported CSV file.</td><td>YES</td></tr><tr><td>-path</td><td>Specify the path pattern for exporting metadata. If this parameter is specified, the -s parameter will be ignored. Example: root.stock.**</td><td>NO</td></tr><tr><td>-pf</td><td>If -path is not specified, this parameter must be specified. It designates the file path containing the metadata paths to be exported, supporting txt file format. Each path to be exported is on a new line.</td><td>NO</td></tr><tr><td>-lpf</td><td>Specify the maximum number of lines for the exported dump file. The default is 10000.</td><td>NO</td></tr><tr><td>-timeout</td><td>Specify the timeout for session queries in milliseconds.</td><td>NO</td></tr></tbody></table><h3 id="introduction-to-cluster-deployment-tool-samples" tabindex="-1"><a class="header-anchor" href="#introduction-to-cluster-deployment-tool-samples"><span>Introduction to Cluster Deployment Tool Samples</span></a></h3><p>In the cluster deployment tool installation directory config/example, there are three yaml examples. If necessary, you can copy them to config and modify them.</p><table><thead><tr><th>name</th><th>description</th></tr></thead><tbody><tr><td>default_1c1d.yaml</td><td>1 confignode and 1 datanode configuration example</td></tr><tr><td>default_3c3d.yaml</td><td>3 confignode and 3 datanode configuration samples</td></tr><tr><td>default_3c3d_grafa_prome</td><td>3 confignode and 3 datanode, Grafana, Prometheus configuration examples</td></tr></tbody></table><h2 id="iotdb-data-directory-overview-tool" tabindex="-1"><a class="header-anchor" href="#iotdb-data-directory-overview-tool"><span>IoTDB Data Directory Overview Tool</span></a></h2><p>IoTDB data directory overview tool is used to print an overview of the IoTDB data directory structure. The location is tools/tsfile/print-iotdb-data-dir.</p><h3 id="usage" tabindex="-1"><a class="header-anchor" href="#usage"><span>Usage</span></a></h3><ul><li>For Windows:</li></ul><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line">.<span class="token punctuation">\</span>print-iotdb-data-dir.bat <span class="token operator">&lt;</span>IoTDB data folder path, separated by commas <span class="token keyword">if</span> there are multiple folders<span class="token operator">&gt;</span> <span class="token punctuation">(</span><span class="token operator">&lt;</span>storage path of the output overview file<span class="token operator">&gt;</span><span class="token punctuation">)</span> </span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ul><li>For Linux or MacOs:</li></ul><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line">./print-iotdb-data-dir.sh <span class="token operator">&lt;</span>IoTDB data folder path, separated by commas <span class="token keyword">if</span> there are multiple folders<span class="token operator">&gt;</span> <span class="token punctuation">(</span><span class="token operator">&lt;</span>storage path of the output overview file<span class="token operator">&gt;</span><span class="token punctuation">)</span> </span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>Note: if the storage path of the output overview file is not set, the default relative path &quot;IoTDB_data_dir_overview.txt&quot; will be used.</p><h3 id="example" tabindex="-1"><a class="header-anchor" href="#example"><span>Example</span></a></h3><p>Use Windows in this example:</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line">.<span class="token punctuation">\</span>print-iotdb-data-dir.bat D:<span class="token punctuation">\</span>github<span class="token punctuation">\</span>master<span class="token punctuation">\</span>iotdb<span class="token punctuation">\</span>data<span class="token punctuation">\</span>datanode<span class="token punctuation">\</span>data</span>
<span class="line">```````````````````````<span class="token variable"><span class="token variable">`</span></span>
<span class="line">Starting Printing the IoTDB Data Directory Overview</span>
<span class="line"><span class="token variable">`</span></span>```````````````````````</span>
<span class="line">output save path:IoTDB_data_dir_overview.txt</span>
<span class="line">data <span class="token function">dir</span> num:1</span>
<span class="line"><span class="token number">143</span>  <span class="token punctuation">[</span>main<span class="token punctuation">]</span> WARN  o.a.i.t.c.conf.TSFileDescriptor - not found iotdb-system.properties, use the default configs.</span>
<span class="line"><span class="token operator">|</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span></span>
<span class="line"><span class="token operator">|</span>D:<span class="token punctuation">\</span>github<span class="token punctuation">\</span>master<span class="token punctuation">\</span>iotdb<span class="token punctuation">\</span>data<span class="token punctuation">\</span>datanode<span class="token punctuation">\</span>data</span>
<span class="line"><span class="token operator">|</span>--sequence</span>
<span class="line"><span class="token operator">|</span>  <span class="token operator">|</span>--root.redirect0</span>
<span class="line"><span class="token operator">|</span>  <span class="token operator">|</span>  <span class="token operator">|</span>--1</span>
<span class="line"><span class="token operator">|</span>  <span class="token operator">|</span>  <span class="token operator">|</span>  <span class="token operator">|</span>--0</span>
<span class="line"><span class="token operator">|</span>  <span class="token operator">|</span>--root.redirect1</span>
<span class="line"><span class="token operator">|</span>  <span class="token operator">|</span>  <span class="token operator">|</span>--2</span>
<span class="line"><span class="token operator">|</span>  <span class="token operator">|</span>  <span class="token operator">|</span>  <span class="token operator">|</span>--0</span>
<span class="line"><span class="token operator">|</span>  <span class="token operator">|</span>--root.redirect2</span>
<span class="line"><span class="token operator">|</span>  <span class="token operator">|</span>  <span class="token operator">|</span>--3</span>
<span class="line"><span class="token operator">|</span>  <span class="token operator">|</span>  <span class="token operator">|</span>  <span class="token operator">|</span>--0</span>
<span class="line"><span class="token operator">|</span>  <span class="token operator">|</span>--root.redirect3</span>
<span class="line"><span class="token operator">|</span>  <span class="token operator">|</span>  <span class="token operator">|</span>--4</span>
<span class="line"><span class="token operator">|</span>  <span class="token operator">|</span>  <span class="token operator">|</span>  <span class="token operator">|</span>--0</span>
<span class="line"><span class="token operator">|</span>  <span class="token operator">|</span>--root.redirect4</span>
<span class="line"><span class="token operator">|</span>  <span class="token operator">|</span>  <span class="token operator">|</span>--5</span>
<span class="line"><span class="token operator">|</span>  <span class="token operator">|</span>  <span class="token operator">|</span>  <span class="token operator">|</span>--0</span>
<span class="line"><span class="token operator">|</span>  <span class="token operator">|</span>--root.redirect5</span>
<span class="line"><span class="token operator">|</span>  <span class="token operator">|</span>  <span class="token operator">|</span>--6</span>
<span class="line"><span class="token operator">|</span>  <span class="token operator">|</span>  <span class="token operator">|</span>  <span class="token operator">|</span>--0</span>
<span class="line"><span class="token operator">|</span>  <span class="token operator">|</span>--root.sg1</span>
<span class="line"><span class="token operator">|</span>  <span class="token operator">|</span>  <span class="token operator">|</span>--0</span>
<span class="line"><span class="token operator">|</span>  <span class="token operator">|</span>  <span class="token operator">|</span>  <span class="token operator">|</span>--0</span>
<span class="line"><span class="token operator">|</span>  <span class="token operator">|</span>  <span class="token operator">|</span>  <span class="token operator">|</span>--2760</span>
<span class="line"><span class="token operator">|</span>--unsequence</span>
<span class="line"><span class="token operator">|</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="tsfile-sketch-tool" tabindex="-1"><a class="header-anchor" href="#tsfile-sketch-tool"><span>TsFile Sketch Tool</span></a></h2><p>TsFile sketch tool is used to print the content of a TsFile in sketch mode. The location is tools/tsfile/print-tsfile.</p><h3 id="usage-1" tabindex="-1"><a class="header-anchor" href="#usage-1"><span>Usage</span></a></h3><ul><li>For Windows:</li></ul><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre><code><span class="line">.\print-tsfile-sketch.bat &lt;TsFile path&gt; (&lt;storage path of the output sketch file&gt;) </span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ul><li>For Linux or MacOs:</li></ul><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre><code><span class="line">./print-tsfile-sketch.sh &lt;TsFile path&gt; (&lt;storage path of the output sketch file&gt;) </span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>Note: if the storage path of the output sketch file is not set, the default relative path &quot;TsFile_sketch_view.txt&quot; will be used.</p><h3 id="example-1" tabindex="-1"><a class="header-anchor" href="#example-1"><span>Example</span></a></h3><p>Use Windows in this example:</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line">.<span class="token punctuation">\</span>print-tsfile.bat D:<span class="token punctuation">\</span>github<span class="token punctuation">\</span>master<span class="token punctuation">\</span><span class="token number">1669359533965</span>-1-0-0.tsfile D:<span class="token punctuation">\</span>github<span class="token punctuation">\</span>master<span class="token punctuation">\</span>sketch.txt</span>
<span class="line">```````````````````````<span class="token variable"><span class="token variable">`</span></span>
<span class="line">Starting Printing the TsFile Sketch</span>
<span class="line"><span class="token variable">`</span></span>```````````````````````</span>
<span class="line">TsFile path:D:<span class="token punctuation">\</span>github<span class="token punctuation">\</span>master<span class="token punctuation">\</span><span class="token number">1669359533965</span>-1-0-0.tsfile</span>
<span class="line">Sketch save path:D:<span class="token punctuation">\</span>github<span class="token punctuation">\</span>master<span class="token punctuation">\</span>sketch.txt</span>
<span class="line"><span class="token number">148</span>  <span class="token punctuation">[</span>main<span class="token punctuation">]</span> WARN  o.a.i.t.c.conf.TSFileDescriptor - not found iotdb-system.properties, use the default configs.</span>
<span class="line">-------------------------------- TsFile Sketch --------------------------------</span>
<span class="line"><span class="token function">file</span> path: D:<span class="token punctuation">\</span>github<span class="token punctuation">\</span>master<span class="token punctuation">\</span><span class="token number">1669359533965</span>-1-0-0.tsfile</span>
<span class="line"><span class="token function">file</span> length: <span class="token number">2974</span></span>
<span class="line"></span>
<span class="line">            POSITION<span class="token operator">|</span>   CONTENT</span>
<span class="line">            --------    -------</span>
<span class="line">                   <span class="token number">0</span><span class="token operator">|</span>   <span class="token punctuation">[</span>magic head<span class="token punctuation">]</span> TsFile</span>
<span class="line">                   <span class="token number">6</span><span class="token operator">|</span>   <span class="token punctuation">[</span>version number<span class="token punctuation">]</span> <span class="token number">3</span></span>
<span class="line"><span class="token operator">||</span><span class="token operator">||</span><span class="token operator">||</span><span class="token operator">||</span><span class="token operator">||</span><span class="token operator">||</span><span class="token operator">||</span><span class="token operator">||</span><span class="token operator">||</span><span class="token operator">||</span><span class="token operator">|</span> <span class="token punctuation">[</span>Chunk Group<span class="token punctuation">]</span> of root.sg1.d1, num of Chunks:3</span>
<span class="line">                   <span class="token number">7</span><span class="token operator">|</span>   <span class="token punctuation">[</span>Chunk Group Header<span class="token punctuation">]</span></span>
<span class="line">                    <span class="token operator">|</span>           <span class="token punctuation">[</span>marker<span class="token punctuation">]</span> <span class="token number">0</span></span>
<span class="line">                    <span class="token operator">|</span>           <span class="token punctuation">[</span>deviceID<span class="token punctuation">]</span> root.sg1.d1</span>
<span class="line">                  <span class="token number">20</span><span class="token operator">|</span>   <span class="token punctuation">[</span>Chunk<span class="token punctuation">]</span> of root.sg1.d1.s1, startTime: <span class="token number">1669359533948</span> endTime: <span class="token number">1669359534047</span> count: <span class="token number">100</span> <span class="token punctuation">[</span>minValue:-9032452783138882770,maxValue:9117677033041335123,firstValue:7068645577795875906,lastValue:-5833792328174747265,sumValue:5.795959009889246E19<span class="token punctuation">]</span></span>
<span class="line">                    <span class="token operator">|</span>           <span class="token punctuation">[</span>chunk header<span class="token punctuation">]</span> <span class="token assign-left variable">marker</span><span class="token operator">=</span><span class="token number">5</span>, <span class="token assign-left variable">measurementID</span><span class="token operator">=</span>s1, <span class="token assign-left variable">dataSize</span><span class="token operator">=</span><span class="token number">864</span>, <span class="token assign-left variable">dataType</span><span class="token operator">=</span>INT64, <span class="token assign-left variable">compressionType</span><span class="token operator">=</span>SNAPPY, <span class="token assign-left variable">encodingType</span><span class="token operator">=</span>RLE</span>
<span class="line">                    <span class="token operator">|</span>           <span class="token punctuation">[</span>page<span class="token punctuation">]</span>  UncompressedSize:862, CompressedSize:860</span>
<span class="line">                 <span class="token number">893</span><span class="token operator">|</span>   <span class="token punctuation">[</span>Chunk<span class="token punctuation">]</span> of root.sg1.d1.s2, startTime: <span class="token number">1669359533948</span> endTime: <span class="token number">1669359534047</span> count: <span class="token number">100</span> <span class="token punctuation">[</span>minValue:-8806861312244965718,maxValue:9192550740609853234,firstValue:1150295375739457693,lastValue:-2839553973758938646,sumValue:8.2822564314572677E18<span class="token punctuation">]</span></span>
<span class="line">                    <span class="token operator">|</span>           <span class="token punctuation">[</span>chunk header<span class="token punctuation">]</span> <span class="token assign-left variable">marker</span><span class="token operator">=</span><span class="token number">5</span>, <span class="token assign-left variable">measurementID</span><span class="token operator">=</span>s2, <span class="token assign-left variable">dataSize</span><span class="token operator">=</span><span class="token number">864</span>, <span class="token assign-left variable">dataType</span><span class="token operator">=</span>INT64, <span class="token assign-left variable">compressionType</span><span class="token operator">=</span>SNAPPY, <span class="token assign-left variable">encodingType</span><span class="token operator">=</span>RLE</span>
<span class="line">                    <span class="token operator">|</span>           <span class="token punctuation">[</span>page<span class="token punctuation">]</span>  UncompressedSize:862, CompressedSize:860</span>
<span class="line">                <span class="token number">1766</span><span class="token operator">|</span>   <span class="token punctuation">[</span>Chunk<span class="token punctuation">]</span> of root.sg1.d1.s3, startTime: <span class="token number">1669359533948</span> endTime: <span class="token number">1669359534047</span> count: <span class="token number">100</span> <span class="token punctuation">[</span>minValue:-9076669333460323191,maxValue:9175278522960949594,firstValue:2537897870994797700,lastValue:7194625271253769397,sumValue:-2.126008424849926E19<span class="token punctuation">]</span></span>
<span class="line">                    <span class="token operator">|</span>           <span class="token punctuation">[</span>chunk header<span class="token punctuation">]</span> <span class="token assign-left variable">marker</span><span class="token operator">=</span><span class="token number">5</span>, <span class="token assign-left variable">measurementID</span><span class="token operator">=</span>s3, <span class="token assign-left variable">dataSize</span><span class="token operator">=</span><span class="token number">864</span>, <span class="token assign-left variable">dataType</span><span class="token operator">=</span>INT64, <span class="token assign-left variable">compressionType</span><span class="token operator">=</span>SNAPPY, <span class="token assign-left variable">encodingType</span><span class="token operator">=</span>RLE</span>
<span class="line">                    <span class="token operator">|</span>           <span class="token punctuation">[</span>page<span class="token punctuation">]</span>  UncompressedSize:862, CompressedSize:860</span>
<span class="line"><span class="token operator">||</span><span class="token operator">||</span><span class="token operator">||</span><span class="token operator">||</span><span class="token operator">||</span><span class="token operator">||</span><span class="token operator">||</span><span class="token operator">||</span><span class="token operator">||</span><span class="token operator">||</span><span class="token operator">|</span> <span class="token punctuation">[</span>Chunk Group<span class="token punctuation">]</span> of root.sg1.d1 ends</span>
<span class="line">                <span class="token number">2656</span><span class="token operator">|</span>   <span class="token punctuation">[</span>marker<span class="token punctuation">]</span> <span class="token number">2</span></span>
<span class="line">                <span class="token number">2657</span><span class="token operator">|</span>   <span class="token punctuation">[</span>TimeseriesIndex<span class="token punctuation">]</span> of root.sg1.d1.s1, tsDataType:INT64, startTime: <span class="token number">1669359533948</span> endTime: <span class="token number">1669359534047</span> count: <span class="token number">100</span> <span class="token punctuation">[</span>minValue:-9032452783138882770,maxValue:9117677033041335123,firstValue:7068645577795875906,lastValue:-5833792328174747265,sumValue:5.795959009889246E19<span class="token punctuation">]</span></span>
<span class="line">                    <span class="token operator">|</span>           <span class="token punctuation">[</span>ChunkIndex<span class="token punctuation">]</span> <span class="token assign-left variable">offset</span><span class="token operator">=</span><span class="token number">20</span></span>
<span class="line">                <span class="token number">2728</span><span class="token operator">|</span>   <span class="token punctuation">[</span>TimeseriesIndex<span class="token punctuation">]</span> of root.sg1.d1.s2, tsDataType:INT64, startTime: <span class="token number">1669359533948</span> endTime: <span class="token number">1669359534047</span> count: <span class="token number">100</span> <span class="token punctuation">[</span>minValue:-8806861312244965718,maxValue:9192550740609853234,firstValue:1150295375739457693,lastValue:-2839553973758938646,sumValue:8.2822564314572677E18<span class="token punctuation">]</span></span>
<span class="line">                    <span class="token operator">|</span>           <span class="token punctuation">[</span>ChunkIndex<span class="token punctuation">]</span> <span class="token assign-left variable">offset</span><span class="token operator">=</span><span class="token number">893</span></span>
<span class="line">                <span class="token number">2799</span><span class="token operator">|</span>   <span class="token punctuation">[</span>TimeseriesIndex<span class="token punctuation">]</span> of root.sg1.d1.s3, tsDataType:INT64, startTime: <span class="token number">1669359533948</span> endTime: <span class="token number">1669359534047</span> count: <span class="token number">100</span> <span class="token punctuation">[</span>minValue:-9076669333460323191,maxValue:9175278522960949594,firstValue:2537897870994797700,lastValue:7194625271253769397,sumValue:-2.126008424849926E19<span class="token punctuation">]</span></span>
<span class="line">                    <span class="token operator">|</span>           <span class="token punctuation">[</span>ChunkIndex<span class="token punctuation">]</span> <span class="token assign-left variable">offset</span><span class="token operator">=</span><span class="token number">1766</span></span>
<span class="line">                <span class="token number">2870</span><span class="token operator">|</span>   <span class="token punctuation">[</span>IndexOfTimerseriesIndex Node<span class="token punctuation">]</span> <span class="token assign-left variable">type</span><span class="token operator">=</span>LEAF_MEASUREMENT</span>
<span class="line">                    <span class="token operator">|</span>           <span class="token operator">&lt;</span>s1, <span class="token number">265</span><span class="token operator"><span class="token file-descriptor important">7</span>&gt;</span></span>
<span class="line">                    <span class="token operator">|</span>           <span class="token operator">&lt;</span>endOffset, <span class="token number">287</span><span class="token operator"><span class="token file-descriptor important">0</span>&gt;</span></span>
<span class="line"><span class="token operator">||</span><span class="token operator">||</span><span class="token operator">||</span><span class="token operator">||</span><span class="token operator">||</span><span class="token operator">||</span><span class="token operator">||</span><span class="token operator">||</span><span class="token operator">||</span><span class="token operator">||</span><span class="token operator">|</span> <span class="token punctuation">[</span>TsFileMetadata<span class="token punctuation">]</span> begins</span>
<span class="line">                <span class="token number">2891</span><span class="token operator">|</span>   <span class="token punctuation">[</span>IndexOfTimerseriesIndex Node<span class="token punctuation">]</span> <span class="token assign-left variable">type</span><span class="token operator">=</span>LEAF_DEVICE</span>
<span class="line">                    <span class="token operator">|</span>           <span class="token operator">&lt;</span>root.sg1.d1, <span class="token number">287</span><span class="token operator"><span class="token file-descriptor important">0</span>&gt;</span></span>
<span class="line">                    <span class="token operator">|</span>           <span class="token operator">&lt;</span>endOffset, <span class="token number">289</span><span class="token operator"><span class="token file-descriptor important">1</span>&gt;</span></span>
<span class="line">                    <span class="token operator">|</span>   <span class="token punctuation">[</span>meta offset<span class="token punctuation">]</span> <span class="token number">2656</span></span>
<span class="line">                    <span class="token operator">|</span>   <span class="token punctuation">[</span>bloom filter<span class="token punctuation">]</span> bit vector byte array <span class="token assign-left variable">length</span><span class="token operator">=</span><span class="token number">31</span>, <span class="token assign-left variable">filterSize</span><span class="token operator">=</span><span class="token number">256</span>, <span class="token assign-left variable">hashFunctionSize</span><span class="token operator">=</span><span class="token number">5</span></span>
<span class="line"><span class="token operator">||</span><span class="token operator">||</span><span class="token operator">||</span><span class="token operator">||</span><span class="token operator">||</span><span class="token operator">||</span><span class="token operator">||</span><span class="token operator">||</span><span class="token operator">||</span><span class="token operator">||</span><span class="token operator">|</span> <span class="token punctuation">[</span>TsFileMetadata<span class="token punctuation">]</span> ends</span>
<span class="line">                <span class="token number">2964</span><span class="token operator">|</span>   <span class="token punctuation">[</span>TsFileMetadataSize<span class="token punctuation">]</span> <span class="token number">73</span></span>
<span class="line">                <span class="token number">2968</span><span class="token operator">|</span>   <span class="token punctuation">[</span>magic tail<span class="token punctuation">]</span> TsFile</span>
<span class="line">                <span class="token number">2974</span><span class="token operator">|</span>   END of TsFile</span>
<span class="line">---------------------------- IndexOfTimerseriesIndex Tree -----------------------------</span>
<span class="line">        <span class="token punctuation">[</span>MetadataIndex:LEAF_DEVICE<span class="token punctuation">]</span></span>
<span class="line">        └──────<span class="token punctuation">[</span>root.sg1.d1,2870<span class="token punctuation">]</span></span>
<span class="line">                        <span class="token punctuation">[</span>MetadataIndex:LEAF_MEASUREMENT<span class="token punctuation">]</span></span>
<span class="line">                        └──────<span class="token punctuation">[</span>s1,2657<span class="token punctuation">]</span></span>
<span class="line">---------------------------------- TsFile Sketch End ----------------------------------</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Explanations:</p><ul><li>Separated by &quot;|&quot;, the left is the actual position in the TsFile, and the right is the summary content.</li><li>&quot;||||||||||||||||||||&quot; is the guide information added to enhance readability, not the actual data stored in TsFile.</li><li>The last printed &quot;IndexOfTimerseriesIndex Tree&quot; is a reorganization of the metadata index tree at the end of the TsFile, which is convenient for intuitive understanding, and again not the actual data stored in TsFile.</li></ul><h2 id="tsfile-resource-sketch-tool" tabindex="-1"><a class="header-anchor" href="#tsfile-resource-sketch-tool"><span>TsFile Resource Sketch Tool</span></a></h2><p>TsFile resource sketch tool is used to print the content of a TsFile resource file. The location is tools/tsfile/print-tsfile-resource-files.</p><h3 id="usage-2" tabindex="-1"><a class="header-anchor" href="#usage-2"><span>Usage</span></a></h3><ul><li>For Windows:</li></ul><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line">.<span class="token punctuation">\</span>print-tsfile-resource-files.bat <span class="token operator">&lt;</span>path of the parent directory of the TsFile resource files, or path of a TsFile resource file<span class="token operator">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ul><li>For Linux or MacOs:</li></ul><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre><code><span class="line">./print-tsfile-resource-files.sh &lt;path of the parent directory of the TsFile resource files, or path of a TsFile resource file&gt; </span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="example-2" tabindex="-1"><a class="header-anchor" href="#example-2"><span>Example</span></a></h3><p>Use Windows in this example:</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line">.<span class="token punctuation">\</span>print-tsfile-resource-files.bat D:<span class="token punctuation">\</span>github<span class="token punctuation">\</span>master<span class="token punctuation">\</span>iotdb<span class="token punctuation">\</span>data<span class="token punctuation">\</span>datanode<span class="token punctuation">\</span>data<span class="token punctuation">\</span>sequence<span class="token punctuation">\</span>root.sg1<span class="token punctuation">\</span><span class="token number">0</span><span class="token punctuation">\</span><span class="token number">0</span></span>
<span class="line">```````````````````````<span class="token variable"><span class="token variable">`</span></span>
<span class="line">Starting Printing the TsFileResources</span>
<span class="line"><span class="token variable">`</span></span>```````````````````````</span>
<span class="line"><span class="token number">147</span>  <span class="token punctuation">[</span>main<span class="token punctuation">]</span> WARN  o.a.i.t.c.conf.TSFileDescriptor - not found iotdb-system.properties, use the default configs.</span>
<span class="line"><span class="token number">230</span>  <span class="token punctuation">[</span>main<span class="token punctuation">]</span> WARN  o.a.iotdb.db.conf.IoTDBDescriptor - Cannot <span class="token function">find</span> IOTDB_HOME or IOTDB_CONF environment variable when loading config <span class="token function">file</span> iotdb-system.properties, use default configuration</span>
<span class="line"><span class="token number">231</span>  <span class="token punctuation">[</span>main<span class="token punctuation">]</span> WARN  o.a.iotdb.db.conf.IoTDBDescriptor - Couldn<span class="token string">&#39;t load the configuration iotdb-system.properties from any of the known sources.</span>
<span class="line">233  [main] WARN  o.a.iotdb.db.conf.IoTDBDescriptor - Cannot find IOTDB_HOME or IOTDB_CONF environment variable when loading config file iotdb-system.properties, use default configuration</span>
<span class="line">237  [main] WARN  o.a.iotdb.db.conf.IoTDBDescriptor - Couldn&#39;</span>t load the configuration iotdb-system.properties from any of the known sources.</span>
<span class="line">Analyzing D:<span class="token punctuation">\</span>github<span class="token punctuation">\</span>master<span class="token punctuation">\</span>iotdb<span class="token punctuation">\</span>data<span class="token punctuation">\</span>datanode<span class="token punctuation">\</span>data<span class="token punctuation">\</span>sequence<span class="token punctuation">\</span>root.sg1<span class="token punctuation">\</span><span class="token number">0</span><span class="token punctuation">\</span><span class="token number">0</span><span class="token punctuation">\</span><span class="token number">1669359533489</span>-1-0-0.tsfile <span class="token punctuation">..</span>.</span>
<span class="line"></span>
<span class="line">Resource plan index range <span class="token punctuation">[</span><span class="token number">9223372036854775807</span>, -9223372036854775808<span class="token punctuation">]</span></span>
<span class="line">device root.sg1.d1, start <span class="token function">time</span> <span class="token number">0</span> <span class="token punctuation">(</span><span class="token number">1970</span>-01-01T08:00+08:00<span class="token punctuation">[</span>GMT+08:00<span class="token punctuation">]</span><span class="token punctuation">)</span>, end <span class="token function">time</span> <span class="token number">99</span> <span class="token punctuation">(</span><span class="token number">1970</span>-01-01T08:00:00.099+08:00<span class="token punctuation">[</span>GMT+08:00<span class="token punctuation">]</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">Analyzing the resource <span class="token function">file</span> folder D:<span class="token punctuation">\</span>github<span class="token punctuation">\</span>master<span class="token punctuation">\</span>iotdb<span class="token punctuation">\</span>data<span class="token punctuation">\</span>datanode<span class="token punctuation">\</span>data<span class="token punctuation">\</span>sequence<span class="token punctuation">\</span>root.sg1<span class="token punctuation">\</span><span class="token number">0</span><span class="token punctuation">\</span><span class="token number">0</span> finished.</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line">.<span class="token punctuation">\</span>print-tsfile-resource-files.bat D:<span class="token punctuation">\</span>github<span class="token punctuation">\</span>master<span class="token punctuation">\</span>iotdb<span class="token punctuation">\</span>data<span class="token punctuation">\</span>datanode<span class="token punctuation">\</span>data<span class="token punctuation">\</span>sequence<span class="token punctuation">\</span>root.sg1<span class="token punctuation">\</span><span class="token number">0</span><span class="token punctuation">\</span><span class="token number">0</span><span class="token punctuation">\</span><span class="token number">1669359533489</span>-1-0-0.tsfile.resource</span>
<span class="line">```````````````````````<span class="token variable"><span class="token variable">`</span></span>
<span class="line">Starting Printing the TsFileResources</span>
<span class="line"><span class="token variable">`</span></span>```````````````````````</span>
<span class="line"><span class="token number">178</span>  <span class="token punctuation">[</span>main<span class="token punctuation">]</span> WARN  o.a.iotdb.db.conf.IoTDBDescriptor - Cannot <span class="token function">find</span> IOTDB_HOME or IOTDB_CONF environment variable when loading config <span class="token function">file</span> iotdb-system.properties, use default configuration</span>
<span class="line"><span class="token number">186</span>  <span class="token punctuation">[</span>main<span class="token punctuation">]</span> WARN  o.a.i.t.c.conf.TSFileDescriptor - not found iotdb-system.properties, use the default configs.</span>
<span class="line"><span class="token number">187</span>  <span class="token punctuation">[</span>main<span class="token punctuation">]</span> WARN  o.a.iotdb.db.conf.IoTDBDescriptor - Couldn<span class="token string">&#39;t load the configuration iotdb-system.properties from any of the known sources.</span>
<span class="line">188  [main] WARN  o.a.iotdb.db.conf.IoTDBDescriptor - Cannot find IOTDB_HOME or IOTDB_CONF environment variable when loading config file iotdb-system.properties, use default configuration</span>
<span class="line">192  [main] WARN  o.a.iotdb.db.conf.IoTDBDescriptor - Couldn&#39;</span>t load the configuration iotdb-system.properties from any of the known sources.</span>
<span class="line">Analyzing D:<span class="token punctuation">\</span>github<span class="token punctuation">\</span>master<span class="token punctuation">\</span>iotdb<span class="token punctuation">\</span>data<span class="token punctuation">\</span>datanode<span class="token punctuation">\</span>data<span class="token punctuation">\</span>sequence<span class="token punctuation">\</span>root.sg1<span class="token punctuation">\</span><span class="token number">0</span><span class="token punctuation">\</span><span class="token number">0</span><span class="token punctuation">\</span><span class="token number">1669359533489</span>-1-0-0.tsfile <span class="token punctuation">..</span>.</span>
<span class="line"></span>
<span class="line">Resource plan index range <span class="token punctuation">[</span><span class="token number">9223372036854775807</span>, -9223372036854775808<span class="token punctuation">]</span></span>
<span class="line">device root.sg1.d1, start <span class="token function">time</span> <span class="token number">0</span> <span class="token punctuation">(</span><span class="token number">1970</span>-01-01T08:00+08:00<span class="token punctuation">[</span>GMT+08:00<span class="token punctuation">]</span><span class="token punctuation">)</span>, end <span class="token function">time</span> <span class="token number">99</span> <span class="token punctuation">(</span><span class="token number">1970</span>-01-01T08:00:00.099+08:00<span class="token punctuation">[</span>GMT+08:00<span class="token punctuation">]</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">Analyzing the resource <span class="token function">file</span> D:<span class="token punctuation">\</span>github<span class="token punctuation">\</span>master<span class="token punctuation">\</span>iotdb<span class="token punctuation">\</span>data<span class="token punctuation">\</span>datanode<span class="token punctuation">\</span>data<span class="token punctuation">\</span>sequence<span class="token punctuation">\</span>root.sg1<span class="token punctuation">\</span><span class="token number">0</span><span class="token punctuation">\</span><span class="token number">0</span><span class="token punctuation">\</span><span class="token number">1669359533489</span>-1-0-0.tsfile.resource finished.</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><!----><footer class="vp-page-meta"><div class="vp-meta-item edit-link"><a class="auto-link external-link vp-meta-label" href="https://github.com/apache/iotdb-docs/edit/main/src/UserGuide/latest/Tools-System/Maintenance-Tool_timecho.md" aria-label="Found Error? Edit this page on GitHub" rel="noopener noreferrer" target="_blank"><!--[--><svg xmlns="http://www.w3.org/2000/svg" class="icon edit-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="edit icon" name="edit"><path d="M430.818 653.65a60.46 60.46 0 0 1-50.96-93.281l71.69-114.012 7.773-10.365L816.038 80.138A60.46 60.46 0 0 1 859.225 62a60.46 60.46 0 0 1 43.186 18.138l43.186 43.186a60.46 60.46 0 0 1 0 86.373L588.879 565.55l-8.637 8.637-117.466 68.234a60.46 60.46 0 0 1-31.958 11.229z"></path><path d="M728.802 962H252.891A190.883 190.883 0 0 1 62.008 771.98V296.934a190.883 190.883 0 0 1 190.883-192.61h267.754a60.46 60.46 0 0 1 0 120.92H252.891a69.962 69.962 0 0 0-69.098 69.099V771.98a69.962 69.962 0 0 0 69.098 69.098h475.911A69.962 69.962 0 0 0 797.9 771.98V503.363a60.46 60.46 0 1 1 120.922 0V771.98A190.883 190.883 0 0 1 728.802 962z"></path></svg><!--]-->Found Error? Edit this page on GitHub<!----></a></div><div class="vp-meta-item git-info"><div class="update-time"><span class="vp-meta-label">Last update: </span><!----></div><!----></div></footer><!----><!----><!----><!--]--></main><!--]--><!--]--><footer style="padding-bottom:2rem;"><span id="doc-version" style="display:none;">latest</span><p style="text-align:center;color:#909399;font-size:12px;margin:0 30px;">Copyright © 2024 The Apache Software Foundation.<br> Apache IoTDB, IoTDB, Apache, the Apache feather logo, and the Apache IoTDB project logo are either registered trademarks or trademarks of The Apache Software Foundation in all countries</p><p style="text-align:center;margin-top:10px;color:#909399;font-size:12px;margin:0 30px;"><strong>Have a question?</strong> Connect with us on QQ, WeChat, or Slack. <a href="https://github.com/apache/iotdb/issues/1995">Join the community</a> now.</p></footer></div><!--]--><!--]--><!--[--><!----><!--]--><!--]--></div>
    <script type="module" src="/assets/app-sVi9U6n1.js" defer></script>
  </body>
</html>
